(function(f,h){"object"===typeof exports&&"object"===typeof module?module.exports=h():"function"===typeof define&&define.amd?define([],h):"object"===typeof exports?exports.RxPlayer=h():f.RxPlayer=h()})(this,function(){return function(f){function h(l){if(a[l])return a[l].exports;var k=a[l]={exports:{},id:l,loaded:!1};f[l].call(k.exports,k,k.exports,h);k.loaded=!0;return k.exports}var a={};h.m=f;h.c=a;h.p="";return h(0)}([function(f,h,a){"function"!=typeof Object.assign&&function(){Object.assign=function(a){if(void 0===
a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var k=Object(a),g=1;g<arguments.length;g++){var d=arguments[g];if(void 0!==d&&null!==d)for(var b in d)d.hasOwnProperty(b)&&(k[b]=d[b])}return k}}();a(61);a(62);a(63);a(64);a(65);a(66);a(67);a(68);a(69);a(70);a(71);a(72);a(73);a(74);a(75);a(76);a(77);a(78);a(79);a(80);a(81);a(82);a(83);a(84);a(85);f.exports=a(143)},function(f,h,a){var l=a(8),k=a(128),g=a(33);f=function(){function a(b){this._isScalar=!1;b&&(this._subscribe=
b)}a.prototype.lift=function(b){var c=new a;c.source=this;c.operator=b;return c};a.prototype.subscribe=function(b,c,e){var a=this.operator;b=k.toSubscriber(b,c,e);a?a.call(b,this):b.add(this._subscribe(b));if(b.syncErrorThrowable&&(b.syncErrorThrowable=!1,b.syncErrorThrown))throw b.syncErrorValue;return b};a.prototype.forEach=function(b,c){var e=this;c||(l.root.Rx&&l.root.Rx.config&&l.root.Rx.config.Promise?c=l.root.Rx.config.Promise:l.root.Promise&&(c=l.root.Promise));if(!c)throw Error("no Promise impl found");
return new c(function(c,a){var d=e.subscribe(function(e){if(d)try{b(e)}catch(c){a(c),d.unsubscribe()}else b(e)},a,c)})};a.prototype._subscribe=function(b){return this.source.subscribe(b)};a.prototype[g["default"]]=function(){return this};a.create=function(b){return new a(b)};return a}();h.Observable=f},function(f,h,a){var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol?"symbol":typeof b},
k=function(b,c){function a(){this.constructor=b}for(var d in c)c.hasOwnProperty(d)&&(b[d]=c[d]);b.prototype=null===c?Object.create(c):(a.prototype=c.prototype,new a)},g=a(24);f=a(4);var d=a(59),b=a(32);a=function(e){function a(b,g,k){e.call(this);this.syncErrorValue=null;this.isStopped=this.syncErrorThrowable=this.syncErrorThrown=!1;switch(arguments.length){case 0:this.destination=d.empty;break;case 1:if(!b){this.destination=d.empty;break}if("object"===("undefined"===typeof b?"undefined":l(b))){b instanceof
a?(this.destination=b,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,b));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,b,g,k)}}k(a,e);a.prototype[b.$$rxSubscriber]=function(){return this};a.create=function(b,e,c){b=new a(b,e,c);b.syncErrorThrowable=!1;return b};a.prototype.next=function(b){this.isStopped||this._next(b)};a.prototype.error=function(b){this.isStopped||(this.isStopped=!0,this._error(b))};a.prototype.complete=function(){this.isStopped||
(this.isStopped=!0,this._complete())};a.prototype.unsubscribe=function(){this.isUnsubscribed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))};a.prototype._next=function(b){this.destination.next(b)};a.prototype._error=function(b){this.destination.error(b);this.unsubscribe()};a.prototype._complete=function(){this.destination.complete();this.unsubscribe()};return a}(f.Subscription);h.Subscriber=a;var c=function(b){function a(c,d,m,k){b.call(this);this._parent=c;var h;c=this;g.isFunction(d)?h=
d:d&&(c=d,h=d.next,m=d.error,k=d.complete,g.isFunction(c.unsubscribe)&&this.add(c.unsubscribe.bind(c)),c.unsubscribe=this.unsubscribe.bind(this));this._context=c;this._next=h;this._error=m;this._complete=k}k(a,b);a.prototype.next=function(b){if(!this.isStopped&&this._next){var e=this._parent;e.syncErrorThrowable?this.__tryOrSetError(e,this._next,b)&&this.unsubscribe():this.__tryOrUnsub(this._next,b)}};a.prototype.error=function(b){if(!this.isStopped){var e=this._parent;if(this._error)e.syncErrorThrowable?
this.__tryOrSetError(e,this._error,b):this.__tryOrUnsub(this._error,b),this.unsubscribe();else if(e.syncErrorThrowable)e.syncErrorValue=b,e.syncErrorThrown=!0,this.unsubscribe();else throw this.unsubscribe(),b;}};a.prototype.complete=function(){if(!this.isStopped){var b=this._parent;this._complete&&(b.syncErrorThrowable?this.__tryOrSetError(b,this._complete):this.__tryOrUnsub(this._complete));this.unsubscribe()}};a.prototype.__tryOrUnsub=function(b,e){try{b.call(this._context,e)}catch(a){throw this.unsubscribe(),
a;}};a.prototype.__tryOrSetError=function(b,e,a){try{e.call(this._context,a)}catch(c){return b.syncErrorValue=c,b.syncErrorThrown=!0}return!1};a.prototype._unsubscribe=function(){var b=this._parent;this._parent=this._context=null;b.unsubscribe()};return a}(a)},function(f,h){function a(g){this.name="AssertionError";this.message=g;Error.captureStackTrace&&Error.captureStackTrace(this,a)}function l(g,d){if(!g)throw new a(d);}var k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:
function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};a.prototype=Error();l.equal=function(a,d,b){return l(a===d,b)};l.iface=function(a,d,b){l(a,d+" should be an object");for(var c in b)l.equal(k(a[c]),b[c],d+" should have property "+c+" as a "+b[c])};f.exports=l},function(f,h,a){var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol?"symbol":typeof b},
k=a(16),g=a(48),d=a(24),b=a(25),c=a(20),e=a(126);f=function(){function a(b){this.isUnsubscribed=!1;b&&(this._unsubscribe=b)}a.prototype.unsubscribe=function(){var a=!1,m;if(!this.isUnsubscribed){this.isUnsubscribed=!0;var u=this._unsubscribe,h=this._subscriptions;this._subscriptions=null;if(d.isFunction(u)){var f=b.tryCatch(u).call(this);f===c.errorObject&&(a=!0,(m=m||[]).push(c.errorObject.e))}if(k.isArray(h))for(var u=-1,l=h.length;++u<l;)f=h[u],g.isObject(f)&&(f=b.tryCatch(f.unsubscribe).call(f),
f===c.errorObject&&(a=!0,m=m||[],f=c.errorObject.e,f instanceof e.UnsubscriptionError?m=m.concat(f.errors):m.push(f)));if(a)throw new e.UnsubscriptionError(m);}};a.prototype.add=function(b){if(b&&b!==this&&b!==a.EMPTY){var e=b;switch("undefined"===typeof b?"undefined":l(b)){case "function":e=new a(b);case "object":if(e.isUnsubscribed||"function"!==typeof e.unsubscribe)break;else this.isUnsubscribed?e.unsubscribe():(this._subscriptions||(this._subscriptions=[])).push(e);break;default:throw Error("Unrecognized teardown "+
b+" added to Subscription.");}return e}};a.prototype.remove=function(b){if(null!=b&&b!==this&&b!==a.EMPTY){var e=this._subscriptions;e&&(b=e.indexOf(b),-1!==b&&e.splice(b,1))}};a.EMPTY=function(b){b.isUnsubscribed=!0;return b}(new a);return a}();h.Subscription=f},function(f,h,a){var l=function(a,g){function d(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&(a[b]=g[b]);a.prototype=null===g?Object.create(g):(d.prototype=g.prototype,new d)};f=function(a){function g(d){a.call(this);this.scheduler=
d}l(g,a);g.create=function(a){return new g(a)};g.dispatch=function(a){a.subscriber.complete()};g.prototype._subscribe=function(a){var b=this.scheduler;if(b)return b.schedule(g.dispatch,0,{subscriber:a});a.complete()};return g}(a(1).Observable);h.EmptyObservable=f},function(f,h){function a(b){var a=b.reduce(function(b,a){b[a]=a;return b},{});a.keys=b;return a}function l(b,a,e){return b+"("+a+")"+(e?": "+e.message:"")}function k(b,a,e){this.name="MediaError";this.type=m.MEDIA_ERROR;this.reason=a;this.code=
r[b];this.fatal=e;this.message=l(this.name,this.code,this.reason)}function g(b,a,e){this.name="NetworkError";this.type=m.NETWORK_ERROR;this.xhr=a.xhr;this.url=a.url;this.status=a.status;this.reqType=a.type;this.reason=a;this.code=r[b];this.fatal=e;this.message=this.reason?l(this.name,this.code,this.reason):l(this.name,this.code,{message:""+this.reqType+(0<this.status?"("+this.status+")":"")+" on "+this.url})}function d(b,a,e){this.name="EncryptedMediaError";this.type=m.ENCRYPTED_MEDIA_ERROR;this.reason=
a;this.code=r[b];this.fatal=e;this.message=l(this.name,this.code,this.reason)}function b(b,a,e){this.name="IndexError";this.type=m.INDEX_ERROR;this.indexType=a;this.reason=null;this.code=r[b];this.fatal=e;this.message=l(this.name,this.code,null)}function c(b,a,e){this.name="OtherError";this.type=m.OTHER_ERROR;this.reason=a;this.code=r[b];this.fatal=e;this.message=l(this.name,this.code,this.reason)}function e(b,a,e){this.name="RequestError";this.url=a.url;this.xhr=b;this.status=b.status;this.message=
this.type=e}var m=a(["NETWORK_ERROR","MEDIA_ERROR","ENCRYPTED_MEDIA_ERROR","INDEX_ERROR","OTHER_ERROR"]),n=a(["TIMEOUT","ERROR_EVENT","ERROR_HTTP_CODE","PARSE_ERROR"]),r=a("PIPELINE_RESOLVE_ERROR PIPELINE_LOAD_ERROR PIPELINE_PARSING_ERROR MANIFEST_PARSE_ERROR MANIFEST_INCOMPATIBLE_CODECS_ERROR MEDIA_IS_ENCRYPTED_ERROR KEY_ERROR KEY_STATUS_CHANGE_ERROR KEY_UPDATE_ERROR KEY_LOAD_ERROR KEY_LOAD_TIMEOUT KEY_GENERATE_REQUEST_ERROR INCOMPATIBLE_KEYSYSTEMS BUFFER_APPEND_ERROR BUFFER_FULL_ERROR BUFFER_TYPE_UNKNOWN MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_SOURCE_NOT_SUPPORTED MEDIA_KEYS_NOT_SUPPORTED OUT_OF_INDEX_ERROR UNKNOWN_INDEX".split(" "));
k.prototype=Error();g.prototype=Error();g.prototype.isHttpError=function(b){return this.reqType==n.ERROR_HTTP_CODE&&this.status==b};d.prototype=Error();b.prototype=Error();c.prototype=Error();e.prototype=Error();f.exports={ErrorTypes:m,ErrorCodes:r,MediaError:k,NetworkError:g,EncryptedMediaError:d,IndexError:b,OtherError:c,RequestError:e,RequestErrorTypes:n,isKnownError:function(b){return!!b&&!!b.type&&0<=m.keys.indexOf(b.type)}}},function(f,h,a){var l=function(b,a){function e(){this.constructor=
b}for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)},k=a(1);f=a(2);var g=a(4),d=a(45),b=a(60),c=a(32),e=function(b){function a(e){b.call(this,e);this.destination=e}l(a,b);return a}(f.Subscriber);h.SubjectSubscriber=e;a=function(a){function r(){a.call(this);this.observers=[];this.hasError=this.isStopped=this.isUnsubscribed=!1;this.thrownError=null}l(r,a);r.prototype[c.$$rxSubscriber]=function(){return new e(this)};r.prototype.lift=
function(b){var a=new m(this,this);a.operator=b;return a};r.prototype.next=function(b){if(this.isUnsubscribed)throw new d.ObjectUnsubscribedError;if(!this.isStopped)for(var a=this.observers,e=a.length,a=a.slice(),c=0;c<e;c++)a[c].next(b)};r.prototype.error=function(b){if(this.isUnsubscribed)throw new d.ObjectUnsubscribedError;this.hasError=!0;this.thrownError=b;this.isStopped=!0;for(var a=this.observers,e=a.length,a=a.slice(),c=0;c<e;c++)a[c].error(b);this.observers.length=0};r.prototype.complete=
function(){if(this.isUnsubscribed)throw new d.ObjectUnsubscribedError;this.isStopped=!0;for(var b=this.observers,a=b.length,b=b.slice(),e=0;e<a;e++)b[e].complete();this.observers.length=0};r.prototype.unsubscribe=function(){this.isUnsubscribed=this.isStopped=!0;this.observers=null};r.prototype._subscribe=function(a){if(this.isUnsubscribed)throw new d.ObjectUnsubscribedError;if(this.hasError)return a.error(this.thrownError),g.Subscription.EMPTY;if(this.isStopped)return a.complete(),g.Subscription.EMPTY;
this.observers.push(a);return new b.SubjectSubscription(this,a)};r.prototype.asObservable=function(){var b=new k.Observable;b.source=this;return b};r.create=function(b,a){return new m(b,a)};return r}(k.Observable);h.Subject=a;var m=function(b){function a(e,c){b.call(this);this.destination=e;this.source=c}l(a,b);a.prototype.next=function(b){var a=this.destination;a&&a.next&&a.next(b)};a.prototype.error=function(b){var a=this.destination;a&&a.error&&this.destination.error(b)};a.prototype.complete=function(){var b=
this.destination;b&&b.complete&&this.destination.complete()};a.prototype._subscribe=function(b){return this.source?this.source.subscribe(b):g.Subscription.EMPTY};return a}(a);h.AnonymousSubject=m},function(f,h,a){(function(a,k){var g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol?"symbol":typeof b},d={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};h.root=d["undefined"===
typeof self?"undefined":g(self)]&&self||d["undefined"===typeof window?"undefined":g(window)]&&window;g(h);g(a);!(g=d["undefined"===typeof k?"undefined":g(k)]&&k)||g.global!==g&&g.window!==g||(h.root=g)}).call(h,a(131)(f),function(){return this}())},function(f,h){function a(){}var l={NONE:0,ERROR:1,WARNING:2,INFO:3,DEBUG:4},k=function(){};a.error=k;a.warn=k;a.info=k;a.debug=k;a.setLevel=function(g){"string"==typeof g&&(g=l[g]);a.error=g>=l.ERROR?console.error.bind(console):k;a.warn=g>=l.WARNING?console.warn.bind(console):
k;a.info=g>=l.INFO?console.info.bind(console):k;a.debug=g>=l.DEBUG?console.log.bind(console):k};f.exports=a},function(f,h,a){var l=function(b,a){function e(){this.constructor=b}for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);b.prototype=null===a?Object.create(a):(e.prototype=a.prototype,new e)};f=a(1);var k=a(28),g=a(5),d=a(12);a=function(b){function a(e,c){b.call(this);this.array=e;this.scheduler=c;c||1!==e.length||(this._isScalar=!0,this.value=e[0])}l(a,b);a.create=function(b,d){return new a(b,
d)};a.of=function(){for(var b=[],m=0;m<arguments.length;m++)b[m-0]=arguments[m];m=b[b.length-1];d.isScheduler(m)?b.pop():m=null;var n=b.length;return 1<n?new a(b,m):1===n?new k.ScalarObservable(b[0],m):new g.EmptyObservable(m)};a.dispatch=function(b){var a=b.array,c=b.index,d=b.subscriber;c>=b.count?d.complete():(d.next(a[c]),d.isUnsubscribed||(b.index=c+1,this.schedule(b)))};a.prototype._subscribe=function(b){var d=this.array,g=d.length,k=this.scheduler;if(k)return k.schedule(a.dispatch,0,{array:d,
index:0,count:g,subscriber:b});for(k=0;k<g&&!b.isUnsubscribed;k++)b.next(d[k]);b.complete()};return a}(f.Observable);h.ArrayObservable=a},function(f,h,a){f=a(108);h.merge=f.mergeStatic},function(f,h){h.isScheduler=function(a){return a&&"function"===typeof a.schedule}},function(f,h,a){function l(b,a){return b.reduce(function(b,e){return b.concat((a||v).map(function(b){return b+e}))},[])}function k(b,a){return a.filter(function(a){var e;e=document.createElement(b.tagName);a="on"+a;a in e?e=!0:(e.setAttribute(a,
"return;"),e="function"==typeof e[a]);return e})[0]}function g(b,a){var e=void 0;b=l(b,a);return function(a){return a instanceof F?("undefined"==typeof e&&(e=k(a,b)||null),e?p(a,e):q()):y(a,b)}}function d(b,a){function e(){var b=0>=arguments.length||void 0===arguments[0]?{}:arguments[0];b.errorCode&&(b={systemCode:b.systemCode,code:b.errorCode.code});this.name="KeySessionError";this.mediaKeyError=b;this.message="MediaKeyError code:"+b.code+" and systemCode:"+b.systemCode}e.prototype=Error();return function(c,
d){var m="function"==typeof a?a.call(this):this,g=I(m),n=O(m).map(function(b){throw new e(m.error||b);});try{return b.call(this,c,d),t(g,n).take(1)}catch(k){return w["throw"](k)}}}function b(b,a){if(a instanceof K)return a._setVideo(b);if(b.setMediaKeys)return b.setMediaKeys(a);if(null!==a){if(b.WebkitSetMediaKeys)return b.WebkitSetMediaKeys(a);if(b.mozSetMediaKeys)return b.mozSetMediaKeys(a);if(b.msSetMediaKeys)return b.msSetMediaKeys(a)}}function c(){return!!(z.fullscreenElement||z.mozFullScreenElement||
z.webkitFullscreenElement||z.msFullscreenElement)}var e=function(){function b(a,e){for(var c=0;c<e.length;c++){var d=e[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(a,e,c){e&&b(a.prototype,e);c&&b(a,c);return a}}();a(9);var m=a(35);h=a(18);var n=h.bytesToStr,r=h.strToBytes,u=a(3),w=a(1).Observable,t=a(11).merge,p=a(39).FromEventObservable.create,q=a(93).NeverObservable.create;h=a(14);var y=h.on,A=h.castToObservable,
D=a(6).MediaError,z=document,B=window,v=["","webkit","moz","ms"],F=B.HTMLElement;a=B.HTMLVideoElement;var C=B.MediaSource||B.MozMediaSource||B.WebKitMediaSource||B.MSMediaSource,E=B.MediaKeys||B.MozMediaKeys||B.WebKitMediaKeys||B.MSMediaKeys,G="Microsoft Internet Explorer"==navigator.appName||"Netscape"==navigator.appName&&/(Trident|Edge)\//.test(navigator.userAgent),K=function(){},L=void 0;navigator.requestMediaKeySystemAccess&&(L=function(b,a){return A(navigator.requestMediaKeySystemAccess(b,a))});
var H=function(){function b(a,e,c){if(!(this instanceof b))throw new TypeError("Cannot call a class as a function");this._keyType=a;this._mediaKeys=e;this._configuration=c}b.prototype.createMediaKeys=function(){return w.of(this._mediaKeys)};b.prototype.getConfiguration=function(){return this._configuration};e(b,[{key:"keySystem",get:function(){return this._keyType}}]);return b}(),x=g(["loadedmetadata"]),M=g(["sourceopen","webkitsourceopen"]);h=g(["encrypted","needkey"]);var J=g(["keymessage","message"]),
I=g(["keyadded","ready"]),O=g(["keyerror","error"]),N=g(["keystatuseschange"]);h={onEncrypted:h,onKeyMessage:J,onKeyStatusesChange:N,onKeyError:O};!L&&a.prototype.webkitGenerateKeyRequest?function(){var b=function(b,a){var e=this;m.call(this);this.sessionId="";this._vid=b;this._key=a;this._con=t(J(b),I(b),O(b)).subscribe(function(b){return e.trigger(b.type,b)})};b.prototype=Object.assign({generateRequest:function(b,a){this._vid.webkitGenerateKeyRequest(this._key,a)},update:d(function(b,a){if(0<=this._key.indexOf("clearkey")){var e=
JSON.parse(n(b)),c=r(atob(e.keys[0].k)),e=r(atob(e.keys[0].kid));this._vid.webkitAddKey(this._key,c,e,a)}else this._vid.webkitAddKey(this._key,b,null,a);this.sessionId=a}),close:function(){this._con&&this._con.unsubscribe();this._vid=this._con=null}},m.prototype);K=function(b){this.ks_=b};K.prototype={_setVideo:function(b){this._vid=b},createSession:function(){return new b(this._vid,this.ks_)}};var a=function(b){var a=z.querySelector("video")||z.createElement("video");return a&&a.canPlayType?!!a.canPlayType("video/mp4",
b):!1};L=function(b,e){if(!a(b))return w["throw"]();for(var c=0;c<e.length;c++){var d=e[c],m=d.videoCapabilities,g=d.audioCapabilities,n=d.initDataTypes,k=d.sessionTypes,r=d.distinctiveIdentifier,d=d.persistentState,h=!0;if(h=(h=(h=(h=h&&(!n||!!n.filter(function(b){return"cenc"===b})[0]))&&(!k||k.filter(function(b){return"temporary"===b}).length===k.length))&&"required"!==r)&&"required"!==d)return c={videoCapabilities:m,audioCapabilities:g,initDataTypes:["cenc"],distinctiveIdentifier:"not-allowed",
persistentState:"not-allowed",sessionTypes:["temporary"]},w.of(new H(b,new K(b),c))}return w["throw"]()}}():E&&!L&&function(){var b=function(b){m.call(this);this.sessionId="";this._mk=b};b.prototype=Object.assign({generateRequest:function(b,a){var e=this;this._ss=this._mk.memCreateSession("video/mp4",a);this._con=t(J(this._ss),I(this._ss),O(this._ss)).subscribe(function(b){return e.trigger(b.type,b)})},update:d(function(b,a){u(this._ss);this._ss.update(b,a);this.sessionId=a},function(){return this._ss}),
close:function(){this._ss&&(this._ss.close(),this._ss=null);this._con&&(this._con.unsubscribe(),this._con=null)}},m.prototype);E.prototype.alwaysRenew=!0;E.prototype.memCreateSession=E.prototype.createSession;E.prototype.createSession=function(){return new b(this)};L=function(b,a){if(!E.isTypeSupported(b))return w["throw"]();for(var e=0;e<a.length;e++){var c=a[e],d=c.videoCapabilities,m=c.audioCapabilities,g=c.initDataTypes,c=c.distinctiveIdentifier,n=!0;if(n=(n=n&&(!g||!!g.filter(function(b){return"cenc"===
b})[0]))&&"required"!==c)return e={videoCapabilities:d,audioCapabilities:m,initDataTypes:["cenc"],distinctiveIdentifier:"not-allowed",persistentState:"required",sessionTypes:["temporary","persistent-license"]},w.of(new H(b,new E(b),e))}return w["throw"]()}}();E||(N=function(){throw new D("MEDIA_KEYS_NOT_SUPPORTED",null,!0);},E={create:N,isTypeSupported:N});if(B.WebKitSourceBuffer&&!B.WebKitSourceBuffer.prototype.addEventListener){var N=B.WebKitSourceBuffer.prototype,S;for(S in m.prototype)N[S]=m.prototype[S];
N.__listeners=[];N.appendBuffer=function(b){if(this.updating)throw Error("updating");this.trigger("updatestart");this.updating=!0;try{this.append(b)}catch(a){this.__emitUpdate("error",a);return}this.__emitUpdate("update")};N.__emitUpdate=function(b,a){var e=this;setTimeout(function(){e.trigger(b,a);e.updating=!1;e.trigger("updateend")},0)}}S=g(["fullscreenchange","FullscreenChange"],v.concat("MS"));f.exports={HTMLVideoElement_:a,MediaSource_:C,isCodecSupported:function(b){return!!C&&C.isTypeSupported(b)},
sourceOpen:function(b){return"open"==b.readyState?w.of(null):M(b).take(1)},canSeek:function(b){return 1<=b.readyState?w.of(null):x(b).take(1)},canPlay:function(b){return 4<=b.readyState?w.of(null):y(b,"canplay").take(1)},KeySystemAccess:H,requestMediaKeySystemAccess:L,setMediaKeys:function(a,e){return A(b(a,e))},emeEvents:h,shouldRenewMediaKeys:function(){return G},isFullscreen:c,onFullscreenChange:S,requestFullscreen:function(b){c()||(b.requestFullscreen?b.requestFullscreen():b.msRequestFullscreen?
b.msRequestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.webkitRequestFullscreen&&b.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT))},exitFullscreen:function(){c()&&(z.exitFullscreen?z.exitFullscreen():z.msExitFullscreen?z.msExitFullscreen():z.mozCancelFullScreen?z.mozCancelFullScreen():z.webkitExitFullscreen&&z.webkitExitFullscreen())},videoSizeChange:function(){return y(B,"resize")},visibilityChange:function(){var b=void 0;null!=z.hidden?b="":null!=z.mozHidden?b="moz":null!=
z.msHidden?b="ms":null!=z.webkitHidden&&(b="webkit");var a=b?b+"Hidden":"hidden";return y(z,b+"visibilitychange").map(function(){return z[a]})},clearVideoSrc:function(b){G?b.removeAttribute("src"):b.src=""},addTextTrack:function(b){var a=void 0,e=void 0;G?(a=b.textTracks.length,a=0<a?b.textTracks[a-1]:b.addTextTrack("subtitles"),a.mode=a.SHOWING):(e=document.createElement("track"),a=e.track,e.kind="subtitles",a.mode="showing",b.appendChild(e));return{track:a,trackElement:e}},isVTTSupported:function(){return!G},
isIE:G}},function(f,h,a){function l(b,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);b.prototype=Object.create(a&&a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a)}var k=a(1).Observable,g=a(11).merge,d=a(39).FromEventObservable.create,b=a(40).PromiseObservable.create,c=function(b){function a(c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
var d;d=b.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=!d||"object"!==typeof d&&"function"!==typeof d?this:d;d.value=c;return d}l(a,b);a.prototype._subscribe=function(b){b.next(this.value)};return a}(k);f.exports={on:function(b,a){return Array.isArray(a)?g.apply(null,a.map(function(a){return d(b,a)})):d(b,a)},only:function(b){return new c(b)},tryCatch:function(b,a){try{return b(a)}catch(c){return k["throw"](c)}},castToObservable:function(a){return a instanceof
k?a:a&&"function"==typeof a.subscribe?new k(function(b){var c=a.subscribe(function(a){return b.next(a)},function(a){return b.error(a)},function(){return b.complete()});return function(){c&&c.dispose?c.dispose():c&&c.unsubscribe&&c.unsubscribe()}}):a&&"function"==typeof a.then?b(a):k.of(a)}}},function(f,h,a){var l=function(a,g){function d(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&(a[b]=g[b]);a.prototype=null===g?Object.create(g):(d.prototype=g.prototype,new d)};f=function(a){function g(){a.apply(this,
arguments)}l(g,a);g.prototype.notifyNext=function(a,b,c,e,g){this.destination.next(b)};g.prototype.notifyError=function(a,b){this.destination.error(a)};g.prototype.notifyComplete=function(a){this.destination.complete()};return g}(a(2).Subscriber);h.OuterSubscriber=f},function(f,h){h.isArray=Array.isArray||function(a){return a&&"number"===typeof a.length}},function(f,h,a){var l=a(8),k=a(16),g=a(49),d=a(1),b=a(31),c=a(57),e=a(33);h.subscribeToResult=function(a,n,r,h){var f=new c.InnerSubscriber(a,r,
h);if(!f.isUnsubscribed){if(n instanceof d.Observable){if(n._isScalar){f.next(n.value);f.complete();return}return n.subscribe(f)}if(k.isArray(n)){a=0;for(r=n.length;a<r&&!f.isUnsubscribed;a++)f.next(n[a]);f.isUnsubscribed||f.complete()}else{if(g.isPromise(n))return n.then(function(b){f.isUnsubscribed||(f.next(b),f.complete())},function(b){return f.error(b)}).then(null,function(b){l.root.setTimeout(function(){throw b;})}),f;if("function"===typeof n[b.$$iterator]){for(a=0;a<n.length&&(f.next(n[a]),
!f.isUnsubscribed);a++);f.isUnsubscribed||f.complete()}else if("function"===typeof n[e["default"]])if(n=n[e["default"]](),"function"!==typeof n.subscribe)f.error("invalid observable");else return n.subscribe(new c.InnerSubscriber(a,r,h));else f.error(new TypeError("unknown type returned"))}}}},function(f,h,a){function l(a){for(var b=a.length,c=new Uint8Array(b),e=0;e<b;e++)c[e]=a.charCodeAt(e)&255;return c}function k(a,b){b||(b="");for(var c="",e=0;e<a.byteLength;e++)c+=(a[e]>>>4).toString(16),c+=
(a[e]&15).toString(16),b.length&&(c+=b);return c}var g=a(3);f.exports={totalBytes:function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c].byteLength;return b},strToBytes:l,bytesToStr:function(a){return String.fromCharCode.apply(null,a)},bytesToUTF16Str:function(a){for(var b="",c=a.length,e=0;e<c;e+=2)b+=String.fromCharCode(a[e]);return b},hexToBytes:function(a){for(var b=a.length,c=new Uint8Array(b/2),e=0,g=0;e<b;e+=2,g++)c[g]=parseInt(a.substr(e,2),16)&255;return c},bytesToHex:k,concat:function(){for(var a=
arguments.length,b=-1,c=0,e=void 0;++b<a;)e=arguments[b],c+="number"===typeof e?e:e.length;for(var c=new Uint8Array(c),g=0,b=-1;++b<a;)e=arguments[b],"number"===typeof e?g+=e:0<e.length&&(c.set(e,g),g+=e.length);return c},be2toi:function(a,b){return(a[0+b]<<8)+(a[1+b]<<0)},be4toi:function(a,b){return 16777216*a[0+b]+65536*a[1+b]+256*a[2+b]+a[3+b]},be8toi:function(a,b){return 4294967296*(16777216*a[0+b]+65536*a[1+b]+256*a[2+b]+a[3+b])+16777216*a[4+b]+65536*a[5+b]+256*a[6+b]+a[7+b]},le2toi:function(a,
b){return(a[0+b]<<0)+(a[1+b]<<8)},le4toi:function(a,b){return a[0+b]+256*a[1+b]+65536*a[2+b]+16777216*a[3+b]},le8toi:function(a,b){return a[0+b]+256*a[1+b]+65536*a[2+b]+16777216*a[3+b]+(a[4+b]+256*a[5+b]+65536*a[6+b]+16777216*a[7+b]*4294967296)},itobe2:function(a){return new Uint8Array([a>>>8&255,a&255])},itobe4:function(a){return new Uint8Array([a>>>24&255,a>>>16&255,a>>>8&255,a&255])},itobe8:function(a){var b=a%4294967296;a=(a-b)/4294967296;return new Uint8Array([a>>>24&255,a>>>16&255,a>>>8&255,
a&255,b>>>24&255,b>>>16&255,b>>>8&255,b&255])},itole2:function(a){return new Uint8Array([a&255,a>>>8&255])},itole4:function(a){return new Uint8Array([a&255,a>>>8&255,a>>>16&255,a>>>24&255])},itole8:function(a){var b=a%4294967296;a=(a-b)/4294967296;return new Uint8Array([a&255,a>>>8&255,a>>>16&255,a>>>24&255,b&255,b>>>8&255,b>>>16&255,b>>>24&255])},guidToUuid:function(a){g.equal(a.length,16,"UUID length should be 16");var b=l(a);a=b[0];var c=b[1],e=b[2],m=b[3],n=b[4],r=b[5],f=b[6],h=b[7],t=b.subarray(8,
10),b=b.subarray(10,16),p=new Uint8Array(16);p[0]=m;p[1]=e;p[2]=c;p[3]=a;p[4]=r;p[5]=n;p[6]=h;p[7]=f;p.set(t,8);p.set(b,10);return k(p)},toBase64URL:function(a){return btoa(a).replace(/\=+$/,"")}}},function(f,h,a){var l=a(12),k=a(16),g=a(10),d=a(97);h.combineLatest=function(){for(var b=[],a=0;a<arguments.length;a++)b[a-0]=arguments[a];var e=a=null;l.isScheduler(b[b.length-1])&&(e=b.pop());"function"===typeof b[b.length-1]&&(a=b.pop());1===b.length&&k.isArray(b[0])&&(b=b[0]);return(new g.ArrayObservable(b,
e)).lift(new d.CombineLatestOperator(a))}},function(f,h){h.errorObject={e:{}}},function(f,h,a){function l(b){if(Array.isArray(b))return b;for(var a=b.length,e=Array(a),c=-1;++c<a;)e[c]={start:b.start(c),end:b.end(c),bitrate:0};return e}function k(b,a){return b.start<=a&&a<b.end}function g(b,a){for(var e=0;e<a.length;e++)if(d(b,a[e]))return a[e];return null}function d(b,a){return k(b,a.start)||k(b,a.end)||k(a,b.start)}function b(b,a){return k(b,a.start)&&k(b,a.end)}function c(b,a,e){return{start:Math.min(b.start,
a.start),end:Math.max(b.end,a.end),bitrate:e}}var e=a(3),m=1/60;h=function(){function a(b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.ranges=b?l(b):[];this.length=this.ranges.length}a.prototype.start=function(b){return this.ranges[b].start};a.prototype.end=function(b){return this.ranges[b].end};a.prototype.hasRange=function(b,a){for(var e=b+a,c=0;c<this.ranges.length;c++){var d=this.ranges[c],g=d.start,d=d.end;if(g-b<=m&&b-d<=m&&g-e<=m&&e-d<=m)return this.ranges[c]}return null};
a.prototype.getRange=function(b){for(var a=0;a<this.ranges.length;a++)if(k(this.ranges[a],b))return this.ranges[a];return null};a.prototype.getOuterRanges=function(b){for(var a=[],e=0;e<this.ranges.length;e++)k(this.ranges[e],b)||a.push(this.ranges[e]);return a};a.prototype.getGap=function(b){var a=this.getRange(b);return a?a.end-b:Infinity};a.prototype.getLoaded=function(b){var a=this.getRange(b);return a?b-a.start:0};a.prototype.getSize=function(b){return(b=this.getRange(b))?b.end-b.start:0};a.prototype.getNextRangeGap=
function(b){for(var a=this.ranges,e=-1,c=void 0;++e<a.length;){var d=a[e].start;if(d>b){c=d;break}}return null!=c?c-b:Infinity};a.prototype.insert=function(a,g,k){var n=this.ranges;e(g<=k);if(g!=k){a={start:g,end:k,bitrate:a};for(g=0;g<n.length;g++){k=n[g];var f=d(a,k),h=Math.abs(k.start-a.end)<m||Math.abs(k.end-a.start)<m;if(f||h)if(a.bitrate===k.bitrate)a=c(a,k,k.bitrate),n.splice(g--,1);else if(f)if(b(k,a))n.splice(++g,0,a),f=k.end,k.end=a.start,a={start:a.end,end:f,bitrate:k.bitrate};else if(b(a,
k))n.splice(g--,1);else if(k.start<a.start)k.end=a.start;else{k.start=a.end;break}else break;else if(0===g){if(a.end<=n[0].start)break}else if(n[g-1].end<=a.start&&a.end<=k.start)break}n.splice(g,0,a);for(a=0;a<n.length;a++)g=n[a],g.start===g.end&&n.splice(a++,1);for(a=1;a<n.length;a++)g=n[a-1],k=n[a],g.bitrate===k.bitrate&&(Math.abs(k.start-g.end)<m||Math.abs(k.end-g.start)<m)&&(g=c(g,k,k.bitrate),n.splice(--a,2,g))}this.length=this.ranges.length;return this.ranges};a.prototype.remove=function(b,
e){this.intersect(new a([{start:0,end:b},{start:e,end:Infinity}]))};a.prototype.equals=function(b){var a;a:{a=this.ranges;b=b.ranges;for(var e=0;e<a.length;e++){var c=a[e],d=g(c,b);if(!d||d.start>c.start||d.end<c.end){a=!1;break a}}a=!0}return a};a.prototype.intersect=function(b){var a=this.ranges;b=b.ranges;for(var e=0;e<a.length;e++){var c=a[e],d=g(c,b);d?(d.start>c.start&&(c.start=d.start),d.end<c.end&&(c.end=d.end)):a.splice(e--,1)}this.length=this.ranges.length;return this.ranges};return a}();
f.exports={bufferedToArray:l,BufferedRanges:h}},function(f,h,a){var l=function(a,d){function b(){this.constructor=a}for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)},k=a(8);f=function(a){function d(b,c){a.call(this);this.scheduler=b;this.work=c;this.pending=!1}l(d,a);d.prototype.execute=function(){if(this.isUnsubscribed)this.error=Error("executing a cancelled action");else try{this.work(this.state)}catch(b){this.unsubscribe(),this.error=
b}};d.prototype.schedule=function(b,a){void 0===a&&(a=0);return this.isUnsubscribed?this:this._schedule(b,a)};d.prototype._schedule=function(b,a){var e=this;void 0===a&&(a=0);this.state=b;this.pending=!0;var d=this.id;if(null!=d&&this.delay===a)return this;this.delay=a;null!=d&&(this.id=null,k.root.clearInterval(d));this.id=k.root.setInterval(function(){e.pending=!1;var b=e.id,a=e.scheduler;a.actions.push(e);a.flush();!1===e.pending&&null!=b&&(e.id=null,k.root.clearInterval(b))},a);return this};d.prototype._unsubscribe=
function(){this.pending=!1;var b=this.id,a=this.scheduler.actions,e=a.indexOf(this);null!=b&&(this.id=null,k.root.clearInterval(b));-1!==e&&a.splice(e,1);this.scheduler=this.state=this.work=null};return d}(a(4).Subscription);h.FutureAction=f},function(f,h,a){f=a(121);h.async=new f.AsyncScheduler},function(f,h){h.isFunction=function(a){return"function"===typeof a}},function(f,h,a){function l(){try{return g.apply(this,arguments)}catch(a){return k.errorObject.e=a,k.errorObject}}var k=a(20),g;h.tryCatch=
function(a){g=a;return l}},function(f,h,a){function l(a,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);a.prototype=Object.create(c&&c.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(a,c):a.__proto__=c)}function k(a,c){if(!(a instanceof c))throw new TypeError("Cannot call a class as a function");}function g(a){return"number"==typeof a&&!isNaN(a)||
!isNaN(+a)?!0:!1}var d=a(37).resolveURL;h=function(){function a(c,e,d,n,f,h,l,t,p,q){k(this,a);this.id=d;this.ada=c;this.rep=e;this.time=g(f)?+f:-1;this.duration=g(h)?+h:-1;this.number=g(l)?+l:-1;this.media=n?""+n:"";this.range=Array.isArray(t)?t:null;this.indexRange=Array.isArray(p)?p:null;this.init=!!q}a.create=function(c,e,d,g,k,f,h,l,p,q){return new a(c,e,c.id+"_"+e.id+"_"+d,g,k,f,h,l,p,q)};a.prototype.getId=function(){return this.id};a.prototype.getAdaptation=function(){return this.ada};a.prototype.getRepresentation=
function(){return this.rep};a.prototype.getTime=function(){return this.time};a.prototype.getDuration=function(){return this.duration};a.prototype.getNumber=function(){return this.number};a.prototype.getMedia=function(){return this.media};a.prototype.getRange=function(){return this.range};a.prototype.getIndexRange=function(){return this.indexRange};a.prototype.isInitSegment=function(){return this.init};a.prototype.getResolvedURL=function(){return d(this.ada.rootURL,this.ada.baseURL,this.rep.baseURL)};
return a}();a=function(a){function c(e,d,g,f,h){k(this,c);e=a.call(this,e,d,e.id+"_"+d.id+"_init",g,-1,-1,-1,f,h,!0);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?this:e}l(c,a);return c}(h);f.exports={Segment:h,InitSegment:a}},function(f,h,a){var l=function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,
new c)};f=a(7);var k=a(127),g=a(45);a=function(a){function b(b){a.call(this);this._value=b}l(b,a);b.prototype.getValue=function(){if(this.hasError)k.throwError(this.thrownError);else if(this.isUnsubscribed)k.throwError(new g.ObjectUnsubscribedError);else return this._value};Object.defineProperty(b.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0});b.prototype._subscribe=function(b){var e=a.prototype._subscribe.call(this,b);e&&!e.isUnsubscribed&&b.next(this._value);
return e};b.prototype.next=function(b){a.prototype.next.call(this,this._value=b)};return b}(f.Subject);h.BehaviorSubject=a},function(f,h,a){var l=function(a,g){function d(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&(a[b]=g[b]);a.prototype=null===g?Object.create(g):(d.prototype=g.prototype,new d)};f=function(a){function g(d,b){a.call(this);this.value=d;this.scheduler=b;this._isScalar=!0;b&&(this._isScalar=!1)}l(g,a);g.create=function(a,b){return new g(a,b)};g.dispatch=function(a){var b=
a.value,c=a.subscriber;a.done?c.complete():(c.next(b),c.isUnsubscribed||(a.done=!0,this.schedule(a)))};g.prototype._subscribe=function(a){var b=this.value,c=this.scheduler;if(c)return c.schedule(g.dispatch,0,{done:!1,value:b,subscriber:a});a.next(b);a.isUnsubscribed||a.complete()};return g}(a(1).Observable);h.ScalarObservable=f},function(f,h,a){var l=function(a,c){function e(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,
new e)};f=a(15);var k=a(17);h.mergeAll=function(a){void 0===a&&(a=Number.POSITIVE_INFINITY);return this.lift(new g(a))};var g=function(){function a(b){this.concurrent=b}a.prototype.call=function(a,b){return b._subscribe(new d(a,this.concurrent))};return a}();h.MergeAllOperator=g;var d=function(a){function c(e,c){a.call(this,e);this.concurrent=c;this.hasCompleted=!1;this.buffer=[];this.active=0}l(c,a);c.prototype._next=function(a){this.active<this.concurrent?(this.active++,this.add(k.subscribeToResult(this,
a))):this.buffer.push(a)};c.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&this.destination.complete()};c.prototype.notifyComplete=function(a){var b=this.buffer;this.remove(a);this.active--;0<b.length?this._next(b.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()};return c}(f.OuterSubscriber);h.MergeAllSubscriber=d},function(f,h,a){var l=a(92),k=a(38);h.multicast=function(a,d){var b;b="function"===typeof a?a:function(){return a};
return d?new l.MulticastObservable(this,b,d):new k.ConnectableObservable(this,b)}},function(f,h,a){f=a(8);a=f.root.Symbol;if("function"===typeof a)a.iterator?h.$$iterator=a.iterator:"function"===typeof a["for"]&&(h.$$iterator=a["for"]("iterator"));else if(f.root.Set&&"function"===typeof(new f.root.Set)["@@iterator"])h.$$iterator="@@iterator";else if(f.root.Map){a=Object.getOwnPropertyNames(f.root.Map.prototype);for(var l=0;l<a.length;++l){var k=a[l];if("entries"!==k&&"size"!==k&&f.root.Map.prototype[k]===
f.root.Map.prototype.entries){h.$$iterator=k;break}}}else h.$$iterator="@@iterator"},function(f,h,a){f=a(8).root.Symbol;h.$$rxSubscriber="function"===typeof f&&"function"===typeof f["for"]?f["for"]("rxSubscriber"):"@@rxSubscriber"},function(f,h,a){f.exports=a(129)},function(f,h,a){function l(a,b,e,c){a.id=a.id||p++;var d=a.adaptations,d=d.concat(e||[]),d=d.concat(c||[]),d=d.map(function(a){return k(a,b)}),d=d.filter(function(a){return 0>q.indexOf(a.type)?(n.info("not supported adaptation type",a.type),
!1):!0});if(0===d.length)throw new w("MANIFEST_PARSE_ERROR",null,!0);e={};for(c=0;c<d.length;c++){var g=d[c],m=g.type;e[m]=e[m]||[];e[m].push(g)}a.adaptations=e;return a}function k(a,b){if("undefined"==typeof a.id)throw new w("MANIFEST_PARSE_ERROR",null,!0);a=Object.assign({},b,a);var e={};t.forEach(function(b){b in a&&(e[b]=a[b])});var d=a.representations.map(function(a){if("undefined"==typeof a.id)throw new w("MANIFEST_PARSE_ERROR",null,!0);a=Object.assign({},e,a);var b=a.index;if(!b)throw new w("MANIFEST_PARSE_ERROR",
null,!0);b.timescale||(b.timescale=1);a.bitrate||(a.bitrate=1);"mp4a.40.02"==a.codecs&&(a.codecs="mp4a.40.2");return a}).sort(function(a,b){return a.bitrate-b.bitrate}),g=a,m=g.type,g=g.mimeType;g||(g=d[0].mimeType);if(!g)throw new w("MANIFEST_PARSE_ERROR",null,!0);a.mimeType=g;m||(m=a.type=g.split("/")[0]);if("video"==m||"audio"==m)d=d.filter(function(a){return u(c(a))});if(0===d.length)throw new w("MANIFEST_INCOMPATIBLE_CODECS_ERROR",null,!0);a.representations=d;a.bitrates=d.map(function(a){return a.bitrate});
return a}function g(a){Array.isArray(a)||(a=[a]);return a.reduce(function(a,b){var e=b.mimeType,c=b.url,d=b.language,g=b.languages;d&&(g=[d]);return a.concat(g.map(function(a){return{id:p++,type:"text",lang:a,mimeType:e,rootURL:c,baseURL:"",representations:[{id:p++,mimeType:e,index:{indexType:"template",duration:Number.MAX_VALUE,timescale:1,startNumber:0}}]}}))},[])}function d(a){Array.isArray(a)||(a=[a]);return a.map(function(a){var b=a.mimeType;a=a.url;return{id:p++,type:"image",mimeType:b,rootURL:a,
baseURL:"",representations:[{id:p++,mimeType:b,index:{indexType:"template",duration:Number.MAX_VALUE,timescale:1,startNumber:0}}]}})}function b(a,e){for(var c in a)if(e.hasOwnProperty(c)){var d=a[c],g=e[c];"string"==typeof d||"number"==typeof d||"object"==("undefined"===typeof d?"undefined":m(d))&&d instanceof Date?a[c]=g:Array.isArray(d)?(d.length=0,Array.prototype.push.apply(d,g)):a[c]=b(d,g)}return a}function c(a){return a.mimeType+';codecs="'+a.codecs+'"'}function e(a,b){var e=a.adaptations;return(e=
e&&e[b])?e:[]}var m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},n=a(9),r=a(37).parseBaseURL,u=a(13).isCodecSupported,w=a(6).MediaError,t="profiles width height frameRate audioSamplingRate mimeType segmentProfiles codecs maximumSAPPeriod maxPlayoutRate codingDependency index".split(" "),p=0,q=["audio","video","text","image"];f.exports={normalizeManifest:function(a,
b,e,c){if(!b.transportType)throw new w("MANIFEST_PARSE_ERROR",null,!0);b.id=b.id||p++;b.type=b.type||"static";var m=b.locations;m&&m.length||(b.locations=[a]);b.isLive="dynamic"==b.type;var k={rootURL:r(b.locations[0]),baseURL:b.baseURL,isLive:b.isLive};e&&(e=g(e));c&&(c=d(c));a=b.periods.map(function(a){return l(a,k,e,c)});b=Object.assign({},b,a[0]);b.periods=null;b.duration||(b.duration=Infinity);b.isLive&&(b.suggestedPresentationDelay=b.suggestedPresentationDelay||15,b.availabilityStartTime=b.availabilityStartTime||
0);return b},mergeManifestsIndex:function(a,e){var c=a.adaptations,d=e.adaptations,g=function(a){var e=d[a];c[a].forEach(function(a,c){b(a.index,e[c].index)})},m;for(m in c)g(m);return a},mutateManifestLiveGap:function(a){var b=1>=arguments.length||void 0===arguments[1]?1:arguments[1];a.isLive&&(a.presentationLiveGap+=b)},getCodec:c,getAdaptations:function(a){a=a.adaptations;if(!a)return[];var b=[],e;for(e in a){var d=a[e];b.push({type:e,adaptations:d,codec:c(d[0].representations[0])})}return b},
getAdaptationsByType:e,getAvailableSubtitles:function(a){return e(a,"text").map(function(a){return a.lang})},getAvailableLanguages:function(a){return e(a,"audio").map(function(a){return a.lang})}}},function(f,h,a){function l(){this.__listeners={}}var k=a(3);l.prototype.addEventListener=function(a,d){k("function"==typeof d,"eventemitter: second argument should be a function");this.__listeners[a]||(this.__listeners[a]=[]);this.__listeners[a].push(d)};l.prototype.removeEventListener=function(a,d){if(0===
arguments.length)this.__listeners={};else if(this.__listeners.hasOwnProperty(a))if(1===arguments.length)delete this.__listeners[a];else{var b=this.__listeners[a],c=b.indexOf(d);~c&&b.splice(c,1);b.length||delete this.__listeners[a]}};l.prototype.trigger=function(a,d){this.__listeners.hasOwnProperty(a)&&this.__listeners[a].slice().forEach(function(a){try{a(d)}catch(c){console.error(c,c.stack)}})};l.prototype.on=l.prototype.addEventListener;l.prototype.off=l.prototype.removeEventListener;f.exports=
l},function(f,h,a){function l(a,b){var c=0;return function(){c&&clearTimeout(c);c=setTimeout(a,b)}}var k=a(158).getBackedoffDelay,g=a(41).TimerObservable.create;f.exports={retryWithBackoff:function(a,b){var c=b.retryDelay,e=b.totalRetry,m=b.shouldRetry,n=b.resetDelay,f=b.errorSelector,h=b.onRetry,w=0,t=void 0;0<n&&(t=l(function(){return w=0},n));return a["catch"](function(a,b){if(m&&!m(a)||w++>=e){if(f)throw f(a,w);throw a;}h&&h(a,w);var d=k(c,w);return g(d).mergeMap(function(){t&&t();return b})})},
retryableFuncWithBackoff:function(a,b){var c=b.retryDelay,e=b.totalRetry,m=b.shouldRetry,n=b.resetDelay,f=b.errorSelector,h=b.onRetry,w=0,t=void 0;0<n&&(t=l(function(){return w=0},n));return function q(){for(var b=arguments.length,n=Array(b),l=0;l<b;l++)n[l]=arguments[l];return a.apply(void 0,n)["catch"](function(a){if(m&&!m(a)||w++>=e){if(f)throw f(a,w);throw a;}h&&h(a,w);a=k(c,w);return g(a).mergeMap(function(){t&&t();return q.apply(void 0,n)})})}}}},function(f,h){var a=/^(?:[a-z]+:)?\/\//i,l=/\/[\.]{1,2}\//;
f.exports={resolveURL:function(){var k=arguments.length;if(0===k)return"";for(var g="",d=0;d<k;d++){var b=arguments[d];"string"===typeof b&&""!==b&&(a.test(b)?g=b:("/"===b[0]&&(b=b.substr(1)),"/"===g[g.length-1]&&(g=g.substr(0,g.length-1)),g=g+"/"+b))}if(l.test(g)){k=[];g=g.split("/");d=0;for(b=g.length;d<b;d++)".."==g[d]?k.pop():"."!=g[d]&&k.push(g[d]);k=k.join("/")}else k=g;return k},parseBaseURL:function(a){var g=a.lastIndexOf("/");return 0<=g?a.substring(0,g+1):a}}},function(f,h,a){var l=function(a,
b){function e(){this.constructor=a}for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);a.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)};f=a(7);var k=a(1),g=a(2),d=a(4);a=function(a){function e(b,c){a.call(this);this.source=b;this.subjectFactory=c;this._refCount=0}l(e,a);e.prototype._subscribe=function(a){return this.getSubject().subscribe(a)};e.prototype.getSubject=function(){var a=this._subject;if(!a||a.isStopped)this._subject=this.subjectFactory();return this._subject};e.prototype.connect=
function(){var a=this._connection;a||(a=this._connection=new d.Subscription,a.add(this.source.subscribe(new b(this.getSubject(),this))),a.isUnsubscribed?(this._connection=null,a=d.Subscription.EMPTY):this._connection=a);return a};e.prototype.refCount=function(){return this.lift(new c(this))};return e}(k.Observable);h.ConnectableObservable=a;var b=function(a){function b(e,c){a.call(this,e);this.connectable=c}l(b,a);b.prototype._error=function(b){this._unsubscribe();a.prototype._error.call(this,b)};
b.prototype._complete=function(){this._unsubscribe();a.prototype._complete.call(this)};b.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var b=a._connection;a._refCount=0;a._subject=null;a._connection=null;b&&b.unsubscribe()}};return b}(f.SubjectSubscriber),c=function(){function a(b){this.connectable=b}a.prototype.call=function(a,b){var c=this.connectable;c._refCount++;var d=new e(a,c),g=b._subscribe(d);d.isUnsubscribed||(d.connection=c.connect());return g};return a}(),
e=function(a){function b(e,c){a.call(this,e);this.connectable=c}l(b,a);b.prototype._unsubscribe=function(){var a=this.connectable;if(a){this.connectable=null;var b=a._refCount;0>=b?this.connection=null:(a._refCount=b-1,1<b?this.connection=null:(b=this.connection,a=a._connection,this.connection=null,!a||b&&a!==b||a.unsubscribe()))}else this.connection=null};return b}(g.Subscriber)},function(f,h,a){var l=function(a,c){function e(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=
null===c?Object.create(c):(e.prototype=c.prototype,new e)};f=a(1);var k=a(25),g=a(20),d=a(4);a=function(a){function c(e,c,d){a.call(this);this.sourceObj=e;this.eventName=c;this.selector=d}l(c,a);c.create=function(a,b,d){return new c(a,b,d)};c.setupSubscription=function(a,b,g,k){var f;if(a&&"[object NodeList]"===a.toString()||a&&"[object HTMLCollection]"===a.toString())for(var h=0,l=a.length;h<l;h++)c.setupSubscription(a[h],b,g,k);else a&&"function"===typeof a.addEventListener&&"function"===typeof a.removeEventListener?
(a.addEventListener(b,g),f=function(){return a.removeEventListener(b,g)}):a&&"function"===typeof a.on&&"function"===typeof a.off?(a.on(b,g),f=function(){return a.off(b,g)}):a&&"function"===typeof a.addListener&&"function"===typeof a.removeListener&&(a.addListener(b,g),f=function(){return a.removeListener(b,g)});k.add(new d.Subscription(f))};c.prototype._subscribe=function(a){var b=this.selector;c.setupSubscription(this.sourceObj,this.eventName,b?function(){for(var c=[],d=0;d<arguments.length;d++)c[d-
0]=arguments[d];c=k.tryCatch(b).apply(void 0,c);c===g.errorObject?a.error(g.errorObject.e):a.next(c)}:function(b){return a.next(b)},a)};return c}(f.Observable);h.FromEventObservable=a},function(f,h,a){function l(a){var c=a.value;a=a.subscriber;a.isUnsubscribed||(a.next(c),a.complete())}function k(a){var c=a.err;a=a.subscriber;a.isUnsubscribed||a.error(c)}var g=function(a,c){function e(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(e.prototype=
c.prototype,new e)},d=a(8);f=function(a){function c(e,c){void 0===c&&(c=null);a.call(this);this.promise=e;this.scheduler=c}g(c,a);c.create=function(a,b){void 0===b&&(b=null);return new c(a,b)};c.prototype._subscribe=function(a){var b=this,c=this.promise,g=this.scheduler;if(null==g)this._isScalar?a.isUnsubscribed||(a.next(this.value),a.complete()):c.then(function(c){b.value=c;b._isScalar=!0;a.isUnsubscribed||(a.next(c),a.complete())},function(b){a.isUnsubscribed||a.error(b)}).then(null,function(a){d.root.setTimeout(function(){throw a;
})});else if(this._isScalar){if(!a.isUnsubscribed)return g.schedule(l,0,{value:this.value,subscriber:a})}else c.then(function(c){b.value=c;b._isScalar=!0;a.isUnsubscribed||a.add(g.schedule(l,0,{value:c,subscriber:a}))},function(b){a.isUnsubscribed||a.add(g.schedule(k,0,{err:b,subscriber:a}))}).then(null,function(a){d.root.setTimeout(function(){throw a;})})};return c}(a(1).Observable);h.PromiseObservable=f},function(f,h,a){var l=function(a,b){function d(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&
(a[g]=b[g]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)},k=a(47);f=a(1);var g=a(23),d=a(12),b=a(46);a=function(a){function e(e,f,h){void 0===e&&(e=0);a.call(this);this.period=-1;this.dueTime=0;k.isNumeric(f)?this.period=1>Number(f)&&1||Number(f):d.isScheduler(f)&&(h=f);d.isScheduler(h)||(h=g.async);this.scheduler=h;this.dueTime=b.isDate(e)?+e-this.scheduler.now():e}l(e,a);e.create=function(a,b,c){void 0===a&&(a=0);return new e(a,b,c)};e.dispatch=function(a){var b=a.index,
e=a.period,c=a.subscriber;c.next(b);if(!c.isUnsubscribed){if(-1===e)return c.complete();a.index=b+1;this.schedule(a,e)}};e.prototype._subscribe=function(a){return this.scheduler.schedule(e.dispatch,this.dueTime,{index:0,period:this.period,subscriber:a})};return e}(f.Observable);h.TimerObservable=a},function(f,h,a){function l(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];c=null;k.isScheduler(a[a.length-1])&&(c=a.pop());return(new g.ArrayObservable(a,c)).lift(new d.MergeAllOperator(1))}
var k=a(12),g=a(10),d=a(29);h.concat=function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];return l.apply(void 0,[this].concat(a))};h.concatStatic=l},function(f,h,a){var l=function(a,c){function e(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)},k=a(17);f=a(15);h.mergeMap=function(a,c,e){void 0===e&&(e=Number.POSITIVE_INFINITY);"number"===typeof c&&(e=c,c=null);return this.lift(new g(a,c,e))};
var g=function(){function a(b,e,d){void 0===d&&(d=Number.POSITIVE_INFINITY);this.project=b;this.resultSelector=e;this.concurrent=d}a.prototype.call=function(a,b){return b._subscribe(new d(a,this.project,this.resultSelector,this.concurrent))};return a}();h.MergeMapOperator=g;var d=function(a){function c(e,c,d,g){void 0===g&&(g=Number.POSITIVE_INFINITY);a.call(this,e);this.project=c;this.resultSelector=d;this.concurrent=g;this.hasCompleted=!1;this.buffer=[];this.index=this.active=0}l(c,a);c.prototype._next=
function(a){this.active<this.concurrent?this._tryNext(a):this.buffer.push(a)};c.prototype._tryNext=function(a){var b,c=this.index++;try{b=this.project(a,c)}catch(d){this.destination.error(d);return}this.active++;this._innerSub(b,a,c)};c.prototype._innerSub=function(a,b,c){this.add(k.subscribeToResult(this,a,b,c))};c.prototype._complete=function(){this.hasCompleted=!0;0===this.active&&0===this.buffer.length&&this.destination.complete()};c.prototype.notifyNext=function(a,b,c,d,g){this.resultSelector?
this._notifyResultSelector(a,b,c,d):this.destination.next(b)};c.prototype._notifyResultSelector=function(a,b,c,d){var g;try{g=this.resultSelector(a,b,c,d)}catch(k){this.destination.error(k);return}this.destination.next(g)};c.prototype.notifyComplete=function(a){var b=this.buffer;this.remove(a);this.active--;0<b.length?this._next(b.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()};return c}(f.OuterSubscriber);h.MergeMapSubscriber=d},function(f,h,a){var l=a(122),k=a(22);f=function(){function a(){this.active=
!1;this.actions=[];this.scheduledId=null}a.prototype.now=function(){return Date.now()};a.prototype.flush=function(){if(!this.active&&!this.scheduledId){this.active=!0;for(var a=this.actions,b=null;b=a.shift();)if(b.execute(),b.error)throw this.active=!1,b.error;this.active=!1}};a.prototype.schedule=function(a,b,c){void 0===b&&(b=0);return 0>=b?this.scheduleNow(a,c):this.scheduleLater(a,b,c)};a.prototype.scheduleNow=function(a,b){return(new l.QueueAction(this,a)).schedule(b)};a.prototype.scheduleLater=
function(a,b,c){return(new k.FutureAction(this,a)).schedule(c,b)};return a}();h.QueueScheduler=f},function(f,h){var a=function(a,g){function d(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&(a[b]=g[b]);a.prototype=null===g?Object.create(g):(d.prototype=g.prototype,new d)},l=function(k){function g(){var a=k.call(this,"object unsubscribed");this.name=a.name="ObjectUnsubscribedError";this.stack=a.stack;this.message=a.message}a(g,k);return g}(Error);h.ObjectUnsubscribedError=l},function(f,h){h.isDate=
function(a){return a instanceof Date&&!isNaN(+a)}},function(f,h,a){var l=a(16);h.isNumeric=function(a){return!l.isArray(a)&&0<=a-parseFloat(a)+1}},function(f,h){var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};h.isObject=function(f){return null!=f&&"object"===("undefined"===typeof f?"undefined":a(f))}},function(f,h){h.isPromise=function(a){return a&&"function"!==
typeof a.subscribe&&"function"===typeof a.then}},function(f,h){h.noop=function(){}},function(f,h,a){function l(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});
b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function d(a){if("number"==typeof a)return a;for(var b=0,c=void 0,e=0;e<a.length;e++)c=a[e],b=(b<<5)-b+c,b&=b;return b}function b(a,b,c){return{type:"eme",value:Object.assign({name:a,session:b},c)}}function c(a){if(!R||!U||x())return null;var b=W;return(a=a.filter(function(a){return a.type!==R.type||a.persistentLicense&&"required"!=b.persistentState||
a.distinctiveIdentifierRequired&&"required"!=b.distinctiveIdentifier?!1:!0})[0])?{keySystem:a,keySystemAccess:new K(R,U,W)}:null}function e(a){var b=["temporary"],c="optional",e="optional";a.persistentLicense&&(c="required",b.push("persistent-license"));a.persistentStateRequired&&(c="required");a.distinctiveIdentifierRequired&&(e="required");return{videoCapabilities:void 0,audioCapabilities:void 0,initDataTypes:["cenc"],distinctiveIdentifier:e,persistentState:c,sessionTypes:b}}function m(a){var b=
c(a);if(b)return q.debug("eme: found compatible keySystem quickly",b),B.of(b);var d=a.reduce(function(a,b){return a.concat(aa[b.type].map(function(a){return{keyType:a,keySystem:b}}))},[]);return B.create(function(a){function b(k){if(!c)if(k>=d.length)a.error(new I("INCOMPATIBLE_KEYSYSTEMS",null,!0));else{var m=d[k],f=m.keyType,h=m.keySystem,n=[e(h)];q.debug("eme: request keysystem access "+f+","+(k+1+" of "+d.length),n);g=L(f,n).subscribe(function(b){q.info("eme: found compatible keysystem",f,n);
a.next({keySystem:h,keySystemAccess:b});a.complete()},function(){q.debug("eme: rejected access to keysystem",f,n);g=null;b(k+1)})}}var c=!1,g=null;b(0);return function(){c=!0;g&&g.unsubscribe()}})}function n(a,b,c){var e=X,d=U;return D(c.createMediaKeys()).mergeMap(function(g){U=g;W=c.getConfiguration();R=b;X=a;if(a.mediaKeys===g)return B.of(g);d&&d!==U&&Q.dispose();var k=void 0;e&&e!==X?(q.debug("eme: unlink old video element and set mediakeys"),k=H(e,null).concat(H(X,g))):(q.debug("eme: set mediakeys"),
k=H(X,g));return k.mapTo(g)})}function r(a,b,c,e,d){q.debug("eme: create a new "+b+" session");var g=a.createSession(b);a=p(g,c,d)["finally"](function(){Q.deleteAndClose(g);T["delete"](e)}).publish();return{session:g,sessionEvents:a}}function u(a,c,e,d,g,k){a=r(a,e,c,g,k);var m=a.session;a=a.sessionEvents;Q.add(g,m,a);q.debug("eme: generate request",d,g);d=D(m.generateRequest(d,g))["catch"](function(a){throw new I("KEY_GENERATE_REQUEST_ERROR",a,!1);})["do"](function(){"persistent-license"==e&&T.add(g,
m)}).mapTo(b("generated-request",m,{initData:g,initDataType:d}));return E(a,d)}function w(a,b,c,e,d,g){return u(a,b,c,e,d,g)["catch"](function(k){if(k.code!==J.KEY_GENERATE_REQUEST_ERROR)throw k;var m=Q.getFirst();if(!m)throw k;q.warn("eme: could not create a new session, retry after closing a currently loaded session",k);return Q.deleteAndClose(m).mergeMap(function(){return u(a,b,c,e,d,g)})})}function t(a,c,e,d,g,k){q.debug("eme: load persisted session",e);var m=r(a,"persistent-license",c,g,k),f=
m.session,h=m.sessionEvents;return D(f.load(e))["catch"](function(){return B.of(!1)}).mergeMap(function(m){if(m)return Q.add(g,f,h),T.add(g,f),h.startWith(b("loaded-session",f,{storedSessionId:e}));q.warn("eme: no data stored for the loaded session, do fallback",e);Q.deleteById(e);T["delete"](g);f.sessionId&&f.remove();return w(a,c,"persistent-license",d,g,k).startWith(b("loaded-session-failed",f,{storedSessionId:e}))})}function p(a,c,e){function d(a,b){return a.type===M.ENCRYPTED_MEDIA_ERROR?(a.fatal=
b,a):new I("KEY_LOAD_ERROR",a,b)}q.debug("eme: handle message events",a);var g=void 0,k={totalRetry:2,retryDelay:200,errorSelector:function(a){return d(a,!0)},onRetry:function(a){return e.next(d(a,!1))}},m=S(a).map(function(a){throw new I("KEY_ERROR",a,!0);}),f=ea(a).mergeMap(function(b){g=b.sessionId;q.debug("eme: keystatuseschange event",g,a,b);a.keyStatuses.forEach(function(a,b){if(ba[b]||ba[a])throw new I("KEY_STATUS_CHANGE_ERROR",b,!0);});return c.onKeyStatusesChange?A(function(){return D(c.onKeyStatusesChange(b,
a))})["catch"](function(a){throw new I("KEY_STATUS_CHANGE_ERROR",a,!0);}):(q.info("eme: keystatuseschange event not handled"),v())}),h=N(a).mergeMap(function(b){g=b.sessionId;var e=new Uint8Array(b.message),d=b.messageType||"license-request";q.debug("eme: event message type "+d,a,b);b=F(function(){return D(c.getLicense(e,d)).timeout(1E4,new I("KEY_LOAD_TIMEOUT",null,!1))});return z(b,k)}),f=E(h,f).concatMap(function(c){q.debug("eme: update session",g,c);return D(a.update(c,g))["catch"](function(a){throw new I("KEY_UPDATE_ERROR",
a,!0);}).mapTo(b("session-update",a,{updatedWith:c}))}),m=E(f,m);return a.closed?m.takeUntil(D(a.closed)):m}var q=a(9),y=a(3);h=a(14);var A=h.tryCatch,D=h.castToObservable,z=a(36).retryWithBackoff,B=a(1).Observable,v=a(5).EmptyObservable.create,F=a(87).DeferObservable.create,C=a(19).combineLatest,E=a(11).merge,G=a(13),K=G.KeySystemAccess,L=G.requestMediaKeySystemAccess,H=G.setMediaKeys;h=G.emeEvents;var x=G.shouldRenewMediaKeys;a=a(6);var M=a.ErrorTypes,J=a.ErrorCodes,I=a.EncryptedMediaError,O=h.onEncrypted,
N=h.onKeyMessage,S=h.onKeyError,ea=h.onKeyStatusesChange,aa={clearkey:["webkit-org.w3.clearkey","org.w3.clearkey"],widevine:["com.widevine.alpha"],playready:["com.youtube.playready","com.microsoft.playready"]},ba={expired:!0,"internal-error":!0};a=function(){function a(){g(this,a);this._entries=[]}a.prototype.find=function(a){for(var b=0;b<this._entries.length;b++)if(!0===a(this._entries[b]))return this._entries[b];return null};return a}();h=function(a){function b(){g(this,b);return l(this,a.apply(this,
arguments))}k(b,a);b.prototype.getFirst=function(){if(0<this._entries.length)return this._entries[0].session};b.prototype.find=function(a){for(var b=0;b<this._entries.length;b++)if(!0===a(this._entries[b]))return this._entries[b];return null};b.prototype.get=function(a){a=d(a);var b=this.find(function(b){return b.initData===a});return b?b.session:null};b.prototype.add=function(a,b,c){a=d(a);var e=this.get(a);e&&this.deleteAndClose(e);c=c.connect();a={session:b,initData:a,eventSubscription:c};q.debug("eme-mem-store: add session",
a);this._entries.push(a)};b.prototype.deleteById=function(a){var b=this.find(function(b){return b.session.sessionId===a});return b?this["delete"](b.session):null};b.prototype["delete"]=function(a){var b=this.find(function(b){return b.session===a});if(!b)return null;var c=b.session,e=b.eventSubscription;q.debug("eme-mem-store: delete session",b);b=this._entries.indexOf(b);this._entries.splice(b,1);e.unsubscribe();return c};b.prototype.deleteAndClose=function(a){return(a=this["delete"](a))?(q.debug("eme-mem-store: close session",
a),D(a.close())["catch"](function(){return B.of(null)})):B.of(null)};b.prototype.dispose=function(){var a=this,b=this._entries.map(function(b){return a.deleteAndClose(b.session)});this._entries=[];return E.apply(null,b)};return b}(a);var T=new (function(a){function b(c){g(this,b);var e=l(this,a.call(this));e.setStorage(c);return e}k(b,a);b.prototype.setStorage=function(a){if(this._storage!==a){y(a,"no licenseStorage given for keySystem with persistentLicense");y.iface(a,"licenseStorage",{save:"function",
load:"function"});this._storage=a;try{this._entries=this._storage.load(),y(Array.isArray(this._entries))}catch(b){q.warn("eme-persitent-store: could not get entries from license storage",b),this.dispose()}}};b.prototype.get=function(a){a=d(a);return this.find(function(b){return b.initData===a})||null};b.prototype.add=function(a,b){var c=b&&b.sessionId;if(c){a=d(a);var e=this.get(a);e&&e.sessionId===c||(e&&this["delete"](a),q.info("eme-persitent-store: add new session",c,b),this._entries.push({sessionId:c,
initData:a}),this._save())}};b.prototype["delete"]=function(a){a=d(a);var b=this.find(function(b){return b.initData===a});b&&(q.warn("eme-persitent-store: delete session from store",b),b=this._entries.indexOf(b),this._entries.splice(b,1),this._save())};b.prototype.dispose=function(){this._entries=[];this._save()};b.prototype._save=function(){try{this._storage.save(this._entries)}catch(a){q.warn("eme-persitent-store: could not save licenses in localStorage")}};return b}(a))({load:function(){return[]},
save:function(){}}),Q=new h,U=void 0,W=void 0,R=void 0,X=void 0;f.exports={createEME:function(a,c,e){function d(c,g){var k=g.keySystem,m=g.keySystemAccess;k.persistentLicense&&T.setStorage(k.licenseStorage);q.info("eme: encrypted event",c);return n(a,k,m).mergeMap(function(a){a:{var d=m.getConfiguration(),g=c.initDataType,f=new Uint8Array(c.initData),h=Q.get(f);if(h&&h.sessionId)q.debug("eme: reuse loaded session",h.sessionId),a=B.of(b("reuse-session",h));else{d=(h=(d=d.sessionTypes)&&0<=d.indexOf("persistent-license"))&&
k.persistentLicense?"persistent-license":"temporary";if(h&&k.persistentLicense&&(h=T.get(f))){a=t(a,k,h.sessionId,g,f,e);break a}a=w(a,k,d,g,f,e)}}return a})}return C(O(a),m(c)).take(1).mergeMap(function(a){return d(a[0],a[1])})},getCurrentKeySystem:function(){return R&&R.type},onEncrypted:O,dispose:function(){R=U=null;Q.dispose()}}},function(f,h,a){function l(a){a=a.indexType;switch(a){case "template":return d;case "timeline":return b;case "list":return c;case "base":return e;default:throw new m("UNKNOWN_INDEX",
a,!0);}}a(3);var k=a(34).getAdaptationsByType,g=a(26).InitSegment,d=a(141),b=a(53),c=a(140),e=a(139),m=a(6).IndexError;h=function(){function a(b,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.adaptation=b;this.representation=c;this.index=c.index;this.handler=new (l(this.index))(b,c,this.index)}a.prototype.getInitSegment=function(){var a=this.index.initialization||{};return new g(this.adaptation,this.representation,a.media,a.range,this.index.indexRange)};a.prototype.normalizeRange=
function(a,b,c){var e=this.index.presentationTimeOffset||0,d=this.index.timescale||1;b||(b=0);c||(c=0);b=Math.min(b,c);return{time:a*d-e,up:(a+b)*d-e,to:(a+c)*d-e}};a.prototype.getSegments=function(a,b,c){a=this.normalizeRange(a,b,c);b=a.up;c=a.to;if(!this.handler.checkRange(a.time))throw new m("OUT_OF_INDEX_ERROR",this.index.indexType,!1);return this.handler.getSegments(b,c)};a.prototype.insertNewSegments=function(a,b){for(var c=[],e=0;e<a.length;e++)this.handler.addSegment(a[e],b)&&c.push(a[e]);
return c};a.prototype.setTimescale=function(a){var b=this.index;return b.timescale!==a?(b.timescale=a,!0):!1};a.prototype.scale=function(a){return a/this.index.timescale};return a}();f.exports={IndexHandler:h,getLiveEdge:function(a){var b=k(a,"video")[0].representations[0].index;return l(b).getLiveEdge(b,a)}}},function(f,h,a){function l(a){var d=a.ts,b=a.d;a=a.r;return-1===b?d:d+(a+1)*b}var k=a(26).Segment;h=function(){function a(d,b,c){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.adaptation=d;this.representation=b;this.index=c;this.timeline=c.timeline}a.getLiveEdge=function(a,b){var c=l(a.timeline[a.timeline.length-1])/a.timescale-b.suggestedPresentationDelay;return Math.max(a.timeline[0].ts/a.timescale+1,c)};a.prototype.createSegment=function(a,b,c){return k.create(this.adaptation,this.representation,a,this.index.media,a,c,0,b,null,!1)};a.prototype.calculateRepeat=function(a,b){var c=a.r||0;0>c&&(c=Math.ceil(((b?b.t:Infinity)-a.ts)/a.d)-1);return c};a.prototype.checkRange=
function(a){var b=this.timeline[this.timeline.length-1];if(!b)return!0;0>b.d&&(b={ts:b.ts,d:0,r:b.r});return a<=l(b)};a.prototype.getSegmentIndex=function(a){for(var b=this.timeline,c=0,e=b.length;c<e;){var g=c+e>>>1;b[g].ts<a?c=g+1:e=g}return 0<c?c-1:c};a.prototype.getSegmentNumber=function(a,b,c){a=b-a;return 0<a?Math.floor(a/c):0};a.prototype.getSegments=function(a,b){var c=this.index.timeline,e=[],g=c.length,k=this.getSegmentIndex(a)-1,f=c.length&&c[0].d||0;a:for(;!(++k>=g);){var h=c[k],l=h.d,
t=h.ts,p=h.range,f=Math.max(f,l);if(0>l){t+f<b&&e.push(this.createSegment(t,p,void 0));break}for(var h=this.calculateRepeat(h,c[k+1]),q=this.getSegmentNumber(t,a,l),y=void 0;(y=t+q*l)<b;)if(q++<=h)e.push(this.createSegment(y,p,l));else continue a;break}return e};a.prototype.addSegment=function(a,b){var c=this.timeline,e=c.length,g=c[e-1];if(b&&a.ts===b.ts){var k=a.ts+a.d,f=k-(g.ts+g.d*g.r);if(0>=f)return!1;-1===g.d&&((e=c[e-2])&&e.d===f?(e.r++,c.pop()):g.d=f);c.push({d:-1,ts:k,r:0});return!0}return a.ts>=
l(g)?(g.d===a.d?g.r++:c.push({d:a.d,ts:a.ts,r:0}),!0):!1};return a}();f.exports=h},function(f,h,a){function l(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}h=a(35);var k=a(21).BufferedRanges,g=a(3);a=a(14);var d=a.tryCatch,b=a.castToObservable;
a=function(a){function e(b){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");var d;d=a.call(this);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=!d||"object"!==typeof d&&"function"!==typeof d?this:d;d.codec=b;d.updating=!1;d.readyState="opened";d.buffered=new k;return d}l(e,a);e.prototype.appendBuffer=function(a){var b=this;this._lock(function(){return b._append(a)})};e.prototype.remove=function(a,b){var c=this;this._lock(function(){return c._remove(a,
b)})};e.prototype.abort=function(){this.remove(0,Infinity);this.updating=!1;this.readyState="closed";this._abort()};e.prototype._append=function(){};e.prototype._remove=function(){};e.prototype._abort=function(){};e.prototype._lock=function(a){var c=this;g(!this.updating,"updating");this.updating=!0;this.trigger("updatestart");d(function(){return b(a())}).subscribe(function(){return setTimeout(function(){return c._unlock("update")},0)},function(a){return setTimeout(function(){return c._unlock("error",
a)},0)})};e.prototype._unlock=function(a,b){this.updating=!1;this.trigger(a,b);this.trigger("updateend")};return e}(h);f.exports={AbstractSourceBuffer:a}},function(f,h,a){function l(a,b){var g=a.currentTime,k=a.paused,f=new d(a.buffered);return new c(g,f,a.duration,f.getGap(g),b,a.playbackRate,f.getRange(g),a.readyState,null,k)}var k=a(1).Observable,g=a(27).BehaviorSubject,d=a(21).BufferedRanges,b="canplay play progress seeking seeked loadedmetadata".split(" "),c=function(){function a(b,c,d,g,k,f,
h,l,y,A){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.ts=b;this.buffered=c;this.duration=d;this.gap=g;this.name=k;this.playback=f;this.range=h;this.readyState=l;this.stalled=y;this.paused=A}a.prototype.clone=function(){return new a(this.ts,this.buffered,this.duration,this.gap,this.name,this.playback,this.range,this.readyState,this.stalled,this.paused)};return a}();f.exports={getEmptyTimings:function(){return new c(0,new d,0,Infinity,"timeupdate",1,null,0,null,
null)},getTimings:l,createTimingsSampler:function(a,c){var d=c.requiresMediaSource;return k.create(function(c){function g(b){b=l(a,b&&b.type||"timeupdate");var f=b.name,m=b.ts,h=b.gap,t=b.paused,u=b.readyState,B=b.playback,v=k.stalled,F=k.name,C=k.ts,E;E=(E=b.range)?.5>=b.duration-(h+E.end):!1;var G=1<=u&&"loadedmetadata"!=f&&!v&&!E,K=u=void 0;d?(u=G&&(.5>=h||Infinity===h),K=v&&Infinity>h&&(h>("seeking"==v.name?.5:5)||E)):(u=G&&(!t&&"timeupdate"==f&&"timeupdate"==F&&m===C||"seeking"==f&&Infinity===
h),K=v&&("seeking"!=f&&m!==C||"canplay"==f||Infinity>h&&(h>("seeking"==v.name?.5:5)||E)));m=void 0;m=u?{name:f,playback:B}:K?null:v;b.stalled=m;k=b;c.next(k)}var k=l(a,"init"),f=setInterval(g,d?1E3:500);b.forEach(function(b){return a.addEventListener(b,g)});c.next(k);return function(){clearInterval(f);b.forEach(function(b){return a.removeEventListener(b,g)})}}).multicast(function(){return new g({name:"init",stalled:null})}).refCount()},seekingsSampler:function(a){return a.filter(function(a){return"seeking"==
a.name&&(Infinity===a.gap||-2>a.gap)}).skip(1).startWith(!0)},getLiveGap:function(a,b){if(!b.isLive)return Infinity;var c=b.availabilityStartTime,d=b.presentationLiveGap;return Date.now()/1E3-a-(c+d+10)},toWallClockTime:function(a,b){return new Date(1E3*(a+b.availabilityStartTime))},fromWallClockTime:function(a,b){var c=a,d=b.suggestedPresentationDelay,g=b.presentationLiveGap,k=b.timeShiftBufferDepth;"number"!=typeof c&&(c=c.getTime());var f=Date.now();return Math.max(Math.min(c,f-1E3*(g+d)),f-1E3*
k)/1E3-b.availabilityStartTime}}},function(f,h,a){function l(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");}function d(){return new XMLHttpRequest}function b(a){return new r(a)}h=a(1).Observable;var c=a(2).Subscriber;a=a(6);var e=a.RequestError,m=a.RequestErrorTypes,n=function t(a,b,c,e,d,k,f){g(this,t);this.status=a;this.url=b;this.responseType=c;this.sentTime=e;this.receivedTime=d;this.duration=this.receivedTime-this.sentTime;this.size=k;this.responseData=f},r=function(a){function b(c){g(this,
b);var e=l(this,a.call(this)),k={url:"",createXHR:d,headers:null,method:"GET",responseType:"json",timeout:15E3,resultSelector:null,body:null},f;for(f in c)k[f]=c[f];e.request=k;return e}k(b,a);b.prototype._subscribe=function(a){return new u(a,this.request)};return b}(h),u=function(a){function b(c,e){g(this,b);var d=l(this,a.call(this,c));d.request=e;d.sentTime=Date.now();d.receivedTime=0;d.xhr=null;d.done=!1;d.resultSelector=e.resultSelector;d.send();return d}k(b,a);b.prototype.next=function(){this.done=
!0;var a=this.resultSelector,b=this.xhr,c=this.request,d=this.destination,g=b.status,k=this.responseType,f=this.totalSize,h=this.sentTime,l=this.receivedTime,t=b.responseURL||c.url,p=void 0;if("json"==c.responseType)if("string"!=typeof b.response)p=b.response;else try{p=JSON.parse(b.responseText)}catch(u){p=null}else p=b.response;null==p?d.error(new e(this,c,m.PARSE_ERROR)):(b=new n(g,t,k,h,l,f,p),a?d.next(a(b)):d.next(b))};b.prototype.setHeaders=function(a,b){for(var c in b)a.setRequestHeader(c,
b[c])};b.prototype.setupEvents=function(a,b){a.ontimeout=function D(){D.subscriber.error(new e(this,D.request,m.TIMEOUT))};a.ontimeout.request=b;a.ontimeout.subscriber=this;a.onerror=function z(){z.subscriber.error(new e(this,z.request,m.ERROR_EVENT))};a.onerror.request=b;a.onerror.subscriber=this;a.onload=function B(a){if(4===this.readyState){var b=B.subscriber,c=B.request;b.receivedTime=Date.now();b.totalSize=a.total;var d=this.status;200<=d&&300>d?(b.next(a),b.complete()):b.error(new e(this,c,
m.ERROR_HTTP_CODE))}};a.onload.subscriber=this;a.onload.request=b};b.prototype.send=function(){var a=this.request,b=this.request,c=b.method,e=b.url,g=b.headers,k=b.body,f=b.responseType,b=b.timeout,h=(a.createXHR||d)(a);this.xhr=h;h.open(c,e,!0);h.timeout=b;h.responseType=f;"document"==f&&h.overrideMimeType("text/xml");g&&this.setHeaders(h,g);this.setupEvents(h,a);k?h.send(k):h.send()};b.prototype.unsubscribe=function(){var b=this.xhr;!this.done&&b&&4!==b.readyState&&b.abort();b.ontimeout=null;b.onerror=
null;b.onload=null;a.prototype.unsubscribe.call(this)};return b}(c);b.RequestObservable=r;b.RequestError=e;b.RequestResponse=n;b.RequestErrorTypes=m;f.exports=b},function(f,h,a){var l=function(a,g){function d(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&(a[b]=g[b]);a.prototype=null===g?Object.create(g):(d.prototype=g.prototype,new d)};f=function(a){function g(d,b,c){a.call(this);this.parent=d;this.outerValue=b;this.outerIndex=c;this.index=0}l(g,a);g.prototype._next=function(a){this.parent.notifyNext(this.outerValue,
a,this.outerIndex,this.index++,this)};g.prototype._error=function(a){this.parent.notifyError(a,this);this.unsubscribe()};g.prototype._complete=function(){this.parent.notifyComplete(this);this.unsubscribe()};return g}(a(2).Subscriber);h.InnerSubscriber=f},function(f,h,a){var l=a(1);f=function(){function a(g,d,b){this.kind=g;this.value=d;this.exception=b;this.hasValue="N"===g}a.prototype.observe=function(a){switch(this.kind){case "N":return a.next&&a.next(this.value);case "E":return a.error&&a.error(this.exception);
case "C":return a.complete&&a.complete()}};a.prototype["do"]=function(a,d,b){switch(this.kind){case "N":return a&&a(this.value);case "E":return d&&d(this.exception);case "C":return b&&b()}};a.prototype.accept=function(a,d,b){return a&&"function"===typeof a.next?this.observe(a):this["do"](a,d,b)};a.prototype.toObservable=function(){switch(this.kind){case "N":return l.Observable.of(this.value);case "E":return l.Observable["throw"](this.exception);case "C":return l.Observable.empty()}};a.createNext=
function(g){return"undefined"!==typeof g?new a("N",g):this.undefinedValueNotification};a.createError=function(g){return new a("E",void 0,g)};a.createComplete=function(){return this.completeNotification};a.completeNotification=new a("C");a.undefinedValueNotification=new a("N",void 0);return a}();h.Notification=f},function(f,h){h.empty={isUnsubscribed:!0,next:function(a){},error:function(a){throw a;},complete:function(){}}},function(f,h,a){var l=function(a,g){function d(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&
(a[b]=g[b]);a.prototype=null===g?Object.create(g):(d.prototype=g.prototype,new d)};f=function(a){function g(d,b){a.call(this);this.subject=d;this.subscriber=b;this.isUnsubscribed=!1}l(g,a);g.prototype.unsubscribe=function(){if(!this.isUnsubscribed){this.isUnsubscribed=!0;var a=this.subject,b=a.observers;this.subject=null;!b||0===b.length||a.isStopped||a.isUnsubscribed||(a=b.indexOf(this.subscriber),-1!==a&&b.splice(a,1))}};return g}(a(4).Subscription);h.SubjectSubscription=f},function(f,h,a){f=a(1);
a=a(94);f.Observable.of=a.of},function(f,h,a){f=a(1);a=a(95);f.Observable["throw"]=a._throw},function(f,h,a){f=a(1);a=a(96);f.Observable.prototype["catch"]=a._catch},function(f,h,a){f=a(1);a=a(42);f.Observable.prototype.concat=a.concat},function(f,h,a){f=a(1);a=a(98);f.Observable.prototype.concatAll=a.concatAll},function(f,h,a){f=a(1);a=a(99);f.Observable.prototype.concatMap=a.concatMap},function(f,h,a){f=a(1);a=a(100);f.Observable.prototype.debounceTime=a.debounceTime},function(f,h,a){f=a(1);a=a(101);
f.Observable.prototype.distinctUntilChanged=a.distinctUntilChanged},function(f,h,a){f=a(1);a=a(102);f.Observable.prototype["do"]=a._do},function(f,h,a){f=a(1);a=a(103);f.Observable.prototype.filter=a.filter},function(f,h,a){f=a(1);a=a(104);f.Observable.prototype["finally"]=a._finally},function(f,h,a){f=a(1);a=a(105);f.Observable.prototype.ignoreElements=a.ignoreElements},function(f,h,a){f=a(1);a=a(106);f.Observable.prototype.map=a.map},function(f,h,a){f=a(1);a=a(107);f.Observable.prototype.mapTo=
a.mapTo},function(f,h,a){f=a(1);a=a(43);f.Observable.prototype.mergeMap=a.mergeMap;f.Observable.prototype.flatMap=a.mergeMap},function(f,h,a){f=a(1);a=a(30);f.Observable.prototype.multicast=a.multicast},function(f,h,a){f=a(1);a=a(110);f.Observable.prototype.publish=a.publish},function(f,h,a){f=a(1);a=a(111);f.Observable.prototype.scan=a.scan},function(f,h,a){f=a(1);a=a(112);f.Observable.prototype.share=a.share},function(f,h,a){f=a(1);a=a(113);f.Observable.prototype.skip=a.skip},function(f,h,a){f=
a(1);a=a(114);f.Observable.prototype.startWith=a.startWith},function(f,h,a){f=a(1);a=a(115);f.Observable.prototype.switchMap=a.switchMap},function(f,h,a){f=a(1);a=a(116);f.Observable.prototype.take=a.take},function(f,h,a){f=a(1);a=a(117);f.Observable.prototype.takeUntil=a.takeUntil},function(f,h,a){f=a(1);a=a(118);f.Observable.prototype.timeout=a.timeout},function(f,h,a){var l=function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):
(c.prototype=b.prototype,new c)};f=a(1);var k=a(28),g=a(5);a=function(a){function b(b,e,g,k){a.call(this);this.arrayLike=b;this.scheduler=k;e||k||1!==b.length||(this._isScalar=!0,this.value=b[0]);e&&(this.mapFn=e.bind(g))}l(b,a);b.create=function(a,e,d,f){var h=a.length;return 0===h?new g.EmptyObservable:1!==h||e?new b(a,e,d,f):new k.ScalarObservable(a[0],f)};b.dispatch=function(a){var b=a.arrayLike,d=a.index,g=a.length,k=a.mapFn,f=a.subscriber;f.isUnsubscribed||(d>=g?f.complete():(b=k?k(b[d],d):
b[d],f.next(b),a.index=d+1,this.schedule(a)))};b.prototype._subscribe=function(a){var e=this.arrayLike,d=this.mapFn,g=this.scheduler,k=e.length;if(g)return g.schedule(b.dispatch,0,{arrayLike:e,index:0,length:k,mapFn:d,subscriber:a});for(g=0;g<k&&!a.isUnsubscribed;g++){var f=d?d(e[g],g):e[g];a.next(f)}a.complete()};return b}(f.Observable);h.ArrayLikeObservable=a},function(f,h,a){var l=function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?
Object.create(b):(c.prototype=b.prototype,new c)};f=a(1);var k=a(17);a=a(15);f=function(a){function b(b){a.call(this);this.observableFactory=b}l(b,a);b.create=function(a){return new b(a)};b.prototype._subscribe=function(a){return new g(a,this.observableFactory)};return b}(f.Observable);h.DeferObservable=f;var g=function(a){function b(b,e){a.call(this,b);this.factory=e;this.tryDefer()}l(b,a);b.prototype.tryDefer=function(){try{this._callFactory()}catch(a){this._error(a)}};b.prototype._callFactory=
function(){var a=this.factory();a&&this.add(k.subscribeToResult(this,a))};return b}(a.OuterSubscriber)},function(f,h,a){var l=function(a,g){function d(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&(a[b]=g[b]);a.prototype=null===g?Object.create(g):(d.prototype=g.prototype,new d)};f=function(a){function g(d,b){a.call(this);this.error=d;this.scheduler=b}l(g,a);g.create=function(a,b){return new g(a,b)};g.dispatch=function(a){a.subscriber.error(a.error)};g.prototype._subscribe=function(a){var b=
this.error,c=this.scheduler;if(c)return c.schedule(g.dispatch,0,{error:b,subscriber:a});a.error(b)};return g}(a(1).Observable);h.ErrorObservable=f},function(f,h,a){var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},k=function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,
new c)},g=a(16),d=a(24),b=a(49),c=a(12),e=a(40),m=a(91),n=a(10),r=a(86),u=a(31),w=a(1),t=a(109),p=a(33);f=function(a){function f(b,c){a.call(this,null);this.ish=b;this.scheduler=c}k(f,a);f.create=function(a,k,h,t){var q=null,F=null;d.isFunction(k)?(q=t||null,F=k):c.isScheduler(q)&&(q=k);if(null!=a){if("function"===typeof a[p["default"]])return a instanceof w.Observable&&!q?a:new f(a,q);if(g.isArray(a))return new n.ArrayObservable(a,q);if(b.isPromise(a))return new e.PromiseObservable(a,q);if("function"===
typeof a[u.$$iterator]||"string"===typeof a)return new m.IteratorObservable(a,null,null,q);if(a&&"number"===typeof a.length)return new r.ArrayLikeObservable(a,F,h,q)}throw new TypeError((null!==a&&("undefined"===typeof a?"undefined":l(a))||a)+" is not observable");};f.prototype._subscribe=function(a){var b=this.ish,c=this.scheduler;return null==c?b[p["default"]]().subscribe(a):b[p["default"]]().subscribe(new t.ObserveOnSubscriber(a,c,0))};return f}(w.Observable);h.FromObservable=f},function(f,h,a){var l=
function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(47);f=a(1);var g=a(23);a=function(a){function b(b,e){void 0===b&&(b=0);void 0===e&&(e=g.async);a.call(this);this.period=b;this.scheduler=e;if(!k.isNumeric(b)||0>b)this.period=0;e&&"function"===typeof e.schedule||(this.scheduler=g.async)}l(b,a);b.create=function(a,e){void 0===a&&(a=0);void 0===e&&(e=g.async);return new b(a,e)};b.dispatch=
function(a){var b=a.subscriber,d=a.period;b.next(a.index);b.isUnsubscribed||(a.index+=1,this.schedule(a,d))};b.prototype._subscribe=function(a){var e=this.period;a.add(this.scheduler.schedule(b.dispatch,e,{index:0,subscriber:a,period:e}))};return b}(f.Observable);h.IntervalObservable=a},function(f,h,a){var l=function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},k=a(8),g=a(48),d=a(25);f=a(1);
var b=a(24),c=a(31),e=a(20);a=function(a){function k(e,d,f,h){a.call(this);if(null==e)throw Error("iterator cannot be null.");if(g.isObject(d))this.thisArg=d,this.scheduler=f;else if(b.isFunction(d))this.project=d,this.thisArg=f,this.scheduler=h;else if(null!=d)throw Error("When provided, `project` must be a function.");if((d=e[c.$$iterator])||"string"!==typeof e)if(d||void 0===e.length){if(!d)throw new TypeError("Object is not iterable");e=e[c.$$iterator]()}else e=new n(e);else e=new m(e);this.iterator=
e}l(k,a);k.create=function(a,b,c,e){return new k(a,b,c,e)};k.dispatch=function(a){var b=a.index,c=a.thisArg,g=a.project,k=a.iterator,f=a.subscriber;a.hasError?f.error(a.error):(k=k.next(),k.done?f.complete():(g?(k=d.tryCatch(g).call(c,k.value,b),k===e.errorObject?(a.error=e.errorObject.e,a.hasError=!0):(f.next(k),a.index=b+1)):(f.next(k.value),a.index=b+1),f.isUnsubscribed||this.schedule(a)))};k.prototype._subscribe=function(a){var b=0,c=this.iterator,g=this.project,f=this.thisArg,h=this.scheduler;
if(h)return h.schedule(k.dispatch,0,{index:b,thisArg:f,project:g,iterator:c,subscriber:a});do{h=c.next();if(h.done){a.complete();break}else if(g){h=d.tryCatch(g).call(f,h.value,b++);if(h===e.errorObject){a.error(e.errorObject.e);break}a.next(h)}else a.next(h.value);if(a.isUnsubscribed)break}while(1)};return k}(f.Observable);h.IteratorObservable=a;var m=function(){function a(b,c,e){void 0===c&&(c=0);void 0===e&&(e=b.length);this.str=b;this.idx=c;this.len=e}a.prototype[c.$$iterator]=function(){return this};
a.prototype.next=function(){return this.idx<this.len?{done:!1,value:this.str.charAt(this.idx++)}:{done:!0,value:void 0}};return a}(),n=function(){function a(b,c,e){void 0===c&&(c=0);if(void 0===e)if(e=+b.length,isNaN(e))e=0;else if(0!==e&&"number"===typeof e&&k.root.isFinite(e)){var d;d=+e;d=0===d?d:isNaN(d)?d:0>d?-1:1;e=d*Math.floor(Math.abs(e));e=0>=e?0:e>r?r:e}this.arr=b;this.idx=c;this.len=e}a.prototype[c.$$iterator]=function(){return this};a.prototype.next=function(){return this.idx<this.len?
{done:!1,value:this.arr[this.idx++]}:{done:!0,value:void 0}};return a}(),r=Math.pow(2,53)-1},function(f,h,a){var l=function(a,d){function b(){this.constructor=a}for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)};f=a(1);var k=a(38);a=function(a){function d(b,c,e){a.call(this);this.source=b;this.subjectFactory=c;this.selector=e}l(d,a);d.prototype._subscribe=function(a){var c=this.selector,e=new k.ConnectableObservable(this.source,this.subjectFactory);
a=c(e).subscribe(a);a.add(e.connect());return a};return d}(f.Observable);h.MulticastObservable=a},function(f,h,a){var l=function(a,d){function b(){this.constructor=a}for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)};f=a(1);var k=a(50);a=function(a){function d(){a.call(this)}l(d,a);d.create=function(){return new d};d.prototype._subscribe=function(a){k.noop()};return d}(f.Observable);h.NeverObservable=a},function(f,h,a){f=a(10);h.of=
f.ArrayObservable.of},function(f,h,a){f=a(88);h._throw=f.ErrorObservable.create},function(f,h,a){var l=function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(2);h._catch=function(a){a=new k(a);var b=this.lift(a);return a.caught=b};var k=function(){function a(b){this.selector=b}a.prototype.call=function(a,c){return c._subscribe(new g(a,this.selector,this.caught))};return a}(),g=function(a){function b(b,
e,g){a.call(this,b);this.selector=e;this.caught=g}l(b,a);b.prototype.error=function(a){if(!this.isStopped){var b=void 0;try{b=this.selector(a,this.caught)}catch(d){this.destination.error(d);return}this._innerSub(b)}};b.prototype._innerSub=function(a){this.unsubscribe();this.destination.remove(this);a.subscribe(this.destination)};return b}(f.Subscriber)},function(f,h,a){var l=function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):
(c.prototype=b.prototype,new c)},k=a(10),g=a(16);f=a(15);var d=a(17),b={};h.combineLatest=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];b=null;"function"===typeof a[a.length-1]&&(b=a.pop());1===a.length&&g.isArray(a[0])&&(a=a[0]);a.unshift(this);return(new k.ArrayObservable(a)).lift(new c(b))};var c=function(){function a(b){this.project=b}a.prototype.call=function(a,b){return b._subscribe(new e(a,this.project))};return a}();h.CombineLatestOperator=c;var e=function(a){function c(b,
e){a.call(this,b);this.project=e;this.active=0;this.values=[];this.observables=[]}l(c,a);c.prototype._next=function(a){this.values.push(b);this.observables.push(a)};c.prototype._complete=function(){var a=this.observables,b=a.length;if(0===b)this.destination.complete();else{this.toRespond=this.active=b;for(var c=0;c<b;c++){var e=a[c];this.add(d.subscribeToResult(this,e,e,c))}}};c.prototype.notifyComplete=function(a){0===--this.active&&this.destination.complete()};c.prototype.notifyNext=function(a,
c,e,d,g){a=this.values;d=a[e];d=this.toRespond?d===b?--this.toRespond:this.toRespond:0;a[e]=c;0===d&&(this.project?this._tryProject(a):this.destination.next(a))};c.prototype._tryProject=function(a){var b;try{b=this.project.apply(this,a)}catch(c){this.destination.error(c);return}this.destination.next(b)};return c}(f.OuterSubscriber);h.CombineLatestSubscriber=e},function(f,h,a){var l=a(29);h.concatAll=function(){return this.lift(new l.MergeAllOperator(1))}},function(f,h,a){var l=a(43);h.concatMap=function(a,
g){return this.lift(new l.MergeMapOperator(a,g,1))}},function(f,h,a){function l(a){a.debouncedNext()}var k=function(a,b){function d(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};f=a(2);var g=a(23);h.debounceTime=function(a,b){void 0===b&&(b=g.async);return this.lift(new d(a,b))};var d=function(){function a(b,c){this.dueTime=b;this.scheduler=c}a.prototype.call=function(a,c){return c._subscribe(new b(a,this.dueTime,
this.scheduler))};return a}(),b=function(a){function b(e,d,g){a.call(this,e);this.dueTime=d;this.scheduler=g;this.lastValue=this.debouncedSubscription=null;this.hasValue=!1}k(b,a);b.prototype._next=function(a){this.clearDebounce();this.lastValue=a;this.hasValue=!0;this.add(this.debouncedSubscription=this.scheduler.schedule(l,this.dueTime,this))};b.prototype._complete=function(){this.debouncedNext();this.destination.complete()};b.prototype.debouncedNext=function(){this.clearDebounce();this.hasValue&&
(this.destination.next(this.lastValue),this.lastValue=null,this.hasValue=!1)};b.prototype.clearDebounce=function(){var a=this.debouncedSubscription;null!==a&&(this.remove(a),a.unsubscribe(),this.debouncedSubscription=null)};return b}(f.Subscriber)},function(f,h,a){var l=function(a,b){function d(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};f=a(2);var k=a(25),g=a(20);h.distinctUntilChanged=function(a,b){return this.lift(new d(a,
b))};var d=function(){function a(b,c){this.compare=b;this.keySelector=c}a.prototype.call=function(a,c){return c._subscribe(new b(a,this.compare,this.keySelector))};return a}(),b=function(a){function b(e,d,g){a.call(this,e);this.keySelector=g;this.hasKey=!1;"function"===typeof d&&(this.compare=d)}l(b,a);b.prototype.compare=function(a,b){return a===b};b.prototype._next=function(a){var b=a;if(this.keySelector&&(b=k.tryCatch(this.keySelector)(a),b===g.errorObject))return this.destination.error(g.errorObject.e);
var c=!1;if(this.hasKey){if(c=k.tryCatch(this.compare)(this.key,b),c===g.errorObject)return this.destination.error(g.errorObject.e)}else this.hasKey=!0;!1===Boolean(c)&&(this.key=b,this.destination.next(a))};return b}(f.Subscriber)},function(f,h,a){var l=function(a,c){function e(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)},k=a(2);h._do=function(a,c,e){return this.lift(new g(a,c,e))};var g=function(){function a(b,
e,d){this.nextOrObserver=b;this.error=e;this.complete=d}a.prototype.call=function(a,b){return b._subscribe(new d(a,this.nextOrObserver,this.error,this.complete))};return a}(),d=function(a){function c(c,d,g,f){a.call(this,c);c=new k.Subscriber(d,g,f);c.syncErrorThrowable=!0;this.add(c);this.safeSubscriber=c}l(c,a);c.prototype._next=function(a){var b=this.safeSubscriber;b.next(a);b.syncErrorThrown?this.destination.error(b.syncErrorValue):this.destination.next(a)};c.prototype._error=function(a){var b=
this.safeSubscriber;b.error(a);b.syncErrorThrown?this.destination.error(b.syncErrorValue):this.destination.error(a)};c.prototype._complete=function(){var a=this.safeSubscriber;a.complete();a.syncErrorThrown?this.destination.error(a.syncErrorValue):this.destination.complete()};return c}(k.Subscriber)},function(f,h,a){var l=function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(2);h.filter=
function(a,b){return this.lift(new k(a,b))};var k=function(){function a(b,c){this.predicate=b;this.thisArg=c}a.prototype.call=function(a,c){return c._subscribe(new g(a,this.predicate,this.thisArg))};return a}(),g=function(a){function b(b,e,g){a.call(this,b);this.predicate=e;this.thisArg=g;this.count=0;this.predicate=e}l(b,a);b.prototype._next=function(a){var b;try{b=this.predicate.call(this.thisArg,a,this.count++)}catch(d){this.destination.error(d);return}b&&this.destination.next(a)};return b}(f.Subscriber)},
function(f,h,a){var l=function(a,c){function e(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)};f=a(2);var k=a(4);h._finally=function(a){return this.lift(new g(a))};var g=function(){function a(b){this.callback=b}a.prototype.call=function(a,b){return b._subscribe(new d(a,this.callback))};return a}(),d=function(a){function c(c,d){a.call(this,c);this.add(new k.Subscription(d))}l(c,a);return c}(f.Subscriber)},function(f,
h,a){var l=function(a,c){function e(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)};f=a(2);var k=a(50);h.ignoreElements=function(){return this.lift(new g)};var g=function(){function a(){}a.prototype.call=function(a,b){return b._subscribe(new d(a))};return a}(),d=function(a){function c(){a.apply(this,arguments)}l(c,a);c.prototype._next=function(a){k.noop()};return c}(f.Subscriber)},function(f,h,a){var l=function(a,
b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(2);h.map=function(a,b){if("function"!==typeof a)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new k(a,b))};var k=function(){function a(b,c){this.project=b;this.thisArg=c}a.prototype.call=function(a,c){return c._subscribe(new g(a,this.project,this.thisArg))};return a}(),g=function(a){function b(b,
e,g){a.call(this,b);this.project=e;this.count=0;this.thisArg=g||this}l(b,a);b.prototype._next=function(a){var b;try{b=this.project.call(this.thisArg,a,this.count++)}catch(d){this.destination.error(d);return}this.destination.next(b)};return b}(f.Subscriber)},function(f,h,a){var l=function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(2);h.mapTo=function(a){return this.lift(new k(a))};var k=
function(){function a(b){this.value=b}a.prototype.call=function(a,c){return c._subscribe(new g(a,this.value))};return a}(),g=function(a){function b(b,e){a.call(this,b);this.value=e}l(b,a);b.prototype._next=function(a){this.destination.next(this.value)};return b}(f.Subscriber)},function(f,h,a){function l(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];var c=Number.POSITIVE_INFINITY,e=null,f=a[a.length-1];d.isScheduler(f)?(e=a.pop(),1<a.length&&"number"===typeof a[a.length-1]&&(c=a.pop())):
"number"===typeof f&&(c=a.pop());return 1===a.length?a[0]:(new k.ArrayObservable(a,e)).lift(new g.MergeAllOperator(c))}var k=a(10),g=a(29),d=a(12);h.merge=function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];a.unshift(this);return l.apply(this,a)};h.mergeStatic=l},function(f,h,a){var l=function(a,b){function d(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};f=a(2);var k=a(58);h.observeOn=
function(a,b){void 0===b&&(b=0);return this.lift(new g(a,b))};var g=function(){function a(b,c){void 0===c&&(c=0);this.scheduler=b;this.delay=c}a.prototype.call=function(a,b){return b._subscribe(new d(a,this.scheduler,this.delay))};return a}();h.ObserveOnOperator=g;var d=function(a){function e(b,e,d){void 0===d&&(d=0);a.call(this,b);this.scheduler=e;this.delay=d}l(e,a);e.dispatch=function(a){a.notification.observe(a.destination)};e.prototype.scheduleMessage=function(a){this.add(this.scheduler.schedule(e.dispatch,
this.delay,new b(a,this.destination)))};e.prototype._next=function(a){this.scheduleMessage(k.Notification.createNext(a))};e.prototype._error=function(a){this.scheduleMessage(k.Notification.createError(a))};e.prototype._complete=function(){this.scheduleMessage(k.Notification.createComplete())};return e}(f.Subscriber);h.ObserveOnSubscriber=d;var b=function(){return function(a,b){this.notification=a;this.destination=b}}();h.ObserveOnMessage=b},function(f,h,a){var l=a(7),k=a(30);h.publish=function(a){return a?
k.multicast.call(this,function(){return new l.Subject},a):k.multicast.call(this,new l.Subject)}},function(f,h,a){var l=function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(2);h.scan=function(a,b){return this.lift(new k(a,b))};var k=function(){function a(b,c){this.accumulator=b;this.seed=c}a.prototype.call=function(a,c){return c._subscribe(new g(a,this.accumulator,this.seed))};return a}(),
g=function(a){function b(b,e,g){a.call(this,b);this.accumulator=e;this.index=0;this.accumulatorSet=!1;this.seed=g;this.accumulatorSet="undefined"!==typeof g}l(b,a);Object.defineProperty(b.prototype,"seed",{get:function(){return this._seed},set:function(a){this.accumulatorSet=!0;this._seed=a},enumerable:!0,configurable:!0});b.prototype._next=function(a){if(this.accumulatorSet)return this._tryNext(a);this.seed=a;this.destination.next(a)};b.prototype._tryNext=function(a){var b=this.index++,d;try{d=this.accumulator(this.seed,
a,b)}catch(g){this.destination.error(g)}this.seed=d;this.destination.next(d)};return b}(f.Subscriber)},function(f,h,a){function l(){return new g.Subject}var k=a(30),g=a(7);h.share=function(){return k.multicast.call(this,l).refCount()}},function(f,h,a){var l=function(a,b){function c(){this.constructor=a}for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};f=a(2);h.skip=function(a){return this.lift(new k(a))};var k=function(){function a(b){this.total=
b}a.prototype.call=function(a,c){return c._subscribe(new g(a,this.total))};return a}(),g=function(a){function b(b,e){a.call(this,b);this.total=e;this.count=0}l(b,a);b.prototype._next=function(a){++this.count>this.total&&this.destination.next(a)};return b}(f.Subscriber)},function(f,h,a){var l=a(10),k=a(28),g=a(5),d=a(42),b=a(12);h.startWith=function(){for(var a=[],e=0;e<arguments.length;e++)a[e-0]=arguments[e];e=a[a.length-1];b.isScheduler(e)?a.pop():e=null;var f=a.length;return 1===f?d.concatStatic(new k.ScalarObservable(a[0],
e),this):1<f?d.concatStatic(new l.ArrayObservable(a,e),this):d.concatStatic(new g.EmptyObservable(e),this)}},function(f,h,a){var l=function(a,c){function e(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)};f=a(15);var k=a(17);h.switchMap=function(a,c){return this.lift(new g(a,c))};var g=function(){function a(b,e){this.project=b;this.resultSelector=e}a.prototype.call=function(a,b){return b._subscribe(new d(a,
this.project,this.resultSelector))};return a}(),d=function(a){function c(c,d,g){a.call(this,c);this.project=d;this.resultSelector=g;this.index=0}l(c,a);c.prototype._next=function(a){var b,c=this.index++;try{b=this.project(a,c)}catch(d){this.destination.error(d);return}this._innerSub(b,a,c)};c.prototype._innerSub=function(a,b,c){var d=this.innerSubscription;d&&d.unsubscribe();this.add(this.innerSubscription=k.subscribeToResult(this,a,b,c))};c.prototype._complete=function(){var c=this.innerSubscription;
c&&!c.isUnsubscribed||a.prototype._complete.call(this)};c.prototype._unsubscribe=function(){this.innerSubscription=null};c.prototype.notifyComplete=function(c){this.remove(c);this.innerSubscription=null;this.isStopped&&a.prototype._complete.call(this)};c.prototype.notifyNext=function(a,b,c,d,g){this.resultSelector?this._tryNotifyNext(a,b,c,d):this.destination.next(b)};c.prototype._tryNotifyNext=function(a,b,c,d){var g;try{g=this.resultSelector(a,b,c,d)}catch(k){this.destination.error(k);return}this.destination.next(g)};
return c}(f.OuterSubscriber)},function(f,h,a){var l=function(a,b){function d(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===b?Object.create(b):(d.prototype=b.prototype,new d)};f=a(2);var k=a(124),g=a(5);h.take=function(a){return 0===a?new g.EmptyObservable:this.lift(new d(a))};var d=function(){function a(b){this.total=b;if(0>this.total)throw new k.ArgumentOutOfRangeError;}a.prototype.call=function(a,c){return c._subscribe(new b(a,this.total))};return a}(),
b=function(a){function b(e,d){a.call(this,e);this.total=d;this.count=0}l(b,a);b.prototype._next=function(a){var b=this.total;++this.count<=b&&(this.destination.next(a),this.count===b&&(this.destination.complete(),this.unsubscribe()))};return b}(f.Subscriber)},function(f,h,a){var l=function(a,c){function e(){this.constructor=a}for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d]);a.prototype=null===c?Object.create(c):(e.prototype=c.prototype,new e)};f=a(15);var k=a(17);h.takeUntil=function(a){return this.lift(new g(a))};
var g=function(){function a(b){this.notifier=b}a.prototype.call=function(a,b){return b._subscribe(new d(a,this.notifier))};return a}(),d=function(a){function c(c,d){a.call(this,c);this.notifier=d;this.add(k.subscribeToResult(this,d))}l(c,a);c.prototype.notifyNext=function(a,b,c,d,g){this.complete()};c.prototype.notifyComplete=function(){};return c}(f.OuterSubscriber)},function(f,h,a){var l=function(a,b){function d(){this.constructor=a}for(var g in b)b.hasOwnProperty(g)&&(a[g]=b[g]);a.prototype=null===
b?Object.create(b):(d.prototype=b.prototype,new d)},k=a(23),g=a(46);f=a(2);h.timeout=function(a,b,f){void 0===b&&(b=null);void 0===f&&(f=k.async);var h=g.isDate(a);a=h?+a-f.now():Math.abs(a);return this.lift(new d(a,h,b,f))};var d=function(){function a(b,c,d,g){this.waitFor=b;this.absoluteTimeout=c;this.errorToSend=d;this.scheduler=g}a.prototype.call=function(a,c){return c._subscribe(new b(a,this.absoluteTimeout,this.waitFor,this.errorToSend,this.scheduler))};return a}(),b=function(a){function b(e,
d,g,k,f){a.call(this,e);this.absoluteTimeout=d;this.waitFor=g;this.errorToSend=k;this.scheduler=f;this._previousIndex=this.index=0;this._hasCompleted=!1;this.scheduleTimeout()}l(b,a);Object.defineProperty(b.prototype,"previousIndex",{get:function(){return this._previousIndex},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hasCompleted",{get:function(){return this._hasCompleted},enumerable:!0,configurable:!0});b.dispatchTimeout=function(a){var b=a.subscriber;a=a.index;b.hasCompleted||
b.previousIndex!==a||b.notifyTimeout()};b.prototype.scheduleTimeout=function(){var a=this.index;this.scheduler.schedule(b.dispatchTimeout,this.waitFor,{subscriber:this,index:a});this.index++;this._previousIndex=a};b.prototype._next=function(a){this.destination.next(a);this.absoluteTimeout||this.scheduleTimeout()};b.prototype._error=function(a){this.destination.error(a);this._hasCompleted=!0};b.prototype._complete=function(){this.destination.complete();this._hasCompleted=!0};b.prototype.notifyTimeout=
function(){this.error(this.errorToSend||Error("timeout"))};return b}(f.Subscriber)},function(f,h,a){var l=function(a,d){function b(){this.constructor=a}for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)},k=a(125);f=function(a){function d(){a.apply(this,arguments)}l(d,a);d.prototype._schedule=function(b,c){void 0===c&&(c=0);if(0<c)return a.prototype._schedule.call(this,b,c);this.delay=c;this.state=b;var e=this.scheduler;e.actions.push(this);
e.scheduledId||(e.scheduledId=k.Immediate.setImmediate(function(){e.scheduledId=null;e.flush()}));return this};d.prototype._unsubscribe=function(){var b=this.scheduler,c=b.scheduledId,e=b.actions;a.prototype._unsubscribe.call(this);0===e.length&&(b.active=!1,null!=c&&(b.scheduledId=null,k.Immediate.clearImmediate(c)))};return d}(a(22).FutureAction);h.AsapAction=f},function(f,h,a){var l=function(a,d){function b(){this.constructor=a}for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);a.prototype=null===
d?Object.create(d):(b.prototype=d.prototype,new b)},k=a(119);f=function(a){function d(){a.apply(this,arguments)}l(d,a);d.prototype.scheduleNow=function(a,c){return(new k.AsapAction(this,a)).schedule(c)};return d}(a(44).QueueScheduler);h.AsapScheduler=f},function(f,h,a){var l=function(a,d){function b(){this.constructor=a}for(var c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);a.prototype=null===d?Object.create(d):(b.prototype=d.prototype,new b)},k=a(22);f=function(a){function d(){a.apply(this,arguments)}l(d,
a);d.prototype.scheduleNow=function(a,c){return(new k.FutureAction(this,a)).schedule(c,0)};return d}(a(44).QueueScheduler);h.AsyncScheduler=f},function(f,h,a){var l=function(a,g){function d(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&(a[b]=g[b]);a.prototype=null===g?Object.create(g):(d.prototype=g.prototype,new d)};f=function(a){function g(){a.apply(this,arguments)}l(g,a);g.prototype._schedule=function(d,b){void 0===b&&(b=0);if(0<b)return a.prototype._schedule.call(this,d,b);this.delay=
b;this.state=d;var c=this.scheduler;c.actions.push(this);c.flush();return this};return g}(a(22).FutureAction);h.QueueAction=f},function(f,h,a){f=a(120);h.asap=new f.AsapScheduler},function(f,h){var a=function(a,g){function d(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&(a[b]=g[b]);a.prototype=null===g?Object.create(g):(d.prototype=g.prototype,new d)},l=function(k){function g(){var a=k.call(this,"argument out of range");this.name=a.name="ArgumentOutOfRangeError";this.stack=a.stack;this.message=
a.message}a(g,k);return g}(Error);h.ArgumentOutOfRangeError=l},function(f,h,a){f=a(8);a=function(){function a(k){this.root=k;k.setImmediate&&"function"===typeof k.setImmediate?(this.setImmediate=k.setImmediate.bind(k),this.clearImmediate=k.clearImmediate.bind(k)):(this.nextHandle=1,this.tasksByHandle={},this.currentlyRunningATask=!1,this.canUseProcessNextTick()?this.setImmediate=this.createProcessNextTickSetImmediate():this.canUsePostMessage()?this.setImmediate=this.createPostMessageSetImmediate():
this.canUseMessageChannel()?this.setImmediate=this.createMessageChannelSetImmediate():this.canUseReadyStateChange()?this.setImmediate=this.createReadyStateChangeSetImmediate():this.setImmediate=this.createSetTimeoutSetImmediate(),k=function d(a){delete d.instance.tasksByHandle[a]},k.instance=this,this.clearImmediate=k)}a.prototype.identify=function(a){return this.root.Object.prototype.toString.call(a)};a.prototype.canUseProcessNextTick=function(){return"[object process]"===this.identify(this.root.process)};
a.prototype.canUseMessageChannel=function(){return Boolean(this.root.MessageChannel)};a.prototype.canUseReadyStateChange=function(){var a=this.root.document;return Boolean(a&&"onreadystatechange"in a.createElement("script"))};a.prototype.canUsePostMessage=function(){var a=this.root;if(a.postMessage&&!a.importScripts){var g=!0,d=a.onmessage;a.onmessage=function(){g=!1};a.postMessage("","*");a.onmessage=d;return g}return!1};a.prototype.partiallyApplied=function(a){for(var g=[],d=1;d<arguments.length;d++)g[d-
1]=arguments[d];d=function c(){var a=c.handler,d=c.args;"function"===typeof a?a.apply(void 0,d):(new Function(""+a))()};d.handler=a;d.args=g;return d};a.prototype.addFromSetImmediateArguments=function(a){this.tasksByHandle[this.nextHandle]=this.partiallyApplied.apply(void 0,a);return this.nextHandle++};a.prototype.createProcessNextTickSetImmediate=function(){var a=function d(){var a=d.instance,c=a.addFromSetImmediateArguments(arguments);a.root.process.nextTick(a.partiallyApplied(a.runIfPresent,c));
return c};a.instance=this;return a};a.prototype.createPostMessageSetImmediate=function(){var a=this.root,g="setImmediate$"+a.Math.random()+"$",d=function c(e){var d=c.instance;e.source===a&&"string"===typeof e.data&&0===e.data.indexOf(g)&&d.runIfPresent(+e.data.slice(g.length))};d.instance=this;a.addEventListener("message",d,!1);d=function e(){var a=e,d=a.messagePrefix,a=a.instance,g=a.addFromSetImmediateArguments(arguments);a.root.postMessage(d+g,"*");return g};d.instance=this;d.messagePrefix=g;
return d};a.prototype.runIfPresent=function(a){if(this.currentlyRunningATask)this.root.setTimeout(this.partiallyApplied(this.runIfPresent,a),0);else{var g=this.tasksByHandle[a];if(g){this.currentlyRunningATask=!0;try{g()}finally{this.clearImmediate(a),this.currentlyRunningATask=!1}}}};a.prototype.createMessageChannelSetImmediate=function(){var a=this,g=new this.root.MessageChannel;g.port1.onmessage=function(b){a.runIfPresent(b.data)};var d=function c(){var a=c,d=a.channel,a=a.instance.addFromSetImmediateArguments(arguments);
d.port2.postMessage(a);return a};d.channel=g;d.instance=this;return d};a.prototype.createReadyStateChangeSetImmediate=function(){var a=function d(){var a=d.instance,c=a.root.document,e=c.documentElement,f=a.addFromSetImmediateArguments(arguments),k=c.createElement("script");k.onreadystatechange=function(){a.runIfPresent(f);k.onreadystatechange=null;e.removeChild(k);k=null};e.appendChild(k);return f};a.instance=this;return a};a.prototype.createSetTimeoutSetImmediate=function(){var a=function d(){var a=
d.instance,c=a.addFromSetImmediateArguments(arguments);a.root.setTimeout(a.partiallyApplied(a.runIfPresent,c),0);return c};a.instance=this;return a};return a}();h.ImmediateDefinition=a;h.Immediate=new a(f.root)},function(f,h){var a=function(a,g){function d(){this.constructor=a}for(var b in g)g.hasOwnProperty(b)&&(a[b]=g[b]);a.prototype=null===g?Object.create(g):(d.prototype=g.prototype,new d)},l=function(f){function g(a){f.call(this);this.errors=a;a=Error.call(this,a?a.length+" errors occurred during unsubscription:\n  "+
a.map(function(a,c){return c+1+") "+a.toString()}).join("\n  "):"");this.name=a.name="UnsubscriptionError";this.stack=a.stack;this.message=a.message}a(g,f);return g}(Error);h.UnsubscriptionError=l},function(f,h){h.throwError=function(a){throw a;}},function(f,h,a){var l=a(2),k=a(32);h.toSubscriber=function(a,d,b){if(a){if(a instanceof l.Subscriber)return a;if(a[k.$$rxSubscriber])return a[k.$$rxSubscriber]()}return a||d||b?new l.Subscriber(a,d,b):new l.Subscriber}},function(f,h,a){(function(f){Object.defineProperty(h,
"__esModule",{value:!0});var k=a(130),k=k&&k.__esModule?k:{"default":k},g=void 0;"undefined"!==typeof f?g=f:"undefined"!==typeof window&&(g=window);f=(0,k["default"])(g);h["default"]=f}).call(h,function(){return this}())},function(f,h){Object.defineProperty(h,"__esModule",{value:!0});h["default"]=function(a){var f=a.Symbol;"function"===typeof f?f.observable?a=f.observable:(a=f("observable"),f.observable=a):a="@@observable";return a}},function(f,h){f.exports=function(a){a.webpackPolyfill||(a.deprecate=
function(){},a.paths=[],a.children=[],a.webpackPolyfill=1);return a}},function(f,h){function a(a){return function(f,g){return null==f?g:a*g+(1-a)*f}}f.exports=function(f,k){return f.map(function(a){return a.value.response}).filter(function(a){return 2E3<a.size}).map(function(a){return a.size/a.duration*8E3}).scan(a(k.alpha))}},function(f,h,a){function l(a,b){for(var c=0;c<a.length;c++)if(!0===b(a[c],c,a))return a[c];return null}function k(a,b){return"number"==typeof a&&0<a?a:b}function g(a,b){for(var c=
2>=arguments.length||void 0===arguments[2]?0:arguments[2],e=a.length-1;0<=e;e--)if(a[e]/b<=1-c)return a[e];return a[0]}function d(a,b){var c=l(a,function(a){return a.width>=b});return c?c.bitrate:Infinity}function b(a,b){return b?l(a,function(a){return a.lang===b}):null}function c(a,b){return a.filter(function(a){return a.type===b})}var e=a(4).Subscription,m=a(27).BehaviorSubject,n=a(19).combineLatest,r=a(14).only,u=a(132),w={defaultLanguage:"fra",defaultSubtitle:"",defaultBufferSize:30,defaultBufferThreshold:.3};
f.exports=function(a,f){function h(a){return G.distinctUntilChanged().map(function(c){return b(a,c)||a[0]})}function y(a){return K.distinctUntilChanged().map(function(c){return b(a,c)})}var A=Object.assign({},w,2>=arguments.length||void 0===arguments[2]?{}:arguments[2]),D=A.defaultSubtitle,z=A.defaultBufferSize,B=A.defaultBufferThreshold,v=A.initVideoBitrate,F=A.initAudioBitrate,C=f.videoWidth,E=f.inBackground,G=new m(A.defaultLanguage),K=new m(D),L={audio:new m(F||0),video:new m(v||0)},A=[u(c(a,
"audio"),{alpha:.6}).multicast(L.audio),u(c(a,"video"),{alpha:.6}).multicast(L.video)],H=new e;A.forEach(function(a){return H.add(a.connect())});var x={audio:new m(Infinity),video:new m(Infinity)},M={audio:new m(Infinity),video:new m(Infinity)},J={audio:new m(z),video:new m(z),text:new m(z)};return{setLanguage:function(a){G.next(a)},setSubtitle:function(a){K.next(a)},getLanguage:function(){return G.getValue()},getSubtitle:function(){return K.getValue()},getAverageBitrates:function(){return L},getAudioMaxBitrate:function(){return M.audio.getValue()},
getVideoMaxBitrate:function(){return M.video.getValue()},getAudioBufferSize:function(){return J.audio.getValue()},getVideoBufferSize:function(){return J.video.getValue()},setAudioBitrate:function(a){x.audio.next(k(a,Infinity))},setVideoBitrate:function(a){x.video.next(k(a,Infinity))},setAudioMaxBitrate:function(a){M.audio.next(k(a,Infinity))},setVideoMaxBitrate:function(a){M.video.next(k(a,Infinity))},setAudioBufferSize:function(a){J.audio.next(k(a,z))},setVideoBufferSize:function(a){J.video.next(k(a,
z))},getBufferAdapters:function(a){var b=a.type,c=a.bitrates,e=a.representations;a=e[0];var f=void 0;if(1<e.length){a=x[b];var f=M[b],k=L[b].map(function(a,b){var e=void 0,e=0===b?0:B;return g(c,a,e)}).distinctUntilChanged().debounceTime(2E3).startWith(g(c,L[b].getValue(),0));"video"==b&&(f=n(f,C,E,function(a,b,g){if(g)return c[0];b=d(e,b);return b<a?b:a}));f=n(a,f,k,function(a,b,d){var f=void 0,f=Infinity>a?a:Infinity>b?Math.min(b,d):d;return l(e,function(a){return a.bitrate===g(c,f)})}).distinctUntilChanged(function(a,
b){return a.id===b.id})}else f=r(a);return{representations:f,bufferSizes:J[b]||new m(z)}},getAdaptationsChoice:function(a,b){return"audio"==a?h(b):"text"==a?y(b):r(b[0])},unsubscribe:function(){H&&(H.unsubscribe(),H=null)}}}},function(f,h,a){var l=a(9),k=a(135).BufferingQueue,g=a(21).BufferedRanges,d=a(1).Observable,b=a(7).Subject,c=a(19).combineLatest,e=a(11).merge,m=a(5).EmptyObservable.create,n=a(89).FromObservable.create,r=a(41).TimerObservable.create,u=a(159).SimpleSet,w=a(52).IndexHandler;h=
a(6);var t=h.MediaError,p=h.ErrorTypes,q=h.ErrorCodes;f.exports={Buffer:function(a){function f(a,b){for(var c=a.ts,e=a.buffered,d=e.getRange(c),e=e.getOuterRanges(c),g=[],k=0;k<e.length;k++){var h=e[k];c-b<h.end?g.push(h):c+b>h.start&&g.push(h)}d&&(l.debug("buffer: gc removing part of inner range",g),c-b>d.start&&g.push({start:d.start,end:c-b}),c+b<d.end&&g.push({start:c+b,end:d.end}));return g}function h(){l.warn("buffer: running garbage collector");return K.take(1).mergeMap(function(a){var b=f(a,
240);0===b.length&&(b=f(a,30));l.debug("buffer: gc cleaning",b);return n(b.map(function(a){return N.removeBuffer(a)})).concatAll()})}function z(a){var b=a.parsed.segmentData;return N.appendBuffer(b)["catch"](function(a){if("QuotaExceededError"!=a.name)throw new t("BUFFER_APPEND_ERROR",a,!1);return h().mergeMap(function(){return N.appendBuffer(b)})["catch"](function(a){throw new t("BUFFER_FULL_ERROR",a,!0);})})}function B(a){function b(a){if(k.test(a.getId()))return!1;if(a.isInitSegment()||0>a.getTime())return!0;
var c=f.scale(a.getTime()),e=f.scale(a.getDuration());return(c=O.hasRange(c,e))?1.5*c.bitrate<a.getRepresentation().bitrate:!0}l.info("bitrate",v,a.bitrate);var f=new w(C,a),k=new u,h=c(K,I).mergeMap(function(c,e){var d=c[0],h=c[1],n=new g(F.buffered);L&&!O.equals(n)&&(l.debug("intersect new buffer",v),O.intersect(n));var u=void 0;try{var C=f,w=[];0===e&&(l.debug("add init segment",v),w.push(C.getInitSegment()));if(0===d.readyState)u=w;else{var t=d.ts,r=Math.max(0,Math.min(h,d.liveGap,(d.duration||
Infinity)-t)),d=void 0,E=n.getGap(t),d=E>x&&Infinity>E?Math.min(E,M):0,J=O.getRange(t);if(J&&J.bitrate===a.bitrate){var I=Math.floor(J.end-t);I>d&&(d=I)}var G=C.getSegments(t,d,r),u=w.concat(G)}u=u.filter(b)}catch(z){if(z.type===p.INDEX_ERROR&&z.code===q.OUT_OF_INDEX_ERROR)return H.next({type:"out-of-index",value:z}),m();throw z;}for(n=0;n<u.length;n++)k.add(u[n].getId());return u}).concatMap(function(a){return E({segment:a})}).concatMap(z,function(b){var c=b.parsed;k.remove(b.segment.getId());var e=
c.timescale;e&&f.setTimescale(e);var e=c.nextSegments,c=c.currentSegment,d=void 0,d=e?f.insertNewSegments(e,c):[];c&&O.insert(a.bitrate,f.scale(c.ts),f.scale(c.ts+c.d));return{type:"pipeline",value:Object.assign({bufferType:v,addedSegments:d},b)}});return e(h,H)["catch"](function(b){if(!C.isLive||b.type!=p.NETWORK_ERROR||!b.isHttpError(412)&&!b.isHttpError(404))throw b;return d.of({type:"precondition-failed",value:b}).concat(r(2E3)).concat(B(a))}).startWith({type:"buffer",value:{bufferType:v,adaptation:C,
representation:a}})}var v=a.bufferType,F=a.sourceBuffer,C=a.adaptation,E=a.pipeline,G=a.adapters,K=a.timings;a=a.seekings;var L="audio"==v||"video"==v,H=new b,x="video"==v?4:1,M="video"==v?6:1,J=G.representations,I=G.bufferSizes,O=new g,N=new k(F);return c(J,a,function(a){return a}).switchMap(B)["finally"](function(){return N.dispose()})},EmptyBuffer:function(a){return d.of({type:"buffer",value:{bufferType:a,adaptation:null,representation:null}})}}},function(f,h,a){var l=a(7).Subject;h=function(){function a(g){if(!(this instanceof
a))throw new TypeError("Cannot call a class as a function");this.buffer=g;this.queue=[];this.flushing=null;this._onUpdate=this.onUpdate.bind(this);this._onError=this.onError.bind(this);this._flush=this.flush.bind(this);this.buffer.addEventListener("update",this._onUpdate);this.buffer.addEventListener("error",this._onError);this.buffer.addEventListener("updateend",this._flush)}a.prototype.dispose=function(){this.buffer.removeEventListener("update",this._onUpdate);this.buffer.removeEventListener("error",
this._onError);this.buffer.removeEventListener("updateend",this._flush);this.buffer=null;this.queue.length=0;this.flushing=null};a.prototype.onUpdate=function(a){this.flushing&&(this.flushing.next(a),this.flushing.complete(),this.flushing=null)};a.prototype.onError=function(a){this.flushing&&(this.flushing.error(a),this.flushing=null)};a.prototype.queueAction=function(a,d){var b=new l;1===this.queue.unshift({type:a,args:d,subj:b})&&this.flush();return b};a.prototype.appendBuffer=function(a){return this.queueAction("append",
a)};a.prototype.removeBuffer=function(a){return this.queueAction("remove",{start:a.start,end:a.end})};a.prototype.appendStream=function(a){return this.queueAction("stream",a)};a.prototype.flush=function(){if(!this.flushing&&0!==this.queue.length&&!this.buffer.updating){var a=this.queue.pop(),d=a.type,b=a.args;this.flushing=a.subj;try{switch(d){case "append":this.buffer.appendBuffer(b);break;case "stream":this.buffer.appendStream(b);break;case "remove":this.buffer.remove(b.start,b.end)}}catch(c){this.onError(c)}}};
return a}();f.exports={BufferingQueue:h}},function(f,h){var a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.cache={}}a.prototype.add=function(a,g){var d=a.segment;d.isInitSegment()&&(this.cache[d.getId()]=g)};a.prototype.get=function(a){a=a.segment;return a.isInitSegment()&&(a=this.cache[a.getId()],null!=a)?a:null};return a}();f.exports={InitializationSegmentCache:a}},function(f,h,a){var l=a(11).merge,k=a(90).IntervalObservable.create;
h=a(13);var g=h.visibilityChange,d=h.videoSizeChange,b=window.devicePixelRatio||1;f.exports=function(a){var e=g().filter(function(a){return!1===a}),f=g().debounceTime(6E4).filter(function(a){return!0===a}),e=l(e,f).startWith(!1);return{videoWidth:l(k(2E4),d().debounceTime(500)).startWith("init").map(function(){return a.clientWidth*b}).distinctUntilChanged(),inBackground:e}}},function(f,h,a){function l(a,g){if("function"!==typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+
typeof g);a.prototype=Object.create(g&&g.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});g&&(Object.setPrototypeOf?Object.setPrototypeOf(a,g):a.__proto__=g)}h=function(a){function g(){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");var d=a.apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!d||"object"!==typeof d&&"function"!==typeof d?this:d}l(g,a);g.prototype._append=
function(){this.buffered.insert(0,0,Infinity)};return g}(a(54).AbstractSourceBuffer);f.exports=h},function(f,h,a){function l(a,g){if("function"!==typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+typeof g);a.prototype=Object.create(g&&g.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});g&&(Object.setPrototypeOf?Object.setPrototypeOf(a,g):a.__proto__=g)}h=function(a){function g(){if(!(this instanceof g))throw new TypeError("Cannot call a class as a function");
var d=a.apply(this,arguments);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!d||"object"!==typeof d&&"function"!==typeof d?this:d}l(g,a);g.getLiveEdge=function(){throw Error("not implemented");};g.prototype.addSegment=function(a){this.index.timeline.push(a);return!0};return g}(a(53));f.exports=h},function(f,h,a){var l=a(26).Segment;h=function(){function a(g,d,b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");
this.adaptation=g;this.representation=d;this.index=b}a.getLiveEdge=function(){throw Error("not implemented");};a.prototype.checkRange=function(a){var d=this.index,b=d.list;a=Math.floor(a/d.duration);return 0<=a&&a<b.length};a.prototype.createSegment=function(a,d){var b=this.index,c=b.list[a];return l.create(this.adaptation,this.representation,a,c.media,d,b.duration,0,c.range,null,!1)};a.prototype.getSegments=function(a,d){for(var b=this.index,c=b.duration,b=Math.min(b.list.length-1,Math.floor(d/c)),
e=[],f=Math.floor(a/c);f<=b;)e.push(this.createSegment(f,f*c)),f++;return e};a.prototype.addSegment=function(){return!1};return a}();f.exports=h},function(f,h,a){var l=a(26).Segment;h=function(){function a(g,d,b){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.adaptation=g;this.representation=d;this.index=b}a.getLiveEdge=function(a,d){return Date.now()/1E3-d.availabilityStartTime-d.suggestedPresentationDelay};a.prototype.checkRange=function(){return!0};a.prototype.createSegment=
function(a){var d=this.index,b=d.startNumber,d=d.duration;a=Math.floor(a/d)+(null==b?1:b);return l.create(this.adaptation,this.representation,a,this.index.media,a*d,this.index.duration,a,null,null,!1)};a.prototype.getSegments=function(a,d){for(var b=this.index.duration,c=[],e=a;e<=d;e+=b)c.push(this.createSegment(e));return c};a.prototype.addSegment=function(){return!1};return a}();f.exports=h},function(f,h,a){function l(a,b,c){var e=3>=arguments.length||void 0===arguments[3]?!0:arguments[3];p(c)||
(c=new (c instanceof r?u:w)(a,c,e));c.pipelineType=b;return c}function k(a){return a instanceof r?a.type===t.ERROR_HTTP_CODE?500<=a.status:a.type===t.TIMEOUT||a.type===t.ERROR_EVENT:!1}function g(a,e,d,g){function f(b){throw l("PIPELINE_RESOLVE_ERROR",a,b);}function h(b){throw l("PIPELINE_PARSING_ERROR",a,b);}function u(a){d.next(a)}function C(a){var b=J?J.get(a):null;return null===b?c(m(H,a),I):n(b)["catch"](function(){return c(m(H,a),I)})}function p(a){return m(x,a)["catch"](h)}function t(b,c){var e=
Object.assign({response:c},b);J&&J.add(b,c);q.schedule(u,0,{type:a,value:e});return e}function w(a,b){return Object.assign({parsed:b},a)}var r=e.resolver,H=e.loader,x=e.parser,M=4>=arguments.length||void 0===arguments[4]?{}:arguments[4];r||(r=b.of);H||(H=b.of);x||(x=b.of);var J=M.cache,I={retryDelay:200,errorSelector:function(b){throw l("PIPELINE_LOAD_ERROR",a,b);},totalRetry:M.totalRetry||4,shouldRetry:k,onRetry:function(b){g.next(l("PIPELINE_LOAD_ERROR",a,b,!1))}};return function(a){return m(r,
a)["catch"](f).mergeMap(C,t).mergeMap(p,w)}}var d=a(7).Subject;h=a(123).asap;var b=a(1).Observable,c=a(36).retryWithBackoff,e=a(14),m=e.tryCatch,n=e.castToObservable;a=a(6);var r=a.RequestError,u=a.NetworkError,w=a.OtherError,t=a.RequestErrorTypes,p=a.isKnownError,q=h;f.exports=function(){var a=new d;return{createPipelines:function(b){var c=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],e={requiresMediaSource:function(){return!0!==b.directFile}},d;for(d in b)e[d]=g(d,b[d],a,c.errorStream,
c[d]);return e},metrics:a}}},function(f,h,a){function l(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?a:b}function k(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,
b):a.__proto__=b)}function g(a,b){return b?"seeking"==b.name?"SEEKING":"BUFFERING":a?"PLAYING":"PAUSED"}function d(){}function b(a){p(a.man,"player: no manifest loaded")}function c(a,b){return a.filter(function(a){return a.type==b}).map(function(a){return a.value})}var e=a(9),m=a(4).Subscription,n=a(7).Subject,r=a(27).BehaviorSubject,u=a(19).combineLatest,w=a(14).on;h=a(35);var t=a(160),p=a(3),q=a(13),y=q.HTMLVideoElement_,A=q.exitFullscreen,D=q.requestFullscreen,z=q.isFullscreen,B=q.onFullscreenChange,
q=a(55),v=q.getEmptyTimings,F=q.createTimingsSampler,C=q.toWallClockTime,E=q.fromWallClockTime,G=q.getLiveGap,q=a(6),K=q.ErrorTypes,L=q.ErrorCodes,H=a(136).InitializationSegmentCache,x=a(21).BufferedRanges,M=a(146).parseTimeFragment,J=a(137),I=a(34),O=a(152),N=a(142),S=a(133),ea=a(144),aa=a(51);a=function(a){function f(b){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");var c=b.videoElement,d=b.transport,g=b.transportOptions,h=b.defaultLanguage,k=b.defaultSubtitle,
m=b.initVideoBitrate;b=b.initAudioBitrate;var x=l(this,a.call(this));x._playPauseNext$=x._playPauseNext.bind(x);x._setPlayerState$=x._setPlayerState.bind(x);x._triggerTimeChange$=x._triggerTimeChange.bind(x);x._streamNext$=x._streamNext.bind(x);x._streamError$=x._streamError.bind(x);x._streamFatalError$=x._streamFatalError.bind(x);x._streamComplete$=x._streamComplete.bind(x);x.defaultTransport=d;x.defaultTransportOptions=g||{};c||(c=document.createElement("video"));p(c instanceof y,"requires an actual HTMLVideoElement");
c.preload="auto";x.version="2.0.0-alpha11";x.video=c;x.fullscreen=B(c).subscribe(function(){return x.trigger("fullscreenChange",x.isFullscreen())});x.playing=new r;x.stream=new n;x.images=new n;x.errorStream=new n;g=N();d=g.createPipelines;g=g.metrics;c=J(c);x.createPipelines=d;x.metrics=g;x.adaptive=S(g,c,{initVideoBitrate:m,initAudioBitrate:b,defaultLanguage:h,defaultSubtitle:k});x.muted=.1;x._setPlayerState("STOPPED");x._resetStates();x.log=e;return x}k(f,a);f.getErrorTypes=function(){return K};
f.getErrorCodes=function(){return L};f.prototype._resetStates=function(){this.man=null;this.reps={video:null,audio:null,text:null,images:null};this.adas={video:null,audio:null,text:null,images:null};this.evts={};this.frag={start:null,end:null};this.error=null};f.prototype._unsubscribe=function(){this.subscriptions&&(this.subscriptions.unsubscribe(),this.subscriptions=null);this.images.next(null)};f.prototype.stop=function(){"STOPPED"!==this.state&&(this._resetStates(),this._unsubscribe(),this._setPlayerState("STOPPED"))};
f.prototype.dispose=function(){this.stop();this.metrics.unsubscribe();this.adaptive.unsubscribe();this.fullscreen.unsubscribe();this.stream.unsubscribe();this.video=this.createPipelines=this.stream=this.fullscreen=this.adaptive=this.metrics=null};f.prototype._recordState=function(a,b){this.evts[a]!==b&&(this.evts[a]=b,this.trigger(a+"Change",b))};f.prototype._parseOptions=function(a){var b=a=Object.assign({transport:this.defaultTransport,transportOptions:{},keySystems:[],timeFragment:{},subtitles:[],
images:[],autoPlay:!1,directFile:!1},a),c=b.transport,e=b.url,d=b.keySystems,g=b.timeFragment,f=b.subtitles,h=a,b=h.transportOptions,k=h.manifests,l=h.autoPlay,m=h.directFile,h=h.images,g=M(g);m&&(c="directfile");p(!!k^!!e,"player: you have to pass either a url or a list of manifests");k&&(d=k[0],e=d.url,f=d.subtitles||[],d=k.map(function(a){return a.keySystem}).filter(Boolean));"string"==typeof c&&(c=O[c]);"function"==typeof c&&(c=c(Object.assign({},this.defaultTransportOptions,b)));p(c,"player: transport "+
a.transport+" is not supported");return{url:e,keySystems:d,subtitles:f,images:h,timeFragment:g,autoPlay:l,transport:c}};f.prototype.loadVideo=function(){var a=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],a=this._parseOptions(a);e.info("loadvideo",a);var b=a.url,f=a.keySystems,h=a.subtitles,k=a.images,l=a.timeFragment,x=a.autoPlay,n=a.transport;this.stop();this.frag=l;this.playing.next(x);var C=this.video,q=this.adaptive,a=this.errorStream,p=this.createPipelines(n,{errorStream:a,audio:{cache:new H},
video:{cache:new H}}),n=F(C,{requiresMediaSource:p.requiresMediaSource()}),b=ea({url:b,errorStream:a,keySystems:f,subtitles:h,timings:n,images:k,timeFragment:l,adaptive:q,pipelines:p,videoElement:C,autoPlay:x}).publish(),h=c(b,"stalled").startWith(null),f=c(b,"loaded").take(1).share(),h=f.mapTo("LOADED").concat(u(this.playing,h,g)).distinctUntilChanged().startWith("LOADING"),C=w(C,["play","pause"]),k=this.subscriptions=new m;k.add(C.subscribe(this._playPauseNext$,d));k.add(h.subscribe(this._setPlayerState$,
d));k.add(n.subscribe(this._triggerTimeChange$,d));k.add(b.subscribe(this._streamNext$,this._streamFatalError$,this._streamComplete$));k.add(a.subscribe(this._streamError$));k.add(b.connect());this.subscriptions?this._triggerTimeChange():k.unsubscribe();return f};f.prototype._streamNext=function(a){var b=a.type,c=a.value;"buffer"==b&&this._bufferNext(c);"manifest"==b&&this._manifestNext(c);"pipeline"==b&&(this.trigger("progress",c.segment),b=c.parsed,"image"===c.bufferType&&this.images.next(b.segmentData));
this.stream.next(a)};f.prototype._streamError=function(a){this.trigger("warning",a);this.stream.next({type:"warning",value:a})};f.prototype._streamFatalError=function(a){this._resetStates();this.error=a;this._setPlayerState("STOPPED");this._unsubscribe();this.trigger("error",a);this.stream.next({type:"error",value:a})};f.prototype._streamComplete=function(){this._resetStates();this._setPlayerState("ENDED");this._unsubscribe();this.stream.next({type:"ended",value:null})};f.prototype._manifestNext=
function(a){this.man=a;this.trigger("manifestChange",a)};f.prototype._bufferNext=function(a){var b=a.bufferType,c=a.adaptation;a=a.representation;this.reps[b]=a;this.adas[b]=c;"text"==b&&this._recordState("subtitle",c&&c.lang||"");"video"==b&&this._recordState("videoBitrate",a&&a.bitrate||-1);"audio"==b&&(this._recordState("language",c&&c.lang||""),this._recordState("audioBitrate",a&&a.bitrate||-1))};f.prototype._playPauseNext=function(a){!0!==this.video.ended&&this.playing.next("play"==a.type)};
f.prototype._setPlayerState=function(a){this.state!==a&&(this.state=a,e.info("playerStateChange",a),this.trigger("playerStateChange",a))};f.prototype._triggerTimeChange=function(a){this.man&&a?(this.man.isLive&&0<a.ts&&(a.wallClockTime=C(a.ts,this.man),a.liveGap=G(a.ts,this.man)),this.trigger("currentTimeChange",a)):this.trigger("currentTimeChange",v())};f.prototype.getError=function(){return this.error};f.prototype.getManifest=function(){return this.man};f.prototype.getVideoElement=function(){return this.video};
f.prototype.getNativeTextTrack=function(){return 0<this.video.textTracks.length?this.video.textTracks[0]:null};f.prototype.getImageTrack=function(){return this.images};f.prototype.getPlayerState=function(){return this.state};f.prototype.isLive=function(){b(this);return this.man.isLive};f.prototype.getUrl=function(){b(this);return this.man.locations[0]};f.prototype.getVideoDuration=function(){return this.video.duration};f.prototype.getVideoLoadedTime=function(){return(new x(this.video.buffered)).getSize(this.video.currentTime)};
f.prototype.getVideoPlayedTime=function(){return(new x(this.video.buffered)).getLoaded(this.video.currentTime)};f.prototype.getCurrentTime=function(){if(!this.man)return 0;var a=this.video.currentTime;return this.man.isLive?C(a,this.man):a};f.prototype.getStartTime=function(){return this.frag.start};f.prototype.getEndTime=function(){return this.frag.end};f.prototype.getPlaybackRate=function(){return this.video.playbackRate};f.prototype.getVolume=function(){return this.video.volume};f.prototype.isFullscreen=
function(){return z()};f.prototype.getAvailableLanguages=function(){return this.man&&I.getAvailableLanguages(this.man)||[]};f.prototype.getAvailableSubtitles=function(){return this.man&&I.getAvailableSubtitles(this.man)||[]};f.prototype.getLanguage=function(){return this.adaptive.getLanguage()};f.prototype.getSubtitle=function(){return this.adaptive.getSubtitle()};f.prototype.getAvailableVideoBitrates=function(){var a=I.getAdaptationsByType(this.man,"video");return a[0]&&a[0].bitrates.slice()||[]};
f.prototype.getAvailableAudioBitrates=function(){var a=this.adas.audio;return a&&a.bitrates.slice()||[]};f.prototype.getVideoBitrate=function(){return this.evts.videoBitrate};f.prototype.getAudioBitrate=function(){return this.evts.audioBitrate};f.prototype.getVideoMaxBitrate=function(){return this.adaptive.getVideoMaxBitrate()};f.prototype.getAudioMaxBitrate=function(){return this.adaptive.getAudioMaxBitrate()};f.prototype.getVideoBufferSize=function(){return this.adaptive.getVideoBufferSize()};f.prototype.getAudioBufferSize=
function(){return this.adaptive.getAudioBufferSize()};f.prototype.getAverageBitrates=function(){return this.adaptive.getAverageBitrates()};f.prototype.getMetrics=function(){return this.metrics};f.prototype.play=function(){this.video.play()};f.prototype.pause=function(){this.video.pause()};f.prototype.setPlaybackRate=function(a){this.video.playbackRate=a};f.prototype.goToStart=function(){return this.seekTo(this.getStartTime())};f.prototype.seekTo=function(a){p(this.man);var b=this.video.currentTime;
this.man.isLive&&(a=E(a,this.man));return a!==b?(e.info("seek to",a),this.video.currentTime=a):b};f.prototype.setFullscreen=function(){!1===(0>=arguments.length||void 0===arguments[0]?!0:arguments[0])?A():D(this.video)};f.prototype.setVolume=function(a){a!==this.video.volume&&(this.video.volume=a,this.trigger("volumeChange",a))};f.prototype.mute=function(){this.muted=this.getVolume()||.1;this.setVolume(0)};f.prototype.unMute=function(){0===this.getVolume()&&this.setVolume(this.muted)};f.prototype.setLanguage=
function(a){p(0<=this.getAvailableLanguages().indexOf(a),"player: unknown language");this.adaptive.setLanguage(a)};f.prototype.setSubtitle=function(a){p(!a||0<=this.getAvailableSubtitles().indexOf(a),"player: unknown subtitle");this.adaptive.setSubtitle(a||"");a||this._recordState("subtitle","")};f.prototype.setVideoBitrate=function(a){p(0===a||0<=this.getAvailableVideoBitrates().indexOf(a),"player: video bitrate unavailable");this.adaptive.setVideoBitrate(a)};f.prototype.setAudioBitrate=function(a){p(0===
a||0<=this.getAvailableAudioBitrates().indexOf(a),"player: audio bitrate unavailable");this.adaptive.setAudioBitrate(a)};f.prototype.setVideoMaxBitrate=function(a){this.adaptive.setVideoMaxBitrate(a)};f.prototype.setAudioMaxBitrate=function(a){this.adaptive.setAudioMaxBitrate(a)};f.prototype.setVideoBufferSize=function(a){this.adaptive.setVideoBufferSize(a)};f.prototype.setAudioBufferSize=function(a){this.adaptive.setAudioBufferSize(a)};f.prototype.asObservable=function(){return this.stream};f.prototype.getDebug=
function(){return t.getDebug(this)};f.prototype.showDebug=function(){t.showDebug(this,this.video)};f.prototype.hideDebug=function(){t.hideDebug()};f.prototype.toggleDebug=function(){t.toggleDebug(this,this.video)};f.prototype.getCurrentKeySystem=function(){return aa.getCurrentKeySystem()};return f}(h);f.exports=a},function(f,h,a){function l(a){return"audio"==a||"video"==a}var k=a(9),g=a(3);h=a(55);var d=h.getLiveGap,b=h.seekingsSampler,c=h.fromWallClockTime,e=a(36).retryableFuncWithBackoff,m=a(1).Observable,
n=a(14).on,r=a(5).EmptyObservable.create,u=a(11).merge,w=a(19).combineLatest,t=Math.min;h=a(13);var p=h.MediaSource_,q=h.sourceOpen,y=h.canPlay,A=h.canSeek,D=h.clearVideoSrc,z=a(145),B=a(138),v=a(52).getLiveEdge;h=a(134);var F=h.Buffer,C=h.EmptyBuffer;h=a(51);var E=h.createEME,G=h.onEncrypted;h=a(6);var K=h.MediaError,L=h.OtherError,H=h.EncryptedMediaError,x=h.isKnownError;a=a(34);var M=a.normalizeManifest,J=a.mergeManifestsIndex,I=a.mutateManifestLiveGap,O=a.getAdaptations;f.exports=function(a){function f(a,
b,c){var e=c.type;c=c.codec;var d=void 0;if(l(e))Y[e]?d=Y[e]:(k.info("add sourcebuffer",c),d=b.addSourceBuffer(c),Y[e]=d);else{if(b=V[e])try{b.abort()}catch(g){k.warn(g)}finally{delete V[e]}if("text"==e)k.info("add text sourcebuffer",c),d=new z(a,c);else if("image"==e)k.info("add image sourcebuffer",c),d=new B(c);else throw k.error("unknown buffer type "+e),new K("BUFFER_TYPE_UNKNOWN",null,!0);V[e]=d}return d}function h(a,b,c){a=c.type;c=void 0;var e=l(a);e?(c=Y[a],delete Y[a]):(c=V[a],delete V[a]);
if(c)try{c.abort(),e&&b.removeSourceBuffer(c)}catch(d){k.warn(d)}}function aa(a){var c=ka.map(function(b){var c=void 0;qa?(c=b.clone(),c.ts=t(b.ts,Z),c.duration=t(b.duration,Z)):c=b;c.liveGap=d(b.ts,a);return c}),e=b(c);return{timings:c,seekings:e}}function ba(a,b,c,e){var d=b.type;return ia.getAdaptationsChoice(d,b.adaptations).switchMap(function(g){if(!g)return h(P,a,b),C(d);var m=ia.getBufferAdapters(g);g=F({bufferType:d,sourceBuffer:f(P,a,b),pipeline:da[d],adaptation:g,timings:c,seekings:e,adapters:m});
return l(d)?g:g["catch"](function(a){k.error("buffer",d,"has crashed",a);fa.next(a);return r()})})}function T(a){var b=A(P)["do"](function(){var b=a.duration,e=pa,d=Z,f=/^\d*(\.\d+)? ?%$/;"string"==typeof e&&f.test(e)&&(e=parseFloat(e)/100*b);"string"==typeof d&&f.test(d)&&(Z=parseFloat(d)/100*b);if(Infinity===d||"100%"===d)d=b;a.isLive?e=e?c(e,a):v(a):g(e<b&&d<=b,"stream: bad startTime and endTime");k.info("set initial time",e);P.playbackRate=1;P.currentTime=e}),e=y(P)["do"](function(){k.info("canplay event");
ja&&P.play();ja=!0});return w(b,e).take(1).mapTo({type:"loaded",value:!0})}function Q(){return ga&&ga.length?E(P,ga,fa):G(P).map(function(){k.error("eme: ciphered media and no keySystem passed");throw new H("MEDIA_IS_ENCRYPTED_ERROR",null,!0);})}function U(a,b){var c=b.changePlaybackRate,e=void 0===c?!0:c;return a.distinctUntilChanged(function(a,b){var c=b.stalled,d=a.stalled,g=void 0,g=d||c?d&&c?d.name==c.name:!1:!0;!g&&e&&(d?(k.info("resume playback",b.ts,b.name),P.playbackRate=d.playback):(k.info("stop playback",
b.ts,b.name),P.playbackRate=0));c&&(c=b.buffered.getNextRangeGap(b.ts),1>c&&(d=b.ts+c+1/60,P.currentTime=d,k.warn("discontinuity seek",b.ts,c,d)));return g}).map(function(a){return{type:"stalled",value:a.stalled}})}function W(a){return a&&"out-of-index"==a.type}function R(a,b){if(W(b))return k.info("out of index"),la({url:a.locations[0]}).map(function(b){b=b.parsed;return{type:"manifest",value:J(a,M(b.url,b.manifest,ha))}});b&&"precondition-failed"==b.type&&(I(a,1),k.warn("precondition failed",a.presentationLiveGap));
return m.of(b)}function X(a,b,c,e){var d=O(b).map(function(b){return ba(a,b,c,e)}),d=u.apply(null,d);return b.isLive?d.distinctUntilChanged(function(a,b){return W(b)&&W(a)}).concatMap(function(a){return R(b,a)}):d}function ma(){return n(P,"error").mergeMap(function(){var a=void 0;switch(P.error.code){case 1:a="MEDIA_ERR_ABORTED";break;case 2:a="MEDIA_ERR_NETWORK";break;case 3:a="MEDIA_ERR_DECODE";break;case 4:a="MEDIA_ERR_SRC_NOT_SUPPORTED"}k.error("stream: video element MEDIA_ERR("+a+")");throw new K(a,
null,!0);})}var na=a.url,fa=a.errorStream,ga=a.keySystems,ha=a.subtitles,oa=a.images,ka=a.timings,ca=a.timeFragment,ia=a.adaptive,da=a.pipelines,P=a.videoElement,ja=a.autoPlay,pa=ca.start,qa=Infinity>Z,Z=ca.end,la=da.manifest,Y={},V={};a=ka.filter(function(a){var b=a.ts;a=a.duration;return 0<a&&.2>t(a,Z)-b});ca=e(function(a){var b=a.url,c=a.mediaSource;a=c?q(c):m.of(null);return w(la({url:b}),a).mergeMap(function(a){a=a[0].parsed;a=M(a.url,a.manifest,ha,oa);if(c){var b=void 0,b=Infinity===a.duration?
Number.MAX_VALUE:a.duration;c.duration!==b&&(c.duration=b,k.info("set duration",c.duration))}var b=aa(a),e=b.timings,d=b.seekings,b=m.of({type:"manifest",value:a}),g=Q(),f=U(e,{changePlaybackRate:da.requiresMediaSource()}),f=T(a).concat(f);a=X(c,a,e,d);e=ma();return u(b,f,g,a,e)})},{totalRetry:3,retryDelay:250,resetDelay:6E4,shouldRetry:function(a){return!0!==a.fatal},errorSelector:function(a){x(a)||(a=new L("NONE",a,!0));a.fatal=!0;return a},onRetry:function(a,b){k.warn("stream retry",a,b);fa.next(a)}});
return function(a,b){return m.create(function(c){var e=void 0,d=void 0;if(da.requiresMediaSource()){if(!p)throw new K("MEDIA_SOURCE_NOT_SUPPORTED",null,!0);e=new p;d=URL.createObjectURL(e)}else e=null,d=a;b.src=d;c.next({url:a,mediaSource:e});k.info("create mediasource object",d);return function(){if(e&&"closed"!=e.readyState)for(var a=e,c=a.readyState,a=a.sourceBuffers,g=0;g<a.length;g++){var f=a[g];try{"open"==c&&f.abort(),e.removeSourceBuffer(f)}catch(h){k.warn("error while disposing souceBuffer",
h)}}Object.keys(V).forEach(function(a){a=V[a];try{a.abort()}catch(b){k.warn("error while disposing souceBuffer",b)}});D(b);if(d)try{URL.revokeObjectURL(d)}catch(h){k.warn("error while revoking ObjectURL",h)}d=e=V=Y=null}})}(na,P).mergeMap(ca).takeUntil(a)}},function(f,h,a){function l(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,
configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}h=a(54).AbstractSourceBuffer;var k=a(13),g=k.addTextTrack,d=k.isVTTSupported,b=a(9),c=window.VTTCue||window.TextTrackCue;a=function(a){function f(b,c){if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");var d;d=a.call(this,c);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");d=!d||"object"!==typeof d&&"function"!==typeof d?this:d;d.video=
b;d.codec=c;d.isVTT=/^text\/vtt/.test(c);var h=g(b),k=h.trackElement;d.track=h.track;d.trackElement=k;return d}l(f,a);f.prototype.createCuesFromArray=function(a){for(var b=[],e=0;e<a.length;e++){var d=a[e],g=d.start,f=d.end;(d=d.text)&&b.push(new c(g,f,d))}return b};f.prototype._append=function(a){var c=this;if(this.isVTT&&d())a=new Blob([a],{type:"text/vtt"}),a=URL.createObjectURL(a),this.trackElement?(this.trackElement.src=a,this.buffered.insert(0,Infinity)):b.warn("vtt subtitles not supported");
else if(a=this.createCuesFromArray(a),0<a.length){var e=a[0],g=a[a.length-1],f=this.track.cues;0<f.length&&e.startTime<f[f.length-1].endTime&&this._remove(0,Infinity);a.forEach(function(a){return c.track.addCue(a)});this.buffered.insert(0,e.startTime,g.endTime)}};f.prototype._remove=function(a,b){for(var c=this.track,e=c.cues,d=0;d<e.length;d++){var g=e[d],f=g.startTime,h=g.endTime;f>=a&&f<=b&&h<=b&&c.removeCue(g)}this.buffered.remove(a,b)};f.prototype._abort=function(){var a=this.trackElement,b=
this.video;a&&b&&b.hasChildNodes(a)&&b.removeChild(a);this.track.mode="disabled";this.size=0;this.video=this.track=this.trackElement=null};return f}(h);f.exports=a},function(f,h,a){function l(a){if(!a)return!1;a=a.replace(/^npt\:/,"").replace(/\.$/,"");var d=void 0,g=void 0,f=void 0;a=a.split(":");var h=a.length;switch(h){case 3:d=parseInt(a[0],10);g=parseInt(a[1],10);f=parseFloat(a[2]);break;case 2:d=0;g=parseInt(a[0],10);f=parseFloat(a[1]);break;case 1:g=d=0;f=parseFloat(a[0]);break;default:return!1}b(23>=
d,c);b(59>=g,c);b(1>=h||60>f,c);return 3600*d+60*g+f}function k(a){if(!a)return!1;var d=void 0,g=void 0,f=void 0,h=void 0,k=void 0;a=a.split(":");switch(a.length){case 3:d=parseInt(a[0],10);g=parseInt(a[1],10);f=parseInt(a[2],10);k=h=0;break;case 4:d=parseInt(a[0],10);g=parseInt(a[1],10);f=parseInt(a[2],10);-1===a[3].indexOf(".")?(h=parseInt(a[3],10),k=0):(a=a[3].split("."),h=parseInt(a[0],10),k=parseInt(a[1],10));break;default:return!1}b(23>=d,c);b(59>=g,c);b(59>=f,c);return 3600*d+60*g+f+.001*h+
1E-6*k}function g(a){return new Date(Date.parse(a))}function d(a){return a?a:!1}var b=a(3),c="invalid MediaFragment";f.exports={parseTimeFragment:function(a){if("string"==typeof a){var f=a,h=f.split(",");b(2>=h.length,c);a=h[0]?h[0]:"";h=h[1]?h[1]:"";b((a||h)&&(!a||h||-1===f.indexOf(",")),c);a=a.replace(/^smpte(-25|-30|-30-drop)?\:/,"").replace("clock:","");var f=/^((npt\:)?((\d+\:(\d\d)\:(\d\d))|((\d\d)\:(\d\d))|(\d+))(\.\d*)?)?$/,r=/^(\d+\:\d\d\:\d\d(\:\d\d(\.\d\d)?)?)?$/,u=/^((\d{4})(-(\d{2})(-(\d{2})(T(\d{2})\:(\d{2})(\:(\d{2})(\.(\d+))?)?(Z|(([-\+])(\d{2})\:(\d{2})))?)?)?)?)?$/,
w=/^(\d*(\.\d+)? ?%)?$/,t=void 0;if(f.test(a)&&f.test(h))t=l;else if(r.test(a)&&r.test(h))t=k;else if(u.test(a)&&u.test(h))t=g;else if(w.test(a)&&w.test(h))t=d;else throw Error(c);a=t(a);h=t(h);b(!1!==a||!1!==h,c);a={start:!1===a?"":a,end:!1===h?"":h}}else a||(a={});"string"==typeof a.start&&"string"==typeof a.end?(a.start||(a.start="0%"),a.end||(a.end="100%")):(a.start||(a.start=0),a.end||(a.end=Infinity));"string"==typeof a.start&&"string"==typeof a.end?(b(0<=parseFloat(a.start)&&100>=parseFloat(a.start),
"player: startTime should be between 0% and 100%"),b(0<=parseFloat(a.end)&&100>=parseFloat(a.end),"player: endTime should be between 0% and 100%")):(b(("number"==typeof a.start||a.start instanceof Date)&&("number"==typeof a.end||a.end instanceof Date),"player: timeFragment should have interface { start, end } where start and end are numbers or dates"),b(a.start<a.end,"player: startTime should be lower than endTime"),b(0<=a.start,"player: startTime should be greater than 0"));return a}}},function(f,
h,a){h=a(18);var l=h.le2toi,k=h.le4toi,g=h.bytesToStr;f.exports={parseBif:function(a){var b=0,c=a.length,e=g(a.subarray(b,b+8)),b=b+8,f=a[b],b=b+1,h=a[b],b=b+1,r=a[b],b=b+1,u=a[b],b=b+1,f=[f,h,r,u].join("."),h=a[b]+k(a,b+1),b=b+4,r=k(a,b),b=b+4,u=g(a.subarray(b,b+4)),b=b+4,w=l(a,b),b=b+2,t=l(a,b),b=b+2,p=[a[b],a[b+1]].join(":"),q=1===a[b+2],b=64,y=[],A=void 0,D=0;if(!h)throw Error("bif: no images to parse");for(;b<c;){var z=k(a,b),b=b+4,B=k(a,b),b=b+4;if(A){var v=A.index,F=r,C=D,A=a.subarray(A.offset,
B);y.push({index:v,duration:F,ts:C,data:A});D+=r}if(4294967295===z)break;A={index:z,offset:B}}return{fileFormat:e,version:f,imageCount:h,timescale:r,format:u,width:w,height:t,aspectRatio:p,isVod:q,thumbs:y}}}},function(f,h,a){function l(a){var b=a[0];return(a=a[1])&&Infinity!==a?"bytes="+ +b+"-"+ +a:"bytes="+ +b+"-"}function k(a){return function(b,c,d){b=d?parseInt(d,10):1;c=""+a;c=c.toString();b=c.length>=b?c:(Array(b+1).join("0")+c).slice(-b);return b}}var g=a(1).Observable,d=a(5).EmptyObservable.create,
b=a(11).merge;a(3);var c=a(37).resolveURL;h=a(149);var e=h.parseSidx,m=h.patchPssh,n=a(56),r=a(150);f.exports=function(){var a=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],f=a.contentProtectionParser;f||(f=function(){});var h=a.createXHR,a={loader:function(a){var e=a.segment,g=e.getMedia(),f=e.getRange();a=e.getIndexRange();if(e.isInitSegment()&&!(g||f||a))return d();var m=void 0,m=f?{Range:l(f)}:null,f=void 0;g?-1===g.indexOf("$")?f=g:(f=e.getRepresentation(),f=g.replace(/\$\$/g,"$").replace(/\$RepresentationID\$/g,
f.id).replace(/\$Bandwidth(|\%0(\d+)d)\$/g,k(f.bitrate)).replace(/\$Number(|\%0(\d+)d)\$/g,k(e.getNumber())).replace(/\$Time(|\%0(\d+)d)\$/g,k(e.getTime()))):f="";e=c(e.getResolvedURL(),f);m=n({url:e,responseType:"arraybuffer",headers:m,createXHR:h});return a?(a=n({url:e,responseType:"arraybuffer",headers:{Range:l(a)},createXHR:h}),b(m,a)):m},parser:function(a){var b=a.segment;a=new Uint8Array(a.response.responseData);var c=void 0,d=void 0,f=void 0,h=b.getIndexRange();if(h=e(a,h?h[0]:0))c=h.segments,
d=h.timescale;b.isInitSegment()||(0<=b.getTime()&&0<=b.getDuration()?f={ts:b.getTime(),d:b.getDuration()}:h&&1===h.segments.length&&(f={ts:h.segments[0].ts,d:h.segments[0].d}));h=a;b.isInitSegment()&&(b=b.getAdaptation(),b.contentProtection&&(h=m(a,b.contentProtection)));return g.of({segmentData:h,currentSegment:f,nextSegments:c,timescale:d})}};return{directFile:!1,manifest:{loader:function(a){return n({url:a.url,responseType:"document",createXHR:h})},parser:function(a){a=a.response;return g.of({manifest:r(a.responseData,
f),url:a.url})}},audio:a,video:a,text:{loader:function(){}}}}},function(f,h,a){function l(a,b){for(var d=a.length,e=0,f=void 0,h=void 0;e+8<d&&(h=c(a,e),f=c(a,e+4),g(0<h,"dash: out of range size"),f!==b);)e+=h;if(e>=d)return-1;g(e+h<=d,"dash: atom out of range");return e}function k(a){var b=a.systemId;a=a.privateData;b=b.replace(/-/g,"");g(32===b.length);b=r(4,m(b),d(a.length),a);return r(d(b.length+8),n("pssh"),b)}var g=a(3);h=a(18);var d=h.itobe4,b=h.be8toi,c=h.be4toi,e=h.be2toi,m=h.hexToBytes,
n=h.strToBytes,r=h.concat;f.exports={parseSidx:function(a,d){var f=l(a,1936286840);if(-1==f)return null;var g=c(a,f),f=f+4+4,h=a[f],f=f+8,k=c(a,f),f=f+4,m=void 0;if(0===h)m=c(a,f),f+=4,d+=c(a,f)+g,f+=4;else if(1===h)m=b(a,f),f+=8,d+=b(a,f)+g,f+=8;else return null;g=[];f+=2;h=e(a,f);for(f+=2;0<=--h;){var n=c(a,f),f=f+4,r=n&2147483647;if(1==(n&2147483648)>>>31)throw Error("not implemented");n=c(a,f);f+=4;f+=4;g.push({ts:m,d:n,r:0,range:[d,d+r-1]});m+=n;d+=r}return{segments:g,timescale:k}},patchPssh:function(a,
b){if(!b||!b.length)return a;var e=l(a,1836019574);if(-1==e)return a;for(var f=c(a,e),g=[a.subarray(e,e+f)],h=0;h<b.length;h++)g.push(k(b[h]));g=r.apply(null,g);g.set(d(g.length),0);return r(a.subarray(0,e),g,a.subarray(e+f))}}},function(f,h,a){function l(a){var b=a.timeline[a.timeline.length-1];return(b.ts+(b.r+1)*b.d)/a.timescale}function k(a,b){var c=H[a.nodeName];C(c,"no attributes for "+a.nodeName);for(var d=b||{},e=0;e<c.length;e++){var f=c[e],g=f.k,h=f.fn,k=f.n,f=f.def;a.hasAttribute(g)?d[k||
g]=h(a.getAttribute(g)):null!=f&&(d[k||g]=f)}return d}function g(a){return a}function d(a){return"true"==a}function b(a){return"true"==a?!0:"false"==a?!1:parseInt(a)}function c(a){return new Date(Date.parse(a))}function e(a){if(!a)return 0;var b=E.exec(a);C(b,a+" is not a valid ISO8601 duration");return 31536E3*parseFloat(b[2]||0)+2592E3*parseFloat(b[4]||0)+86400*parseFloat(b[6]||0)+3600*parseFloat(b[8]||0)+60*parseFloat(b[10]||0)+parseFloat(b[12]||0)}function m(a){var b=K.exec(a);if(!b)return-1;
a=parseInt(b[1])||0;b=parseInt(b[2])||0;return 0<b?a/b:a}function n(a){return a}function r(a){return(a=G.exec(a))?[+a[1],+a[2]]:null}function u(a,b,c){for(a=a.firstElementChild;a;)c=b(c,a.nodeName,a),a=a.nextElementSibling;return c}function w(a){var b=u(a,function(a,b,c){if("Initialization"==b){var d=b=void 0;c.hasAttribute("range")&&(b=r(c.getAttribute("range")));c.hasAttribute("sourceURL")&&(d=c.getAttribute("sourceURL"));a.initialization={range:b,media:d}}return a},k(a));"SegmentBase"==a.nodeName&&
(b.indexType="base",b.timeline=[]);return b}function t(a){return u(a,function(a,b,c){"SegmentTimeline"==b&&(a.indexType="timeline",a.timeline=p(c));return a},w(a))}function p(a){return u(a,function(a,b,c){b=a.length;c=k(c);null==c.ts&&(b=0<b&&a[b-1],c.ts=b?b.ts+b.d*(b.r+1):0);null==c.r&&(c.r=0);a.push(c);return a},[])}function q(a){a=t(a);a.indexType||(a.indexType="template");return a}function y(a){var b=t(a);b.list=[];b.indexType="list";return u(a,function(a,b,c){"SegmentURL"==b&&a.list.push(k(c));
return a},b)}function A(a){var b=u(a,function(a,b,c){switch(b){case "BaseURL":a.baseURL=c.textContent;break;case "SegmentBase":a.index=w(c);break;case "SegmentList":a.index=y(c);break;case "SegmentTemplate":a.index=q(c)}return a},{});return k(a,b)}function D(a,b){var c=u(a,function(a,c,d){switch(c){case "ContentProtection":c=b(k(d),d);a.contentProtection=c;break;case "ContentComponent":a.contentComponent=k(d);break;case "BaseURL":a.baseURL=d.textContent;break;case "SegmentBase":a.index=w(d);break;
case "SegmentList":a.index=y(d);break;case "SegmentTemplate":a.index=q(d);break;case "Representation":c=A(d),null==c.id&&(c.id=a.representations.length),a.representations.push(c)}return a},{representations:[]});return k(a,c)}function z(a,b){var c=k(a,u(a,function(a,c,d){switch(c){case "BaseURL":a.baseURL=d.textContent;break;case "AdaptationSet":c=D(d,b),null==c.id&&(c.id=a.adaptations.length),a.adaptations.push(c)}return a},{adaptations:[]}));c.baseURL&&c.adaptations.forEach(function(a){return Object.assign({baseURL:c.baseURL},
a)});return c}function B(a,b){var c=a.documentElement;C.equal(c.nodeName,"MPD","document root should be MPD");var d=u(c,function(a,c,d){switch(c){case "BaseURL":a.baseURL=d.textContent;break;case "Location":a.locations.push(d.textContent);break;case "Period":a.periods.push(z(d,b))}return a},{transportType:"dash",periods:[],locations:[]}),d=k(c,d);if(/dynamic/.test(d.type)){var c=(c=d.periods[0].adaptations.filter(function(a){return"video/mp4"==a.mimeType})[0])&&c.index,e=void 0,e=c.timeline?l(c):
Date.now()/1E3-60;d.availabilityStartTime=d.availabilityStartTime.getTime()/1E3;d.presentationLiveGap=Date.now()/1E3-(e+d.availabilityStartTime)}return d}function v(a,b){return B((new DOMParser).parseFromString(a,"application/xml"),b)}function F(a,b){return"string"==typeof a?v(a,b):B(a,b)}var C=a(3),E=/^P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,G=/([0-9]+)-([0-9]+)/,K=/([0-9]+)(\/([0-9]+))?/;h=[{k:"profiles",fn:g},{k:"width",fn:parseInt},{k:"height",fn:parseInt},
{k:"frameRate",fn:m},{k:"audioSamplingRate",fn:g},{k:"mimeType",fn:g},{k:"segmentProfiles",fn:g},{k:"codecs",fn:g},{k:"maximumSAPPeriod",fn:parseFloat},{k:"maxPlayoutRate",fn:parseFloat},{k:"codingDependency",fn:d}];a=[{k:"timescale",fn:parseInt},{k:"presentationTimeOffset",fn:parseFloat,def:0},{k:"indexRange",fn:r},{k:"indexRangeExact",fn:d},{k:"availabilityTimeOffset",fn:parseFloat},{k:"availabilityTimeComplete",fn:d}];var L=a.concat([{k:"duration",fn:parseInt},{k:"startNumber",fn:parseInt}]),H=
{ContentProtection:[{k:"schemeIdUri",fn:g},{k:"value",fn:g}],SegmentURL:[{k:"media",fn:g},{k:"mediaRange",fn:r},{k:"index",fn:g},{k:"indexRange",fn:r}],S:[{k:"t",fn:parseInt,n:"ts"},{k:"d",fn:parseInt},{k:"r",fn:parseInt}],SegmentTimeline:[],SegmentBase:a,SegmentTemplate:L.concat([{k:"initialization",fn:function(a){return{media:a,range:void 0}}},{k:"index",fn:g},{k:"media",fn:g},{k:"bitstreamSwitching",fn:g}]),SegmentList:L,ContentComponent:[{k:"id",fn:g},{k:"lang",fn:g},{k:"contentType",fn:g},{k:"par",
fn:n}],Representation:h.concat([{k:"id",fn:g},{k:"bandwidth",fn:parseInt,n:"bitrate"},{k:"qualityRanking",fn:parseInt}]),AdaptationSet:h.concat([{k:"id",fn:g},{k:"group",fn:parseInt},{k:"lang",fn:g},{k:"contentType",fn:g},{k:"par",fn:n},{k:"minBandwidth",fn:parseInt,n:"minBitrate"},{k:"maxBandwidth",fn:parseInt,n:"maxBitrate"},{k:"minWidth",fn:parseInt},{k:"maxWidth",fn:parseInt},{k:"minHeight",fn:parseInt},{k:"maxHeight",fn:parseInt},{k:"minFrameRate",fn:m},{k:"maxFrameRate",fn:m},{k:"segmentAlignment",
fn:b},{k:"subsegmentAlignment",fn:b},{k:"bitstreamSwitching",fn:d}]),Period:[{k:"id",fn:g},{k:"start",fn:e},{k:"duration",fn:e},{k:"bitstreamSwitching",fn:d}],MPD:[{k:"id",fn:g},{k:"profiles",fn:g},{k:"type",fn:g,def:"static"},{k:"availabilityStartTime",fn:c},{k:"availabilityEndTime",fn:c},{k:"publishTime",fn:c},{k:"mediaPresentationDuration",fn:e,n:"duration"},{k:"minimumUpdatePeriod",fn:e},{k:"minBufferTime",fn:e},{k:"timeShiftBufferDepth",fn:e},{k:"suggestedPresentationDelay",fn:e},{k:"maxSegmentDuration",
fn:e},{k:"maxSubsegmentDuration",fn:e}]};F.parseFromString=v;F.parseFromDocument=B;f.exports=F},function(f,h,a){var l=a(1).Observable;f.exports={directFile:!0,manifest:{parser:function(a){a=a.url;return l.of({manifest:{transportType:"directfile",locations:[a],periods:[],isLive:!1,duration:Infinity,adaptations:null},url:a})}}}},function(f,h,a){f.exports={smooth:a(153),dash:a(148),directfile:a(151)}},function(f,h,a){function l(a){return a.responseData.getElementsByTagName("media")[0].getAttribute("src")}
function k(a){return(a=a.match(C))&&a[1]||""}function g(a,b){return b?a.replace(C,"?token="+b):a.replace(C,"")}function d(a){return a.getResolvedURL().replace(/\{bitrate\}/g,a.getRepresentation().bitrate).replace(/\{start time\}/g,a.getTime())}var b=a(1).Observable,c=a(5).EmptyObservable.create,e=a(18).bytesToStr,m=a(9),n=a(56),r=n.RequestResponse,u=a(155);h=a(154);var w=h.patchSegment,t=h.createVideoInitSegment,p=h.createAudioInitSegment,q=h.getMdat,y=h.getTraf,A=h.parseTfrf,D=h.parseTfxd,z=a(147).parseBif;
h=a(156).parseSami;a=a(157).parseTTML;var B={"application/x-sami":h,"application/smil":h,"application/ttml+xml":a,"application/ttml+xml+mp4":a,"text/vtt":function(a){return a}},v=/\.(isml?)(\?token=\S+)?$/,F=/\.wsx?(\?token=\S+)?/,C=/\?token=(\S+)/;f.exports=function(){function a(b,c){var d=void 0,e=void 0;if(c.getAdaptation().isLive){var f=y(b);f?(d=A(f),e=D(f)):m.warn("smooth: could not find traf atom")}else d=null;e||(e={d:c.getDuration(),ts:c.getTime()});return{nextSegments:d,currentSegment:e}}
var f=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],h=u(f),C=f.createXHR,f={loader:function(a){a=a.segment;if(a.isInitSegment()){var c=a.getAdaptation();a=a.getRepresentation();var e=void 0,f=c.smoothProtection||{};switch(c.type){case "video":e=t(a.index.timescale,a.width,a.height,72,72,4,a.codecPrivateData,f.keyId,f.keySystems);break;case "audio":e=p(a.index.timescale,a.channels,a.bitsPerSample,a.packetSize,a.samplingRate,a.codecPrivateData,f.keyId,f.keySystems)}return b.of(new r(200,
"","arraybuffer",Date.now()-100,Date.now(),e.length,e))}c=void 0;if(e=a.getRange())c=e[0],c=(e=e[1])&&Infinity!==e?"bytes="+ +c+"-"+ +e:"bytes="+ +c+"-",c={Range:c};a=d(a);return n({url:a,responseType:"arraybuffer",headers:c,createXHR:C})},parser:function(c){var d=c.segment;c=c.response.responseData;if(d.isInitSegment())return b.of({segmentData:c,timings:null});c=new Uint8Array(c);var e=a(c,d),d=e.nextSegments,e=e.currentSegment;c=w(c,e.ts);return b.of({segmentData:c,nextSegments:d,currentSegment:e})}};
return{directFile:!1,manifest:{resolver:function(a){a=a.url;var c=void 0,d=k(a),c=F.test(a)?n({url:g(a,""),responseType:"document",resultSelector:l,createXHR:C}):b.of(a);return c.map(function(a){var b=a.match(v);a=b?a.replace(b[1],b[1]+"/manifest"):a;return{url:g(a,d)}})},loader:function(a){return n({url:a.url,responseType:"document",createXHR:C})},parser:function(a){a=a.response;return b.of({manifest:h(a.responseData),url:a.url})}},audio:f,video:f,text:{loader:function(a){var b=a.segment;if(b.isInitSegment())return c();
a=b.getRepresentation().mimeType;b=d(b);return 0<=a.indexOf("mp4")?n({url:b,responseType:"arraybuffer",createXHR:C}):n({url:b,responseType:"text",createXHR:C})},parser:function(c){var d=c.response;c=c.segment;var f=c.getAdaptation().lang,g=c.getRepresentation(),h=g.mimeType,g=g.index,k=B[h];if(!k)throw Error("could not find a text-track parser for the type "+h);var l=d.responseData,d=void 0;0<=h.indexOf("mp4")?(l=new Uint8Array(l),d=e(q(l))):d=l;l=a(l,c);h=l.nextSegments;l=l.currentSegment;c=k(d,
f,c.getTime()/g.timescale);return b.of({segmentData:c,currentSegment:l,nextSegments:h})}},image:{loader:function(a){a=a.segment;if(a.init)return c();a=d(a);return n({url:a,responseType:"arraybuffer",createXHR:C})},parser:function(a){var c=new Uint8Array(a.response.responseData),d=a=void 0;c&&(c=z(c),a=c.thumbs,d=c.timescale);return b.of({segmentData:a,currentSegment:{ts:0,d:Infinity},timescale:d})}}}}},function(f,h,a){function l(a,b){var c=y(b.length+8),d;B[a]?d=B[a]:(d=r(a),B[a]=d);return n(c,d,
b)}function k(a,b,c,d,e){for(var f=a.length,g=0,h=void 0;g<f;){h=q(a,g);if(1970628964===q(a,g+4)&&q(a,g+8)===b&&q(a,g+12)===c&&q(a,g+16)===d&&q(a,g+20)===e)return a.subarray(g+24,g+h);g+=h}}function g(a,b){for(var c=a.length,d=0,f=void 0,g=void 0;d+8<c&&(g=q(a,d),f=q(a,d+4),e(0<g,"dash: out of range size"),f!==b);)d+=g;return d<c?a.subarray(d+8,d+g):null}function d(a,b,c,d){var e=[a,b,c];d.forEach(function(a){a=v.pssh(a.systemId,a.privateData,a.keyIds);e.push(a)});return e}function b(a,b,c,d){var e=
a.length,f=b.length;c=c.length;a=a.subarray(c,e);e=new Uint8Array(f+(e-c));e.set(b,0);e.set(a,f);e.set(y(b.length+8),d+16);return e}function c(a,b,c,e,f,g,h){c=v.mult("stbl",[c,l("stts",new Uint8Array(8)),l("stsc",new Uint8Array(8)),l("stsz",new Uint8Array(12)),l("stco",new Uint8Array(8))]);var k=l("url ",new Uint8Array([0,0,0,1])),k=v.dref(k),k=v.mult("dinf",[k]);e=v.mult("minf",[e,k,c]);b=v.hdlr(b);c=v.mdhd(a);b=v.mult("mdia",[c,b,e]);f=v.tkhd(f,g,1);f=v.mult("trak",[f,b]);g=v.trex(1);g=v.mult("mvex",
[g]);a=v.mvhd(a,1);h=v.mult("moov",d(a,g,f,h));a=v.ftyp("isom",["isom","iso2","iso6","avc1","dash"]);return n(a,h)}var e=a(3),m=a(13).isIE;h=a(18);var n=h.concat,r=h.strToBytes,u=h.hexToBytes,w=h.bytesToHex,t=h.be2toi,p=h.itobe2,q=h.be4toi,y=h.itobe4,A=h.be8toi,D=h.itobe8,z=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350],B={},v={mult:function(a,b){return l(a,n.apply(null,b))},avc1encv:function(a,b,c,d,e,f,g,h,k,m){return l(a,n(6,p(b),16,p(c),p(d),p(e),2,p(f),6,[0,1,g.length],
r(g),31-g.length,p(h),[255,255],k,"encv"===a?m:[]))},avcc:function(a,b,c){return l("avcC",n([1,a[1],a[2],a[3],252|(2===c?1:4===c?3:0),225],p(a.length),a,[1],p(b.length),b))},dref:function(a){return l("dref",n(7,[1],a))},esds:function(a,b){return l("esds",n(4,[3,25],p(a),[0,4,17,64,21],11,[5,2],u(b),[6,1,2]))},frma:function(a){return l("frma",r(a))},free:function(a){return l("free",new Uint8Array(a-8))},ftyp:function(a,b){return l("ftyp",n.apply(null,[r(a),[0,0,0,1]].concat(b.map(r))))},hdlr:function(a){var b=
void 0,c=void 0;switch(a){case "video":b="vide";c="VideoHandler";break;case "audio":b="soun";c="SoundHandler";break;default:b="hint",c=""}return l("hdlr",n(8,r(b),12,r(c),1))},mdhd:function(a){return l("mdhd",n(12,y(a),8))},moof:function(a,b){return v.mult("moof",[a,b])},mp4aenca:function(a,b,c,d,e,f,g,h){return l(a,n(6,p(b),8,p(c),p(d),2,p(e),p(f),2,g,"enca"===a?h:[]))},mvhd:function(a,b){return l("mvhd",n(12,y(a),4,[0,1],2,[1,0],10,[0,1],14,[0,1],14,[64,0,0,0],26,p(b+1)))},pssh:function(a){var b=
1>=arguments.length||void 0===arguments[1]?[]:arguments[1],c=2>=arguments.length||void 0===arguments[2]?[]:arguments[2];a=a.replace(/-/g,"");e(32===a.length,"wrong system id length");var d=void 0,f=void 0,f=c.length;0<f?(d=1,f=n.apply(null,[y(f)].concat(c))):(d=0,f=[]);return l("pssh",n([d,0,0,0],u(a),f,y(b.length),b))},saio:function(a,b,c,d){return l("saio",n(4,[0,0,0,1],y(a.length+b.length+c.length+d.length+8+8+8+8)))},saiz:function(a){if(0===a.length)return l("saiz",new Uint8Array);var b=q(a,0),
c=q(a,4),d=new Uint8Array(9+c);d.set(y(c),5);for(var c=9,e=8,f=void 0,g=void 0;e<a.length;)e+=8,2===(b&2)?(g=2,f=t(a,e),e+=2+6*f):g=f=0,d[c]=6*f+8+g,c++;return l("saiz",d)},schm:function(a,b){return l("schm",n(4,r(a),y(b)))},senc:function(a){return l("senc",a)},smhd:function(){return l("smhd",new Uint8Array(8))},stsd:function(a){return l("stsd",n.apply(null,[7,[a.length]].concat(a)))},tkhd:function(a,b,c){return l("tkhd",n(y(7),8,y(c),20,[1,0,0,0],[0,1,0,0],12,[0,1,0,0],12,[64,0,0,0],p(a),2,p(b),
2))},trex:function(a){return l("trex",n(4,y(a),[0,0,0,1],12))},tfdt:function(a){return l("tfdt",n([1,0,0,0],D(a)))},tenc:function(a,b,c){return l("tenc",n(6,[a,b],u(c)))},traf:function(a,b,c,d,e){var f=[a,b,c];d&&f.push(v.senc(d),v.saiz(d),v.saio(e,a,b,c));return v.mult("traf",f)},trun:function(a){if(a[11]&1)return a;var b=new Uint8Array(a.length+4);b.set(y(a.length+4),0);b.set(a.subarray(4,16),4);b[11]|=1;b.set([0,0,0,0],16);b.set(a.subarray(16,a.length),20);return b},vmhd:function(){var a=new Uint8Array(12);
a[3]=1;return l("vmhd",a)}},F={traf:function(a){return(a=g(a,1836019558))?g(a,1953653094):null},senc:function(a){return k(a,2721664850,1520127764,2722393154,2086964724)},tfxd:function(a){return k(a,1830656773,1121273062,2162299933,2952222642)},tfrf:function(a){return k(a,3565190898,3392751253,2387879627,2655430559)},mdat:function(a){return g(a,1835295092)}};f.exports={getMdat:F.mdat,getTraf:F.traf,parseTfrf:function(a){a=F.tfrf(a);if(!a)return[];for(var b=[],c=a[0],d=a[4],e=0;e<d;e++){var f=void 0,
g=void 0;1==c?(g=A(a,16*e+5),f=A(a,16*e+13)):(g=q(a,8*e+5),f=q(a,8*e+9));b.push({ts:g,d:f})}return b},parseTfxd:function(a){if(a=F.tfxd(a))return{d:A(a,12),ts:A(a,4)}},createVideoInitSegment:function(a,b,d,e,f,g,h,k,l){l||(l=[]);var m=h.split("00000001");h=m[2];m=u(m[1]);h=u(h);g=v.avcc(m,h,g);h=void 0;l.length?(k=v.tenc(1,8,k),k=v.mult("schi",[k]),h=v.schm("cenc",65536),m=v.frma("avc1"),k=v.mult("sinf",[m,h,k]),e=v.avc1encv("encv",1,b,d,e,f,"AVC Coding",24,g,k)):e=v.avc1encv("avc1",1,b,d,e,f,"AVC Coding",
24,g);h=v.stsd([e]);return c(a,"video",h,v.vmhd(),b,d,l)},createAudioInitSegment:function(a,b,d,e,f,g,h,k){k||(k=[]);if(!g){g=z.indexOf(f);var l=void 0,l=((32|g&31)<<4|b&31)<<3;g=w(p(l))}g=v.esds(1,g);l=void 0;if(k.length){h=v.tenc(1,8,h);h=v.mult("schi",[h]);var l=v.schm("cenc",65536),m=v.frma("mp4a");h=v.mult("sinf",[m,l,h]);b=v.mp4aenca("enca",1,b,d,e,f,g,h)}else b=v.mp4aenca("mp4a",1,b,d,e,f,g);l=v.stsd([b]);return c(a,"audio",l,v.smhd(),0,0,k)},patchSegment:function(a,c){var d=a.subarray(0,q(a,
0)),e=v.tfdt(c),f=e.length,g=q(d,8),h=q(d,8+g),k=q(d,8+g+8),l=q(d,8+g+8+k),n=d.subarray(8,8+g),p=d.subarray(8+g+8,8+g+8+h-8),h=p.subarray(0,k),l=p.subarray(k,k+l);h.set([0,0,0,1],12);p=F.senc(p);l=v.trun(l);e=v.traf(h,e,l,p,n);n=v.moof(n,e);f=8+g+8+k+f;return m?b(a,n,d,f):8<=d.length-n.length?(d=d.length-n.length,a.set(n,0),a.set(v.free(d),n.length),a.set(y(n.length+8+d),f+16),a):b(a,n,d,f)}}},function(f,h,a){function l(a){return"boolean"==typeof a?a:"string"==typeof a?"TRUE"===a.toUpperCase():!1}
function k(a){var b=a.timeline[a.timeline.length-1];return(b.ts+(b.r+1)*b.d)/a.timescale}function g(a){return[{systemId:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",privateData:b.concat([8,1,18,16],a)}]}var d=a(3),b=a(18),c={audio:"audio/mp4",video:"video/mp4",text:"application/ttml+xml"},e={audio:"mp4a.40.2",video:"avc1.4D401E"};h={AACL:"audio/mp4",AVC1:"video/mp4",H264:"video/mp4",TTML:"application/ttml+xml+mp4"};var m={audio:[["Bitrate","bitrate",parseInt],["AudioTag","audiotag",parseInt],["FourCC",
"mimeType",h],["Channels","channels",parseInt],["SamplingRate","samplingRate",parseInt],["BitsPerSample","bitsPerSample",parseInt],["PacketSize","packetSize",parseInt],["CodecPrivateData","codecPrivateData",String]],video:[["Bitrate","bitrate",parseInt],["FourCC","mimeType",h],["CodecPrivateData","codecs",function(a){return(a=(/00000001\d7([0-9a-fA-F]{6})/.exec(a)||[])[1])?"avc1."+a:""}],["MaxWidth","width",parseInt],["MaxHeight","height",parseInt],["CodecPrivateData","codecPrivateData",String]],
text:[["Bitrate","bitrate",parseInt],["FourCC","mimeType",h]]};f.exports=function(){function a(b,c,d){for(b=b.firstElementChild;b;)d=c(d,b.nodeName,b),b=b.nextElementSibling;return d}function f(b,g){b.hasAttribute("Timescale")&&(g=+b.getAttribute("Timescale"));var h=b.getAttribute("Type"),k=b.getAttribute("Subtype"),l=m[h];d(l,"unrecognized QualityLevel type "+h);var q=0,p=a(b,function(a,b,c){switch(b){case "QualityLevel":b={};for(var d=0;d<l.length;d++){var e=l[d],f=e[0],g=e[2];b[e[1]]="function"==
typeof g?g(c.getAttribute(f)):g[c.getAttribute(f)]}"audio"==h&&(c=c.getAttribute("FourCC")||"",d=b.codecPrivateData,e=void 0,e="AACH"==c?5:d?(parseInt(d.substr(0,2),16)&248)>>3:2,b.codecs=e?"mp4a.40."+e:"");if("video"!=h||b.bitrate>A)b.id=q++,a.representations.push(b);break;case "c":b=a.index;var d=a.index.timeline,e=d.length,f=0<e?d[e-1]:{d:0,ts:0,r:0},g=+c.getAttribute("d"),k=c.getAttribute("t");(c=+c.getAttribute("r"))&&c--;0<e&&!f.d&&(f.d=k-f.ts,d[e-1]=f);0<e&&g==f.d&&null==k?f.r+=(c||0)+1:d.push({d:g,
ts:null==k?f.ts+f.d*(f.r+1):+k,r:c});b.timeline=d}return a},{representations:[],index:{timeline:[],indexType:"timeline",timescale:g,initialization:{}}}),u=p.representations,p=p.index;d(u.length,"adaptation should have at least one representation");u.forEach(function(a){return a.codecs=a.codecs||e[h]});u.forEach(function(a){return a.mimeType=a.mimeType||c[h]});return"ADVT"==k?null:{type:h,index:p,representations:u,name:b.getAttribute("Name"),lang:b.getAttribute("Language"),baseURL:b.getAttribute("Url")}}
function h(a){return w((new DOMParser).parseFromString(a,"application/xml"))}function w(c){c=c.documentElement;d.equal(c.nodeName,"SmoothStreamingMedia","document root should be SmoothStreamingMedia");d(/^[2]-[0-2]$/.test(c.getAttribute("MajorVersion")+"-"+c.getAttribute("MinorVersion")),"Version should be 2.0, 2.1 or 2.2");var e=+c.getAttribute("Timescale")||1E7,g=0,h=a(c,function(a,c,h){switch(c){case "Protection":h=h.firstElementChild;d.equal(h.nodeName,"ProtectionHeader","Protection should have ProtectionHeader child");
c=b.strToBytes(atob(h.textContent));var k;k=b.le2toi(c,8);k=b.bytesToUTF16Str(c.subarray(10,10+k));k=(new DOMParser).parseFromString(k,"application/xml").querySelector("KID").textContent;k=b.guidToUuid(atob(k)).toLowerCase();var l=b.hexToBytes(k);h=h.getAttribute("SystemID").toLowerCase().replace(/\{|\}/g,"");c={keyId:k,keySystems:[{systemId:h,privateData:c}].concat(D(l))};a.protection=c;break;case "StreamIndex":if(c=f(h,e))c.id=g++,a.adaptations.push(c)}return a},{protection:null,adaptations:[]}),
m=h.protection,h=h.adaptations;h.forEach(function(a){return a.smoothProtection=m});var p=void 0,u=void 0,w=void 0,t=void 0,A=l(c.getAttribute("IsLive"));if(A)var p=q,w=+c.getAttribute("DVRWindowLength")/e,t=y,u=h.filter(function(a){return"video"==a.type})[0],x=h.filter(function(a){return"audio"==a.type})[0],u=Math.min(k(u.index),k(x.index)),u=Date.now()/1E3-(u+t);return{transportType:"smoothstreaming",profiles:"",type:A?"dynamic":"static",suggestedPresentationDelay:p,timeShiftBufferDepth:w,presentationLiveGap:u,
availabilityStartTime:t,periods:[{duration:(+c.getAttribute("Duration")||Infinity)/e,adaptations:h,laFragCount:+c.getAttribute("LookAheadFragmentCount")}]}}function t(a){return"string"==typeof a?h(a):w(a)}var p=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],q=p.suggestedPresentationDelay||20,y=p.referenceDateTime||Date.UTC(1970,0,1,0,0,0,0)/1E3,A=p.minRepresentationBitrate||19E4,D=p.keySystems||g;t.parseFromString=h;t.parseFromDocument=w;return t}},function(f,h,a){function l(a){return a.replace(d,
"\n").replace(g,function(a,b){return String.fromCharCode(b)})}var k=a(3),g=/&#([0-9]+);/g,d=/<br>/gi,b=/<style[^>]*>([\s\S]*?)<\/style[^>]*>/i,c=/\s*<p class=([^>]+)>(.*)/i,e=/<sync[^>]+?start="?([0-9]*)"?[^0-9]/i;f.exports={parseSami:function(a,d){for(var f=/<sync[ >]/ig,g=/<sync[ >]|<\/body>/ig,h=[],t=a.match(b)[1],p=void 0,q=g.exec(a),p=/\.(\S+)\s*{([^}]*)}/gi,q={},y=void 0;y=p.exec(t);){var A=y[1],y=y[2].match(/\s*lang:\s*(\S+);/i)[1];A&&y&&(q[y]=A)}t=q[d];for(k(t,"sami: could not find lang "+
d+" in CSS");;){p=f.exec(a);q=g.exec(a);if(!p&&!q)break;if(!p||!q||p.index>=q.index)throw Error("parse error");q=a.slice(p.index,q.index);p=q.match(e);if(!p)throw Error("parse error (sync time attribute)");A=+p[1];if(isNaN(A))throw Error("parse error (sync time attribute NaN)");for(var p=h,q=q.split("\n"),A=A/1E3,y=q.length,D=void 0;0<=--y;)if(D=q[y].match(c)){var z=D[2];t===D[1]&&("&nbsp;"===z?p[p.length-1].end=A:p.push({text:l(z),start:A}))}}return h}}},function(f,h){function a(b,d){var e=0;b=b.firstChild;
for(var f=[],h=void 0;b;){if(1===b.nodeType)switch(b.tagName.toUpperCase()){case "P":var h=b,t=d,p=l(h.getAttribute("begin"),t),q=l(h.getAttribute("end"),t),y=l(h.getAttribute("dur"),0);if("number"==!("undefined"===typeof p||k(p))&&"number"==!("undefined"===typeof q||k(q))&&"number"==!("undefined"===typeof y||k(y)))throw Error("ttml unsupported timestamp format");0<y?(null==p&&(p=e||t),null==q&&(q=p+y)):null==q&&(q=l(h.getAttribute("duration"),0),q=0<=q?q+p:Number.MAX_VALUE);h={id:h.getAttribute("xml:id")||
h.getAttribute("id"),text:decodeURIComponent(c(h.innerHTML.replace(g,"\n"))),start:p,end:q};e=h.end;f.push(h);break;case "DIV":h=l(b.getAttribute("begin"),0),null==h&&(h=d),f.push.apply(f,a(b,h))}b=b.nextSibling}return f}function l(a,c){if(!a)return null;var f=void 0;if(f=a.match(d)){var g=f[3],h=f[4],k=f[6];return 3600*parseInt(f[2]||0,10)+60*parseInt(g,10)+parseInt(h,10)+parseFloat("0."+k)}return(f=a.match(b))?(g=f[4],parseFloat(f[1])*e[g]+c):null}var k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?
function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol?"symbol":typeof a},g=/<br[^>]+>/gm,d=/^(([0-9]+):)?([0-9]+):([0-9]+)(\.([0-9]+))?$/,b=/(([0-9]+)(\.[0-9]+)?)(ms|h|m|s)/,c=window.escape,e={h:3600,m:60,s:1,ms:.001};f.exports={parseTTML:function(b,c,d){c=void 0;c="string"==typeof b?(new DOMParser).parseFromString(b,"text/xml"):b;if(!(c instanceof window.Document||c instanceof window.HTMLElement))throw Error("ttml needs a Document to parse");b=c.querySelector("tt");
if(!b)throw Error("ttml could not find <tt> tag");b=a(b.querySelector("body"),0);for(c=0;c<b.length;c++){var e=b[c];e.start+=d;e.end+=d}return b}}},function(f,h){function a(a){return a*(1+.3*(2*Math.random()-1))}f.exports={getFuzzedDelay:a,getBackedoffDelay:function(f){return a(f*Math.pow(2,(1>=arguments.length||void 0===arguments[1]?1:arguments[1])-1))}}},function(f,h){var a=function(){function a(){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.hash={}}a.prototype.add=
function(a){this.hash[a]=!0};a.prototype.remove=function(a){delete this.hash[a]};a.prototype.test=function(a){return!0===this.hash[a]};return a}();f.exports={SimpleSet:a}},function(f,h,a){function l(a){return null==a?"":String(a).replace(n,function(a){return r[a]})}function k(a){var b=a.getAverageBitrates(),d=void 0,e=void 0;b.video.take(1).subscribe(function(a){return e=a|0});b.audio.take(1).subscribe(function(a){return d=a|0});return{manifest:a.man,version:a.version,timeFragment:a.frag,currentTime:a.getCurrentTime(),
state:a.getPlayerState(),buffer:c(a.video.buffered),volume:a.getVolume(),video:{adaptation:a.adas.video,representation:a.reps.video,maxBitrate:a.getVideoMaxBitrate(),bufferSize:a.getVideoBufferSize(),avrBitrate:e},audio:{adaptation:a.adas.audio,representation:a.reps.audio,maxBitrate:a.getAudioMaxBitrate(),bufferSize:a.getAudioBufferSize(),avrBitrate:d}}}function g(a,b){var c=b.parentNode.querySelector("#cp--debug-infos-content");if(c){var d=void 0;try{d=k(a)}catch(e){return}var f=d,g=f.video,h=f.audio,
f=f.manifest,d="<b>Player v"+d.version+"</b> ("+d.state+")<br>";f&&g&&h&&(d+=["Container: "+l(f.transportType),"Live: "+l(""+f.isLive),"Downloading bitrate (Kbit/s):\n          "+(g.representation.bitrate/1E3).toFixed(3)+"/"+(h.representation.bitrate/1E3).toFixed(3),"Estimated bandwidth (Kbit/s):\n          "+(g.avrBitrate/1E3).toFixed(3)+"/"+(h.avrBitrate/1E3).toFixed(3),"Location: "+f.locations[0]].join("<br>"));c.innerHTML=d}}function d(a,c){var d="<style>\n#cp--debug-infos {\n  position: absolute;\n  top: "+
l(c.offsetTop+10)+"px;\n  left: "+l(c.offsetLeft+10)+'px;\n  width: 500px;\n  height: 300px;\n  background-color: rgba(10, 10, 10, 0.83);\n  overflow: hidden;\n  color: white;\n  text-align: left;\n  padding: 2em;\n  box-sizing: border-box;\n}\n#cp--debug-hide-infos {\n  float: right;\n  cursor: pointer;\n}\n</style>\n<div id="cp--debug-infos">\n  <a id="cp--debug-hide-infos">[x]</a>\n  <p id="cp--debug-infos-content"></p>\n</div>',f=c.parentNode,h=f.querySelector("#cp--debug-infos-container");h||
(h=document.createElement("div"),h.setAttribute("id","cp--debug-infos-container"),f.appendChild(h));h.innerHTML=d;m||(m=f.querySelector("#cp--debug-hide-infos"),m.addEventListener("click",function(){return b(c)}));e&&clearInterval(e);e=setInterval(function(){return g(a,c)},1E3);g(a,c)}function b(a){(a=a.parentNode.querySelector("#cp--debug-infos-container"))&&a.parentNode.removeChild(a);e&&(clearInterval(e),e=null);m&&(m.removeEventListener("click",b),m=null)}var c=a(21).bufferedToArray,e=void 0,
m=void 0,n=/[&<>"']/g,r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};f.exports={getDebug:k,showDebug:d,hideDebug:b,toggleDebug:function(a,c){c.parentNode.querySelector("#cp--debug-infos-container")?b(c):d(a,c)}}}])});
